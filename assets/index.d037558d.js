(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function v(){}function ze(t,e){for(const n in e)t[n]=e[n];return t}function Ne(t){return t()}function ge(){return Object.create(null)}function J(t){t.forEach(Ne)}function ne(t){return typeof t=="function"}function T(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let X;function Ge(t,e){return X||(X=document.createElement("a")),X.href=e,t===X.href}function He(t){return Object.keys(t).length===0}function Xe(t,...e){if(t==null)return v;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function pe(t,e,n){t.$$.on_destroy.push(Xe(e,n))}function Ye(t,e,n,l){if(t){const r=Me(t,e,n,l);return t[0](r)}}function Me(t,e,n,l){return t[1]&&l?ze(n.ctx.slice(),t[1](l(e))):n.ctx}function Ke(t,e,n,l){if(t[2]&&l){const r=t[2](l(n));if(e.dirty===void 0)return r;if(typeof r=="object"){const s=[],i=Math.max(e.dirty.length,r.length);for(let u=0;u<i;u+=1)s[u]=e.dirty[u]|r[u];return s}return e.dirty|r}return e.dirty}function Qe(t,e,n,l,r,s){if(r){const i=Me(e,n,l,s);t.p(i,r)}}function We(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let l=0;l<n;l++)e[l]=-1;return e}return-1}function g(t,e){t.appendChild(e)}function S(t,e,n){t.insertBefore(e,n||null)}function F(t){t.parentNode.removeChild(t)}function je(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function p(t){return document.createElement(t)}function Z(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function x(t){return document.createTextNode(t)}function P(){return x(" ")}function j(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function fe(t){return function(e){return e.preventDefault(),t.call(this,e)}}function d(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Ze(t){return Array.from(t.childNodes)}function re(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function _e(t,e){t.value=e==null?"":e}function R(t,e,n){t.classList[n?"add":"remove"](e)}let de;function z(t){de=t}const V=[],ee=[],Q=[],ie=[],et=Promise.resolve();let oe=!1;function tt(){oe||(oe=!0,et.then(Ae))}function ue(t){Q.push(t)}function be(t){ie.push(t)}const se=new Set;let Y=0;function Ae(){const t=de;do{for(;Y<V.length;){const e=V[Y];Y++,z(e),nt(e.$$)}for(z(null),V.length=0,Y=0;ee.length;)ee.pop()();for(let e=0;e<Q.length;e+=1){const n=Q[e];se.has(n)||(se.add(n),n())}Q.length=0}while(V.length);for(;ie.length;)ie.pop()();oe=!1,se.clear(),z(t)}function nt(t){if(t.fragment!==null){t.update(),J(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ue)}}const W=new Set;let L;function Re(){L={r:0,c:[],p:L}}function xe(){L.r||J(L.c),L=L.p}function w(t,e){t&&t.i&&(W.delete(t),t.i(e))}function y(t,e,n,l){if(t&&t.o){if(W.has(t))return;W.add(t),L.c.push(()=>{W.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}function we(t,e,n){const l=t.$$.props[e];l!==void 0&&(t.$$.bound[l]=n,n(t.$$.ctx[l]))}function I(t){t&&t.c()}function E(t,e,n,l){const{fragment:r,on_mount:s,on_destroy:i,after_update:u}=t.$$;r&&r.m(e,n),l||ue(()=>{const a=s.map(Ne).filter(ne);i?i.push(...a):J(a),t.$$.on_mount=[]}),u.forEach(ue)}function O(t,e){const n=t.$$;n.fragment!==null&&(J(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function rt(t,e){t.$$.dirty[0]===-1&&(V.push(t),tt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function $(t,e,n,l,r,s,i,u=[-1]){const a=de;z(t);const o=t.$$={fragment:null,ctx:null,props:s,update:v,not_equal:r,bound:ge(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:ge(),dirty:u,skip_bound:!1,root:e.target||a.$$.root};i&&i(o.root);let c=!1;if(o.ctx=n?n(t,e.props||{},(f,m,..._)=>{const h=_.length?_[0]:m;return o.ctx&&r(o.ctx[f],o.ctx[f]=h)&&(!o.skip_bound&&o.bound[f]&&o.bound[f](h),c&&rt(t,f)),m}):[],o.update(),c=!0,J(o.before_update),o.fragment=l?l(o.ctx):!1,e.target){if(e.hydrate){const f=Ze(e.target);o.fragment&&o.fragment.l(f),f.forEach(F)}else o.fragment&&o.fragment.c();e.intro&&w(t.$$.fragment),E(t,e.target,e.anchor,e.customElement),Ae()}z(a)}class k{$destroy(){O(this,1),this.$destroy=v}$on(e,n){const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const r=l.indexOf(n);r!==-1&&l.splice(r,1)}}$set(e){this.$$set&&!He(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const lt="A 'merge' property is required",st="Property 'merge' must be an array",it="A 'find' property is required on every element inside 'merge'",ot="Every 'find' property inside 'merge' must be of type string",ut="Every 'find' property inside 'merge' must be a string of length equal to or higher than one",at="A 'replace' property is required on every element inside 'merge'",ct="Unexpected error while parsing template JSON",ft="Every element inside the 'merge' should be an object";var dt=Object.defineProperty,mt=Object.defineProperties,ht=Object.getOwnPropertyDescriptors,ve=Object.getOwnPropertySymbols,gt=Object.prototype.hasOwnProperty,pt=Object.prototype.propertyIsEnumerable,ye=(t,e,n)=>e in t?dt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_t=(t,e)=>{for(var n in e||(e={}))gt.call(e,n)&&ye(t,n,e[n]);if(ve)for(var n of ve(e))pt.call(e,n)&&ye(t,n,e[n]);return t},bt=(t,e)=>mt(t,ht(e));class A extends Error{constructor(e){super(e)}}function wt(t){return typeof t=="object"}function le(t,e){return t in e}function ae(t,e){return!le(t,e)}function vt(t,e){return le(t,e)&&!(e[t]instanceof Array)}function yt(t,e){return le(t,e)&&typeof e[t]!="string"}function Ft(t,e){const n=le(t,e)&&e[t];return!(typeof n=="string"&&n.length>0)}function St(t){try{const e=JSON.parse(t);if(ae("merge",e))throw new A(lt);if(vt("merge",e))throw new A(st);const{merge:n}=e,l=Et(n);return bt(_t({},e),{merge:l})}catch(e){throw De(e)}}function Et(t){return t.map(n=>{if(!wt(n))throw new A(ft);if(ae("find",n))throw new A(it);if(ae("replace",n))throw new A(at);if(yt("find",n))throw new A(ot);if(Ft("find",n))throw new A(ut);return n}).map(({find:n,replace:l})=>({find:n,replace:Le(l)}))}function Ot(t){return typeof t=="object"&&t!==null&&"message"in t}function De(t){return t instanceof Error?t:Ot(t)?new A(t.message):new A(ct)}function Le(t){return typeof t=="string"?t:JSON.stringify(t)}function ce(t){const e=new RegExp("(?<={{).+(?=}})|(?<={{).+(?=}$)|(?<={{).+(?=$)","g"),n=t.match(e);return n&&n.toString().trim()||t}var It=Object.defineProperty,Tt=Object.defineProperties,$t=Object.getOwnPropertyDescriptors,Fe=Object.getOwnPropertySymbols,kt=Object.prototype.hasOwnProperty,Ct=Object.prototype.propertyIsEnumerable,Se=(t,e,n)=>e in t?It(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,q=(t,e)=>{for(var n in e||(e={}))kt.call(e,n)&&Se(t,n,e[n]);if(Fe)for(var n of Fe(e))Ct.call(e,n)&&Se(t,n,e[n]);return t},K=(t,e)=>Tt(t,$t(e));class Ue{constructor(e){this._error=null,this.template={merge:[]},this._result={merge:[]},this.handlers={change:[],submit:[],error:[this.logger],upload:[]},this.setTemplateSource(e)}set error(e){const n=this._error&&q({},this._error)||null;this._error=e,e!==null&&this.handlers.error.forEach(l=>l(e,n))}get error(){return this._error}set result(e){this._result=e,this.handlers.change.forEach(n=>n(e))}get result(){return this._result}on(e,n){this.handlers[e].push(n)}off(e,n){this.handlers=K(q({},this.handlers),{[e]:this.handlers[e].filter(l=>l!==n)})}submit(){if(this.error)throw this.error;this.handlers.submit.forEach(e=>e(this.result))}setTemplateSource(e){try{const n=St(Le(e));this.template=n,this.result=n,this.error=null}catch(n){const l=De(n);this.error=l}}updateResultMergeFields(e,n){const l=n||this.getMergeFieldItem({find:e.find});return this.result.merge.forEach(r=>{r===l&&(r.find=e.find,r.replace=e.replace)}),this.result=K(q({},this.result),{merge:this.result.merge}),this.result.merge}logger(e){console.error(e)}addMergeField(e){this.setTemplateSource(K(q({},this.result),{merge:[...this.result.merge,e]}))}removeMergeField(e){this.setTemplateSource(K(q({},this.result),{merge:this.result.merge.filter(n=>n!==e)}))}getMergeFieldItem(e){if(Object.keys(e).length===0)return;const n=function(l){let r;for(r in e)if(l[r]!==e[r])return!1;return!0};return this.result.merge.find(n)}getSrcPlaceholders(){if(!this.template.timeline||!this.template.timeline.tracks)return[];const e=this.template.timeline.tracks,n=[];for(let l=0;l<e.length;l++)for(let r=0;r<e[l].clips.length;r++){const s={placeholder:e[l].clips[r].asset.src,asset:e[l].clips[r].asset};ce(s.placeholder)!==s.placeholder&&n.push(s)}return n}async updateSrc(e,n){let l=n.src;for(let r=0;r<this.handlers.upload.length;r++){const s=this.handlers.upload[r];l=await s(e)}n.src=l,this.handlers.change.forEach(r=>r(this.result))}}const Pt=[{find:"NAME",replace:"world"}],Nt={tracks:[{clips:[{asset:{type:"title",text:"Hello {{ NAME }}",style:"future",src:"{{ ASSET }}"},start:0,length:5}]}]},Mt={format:"mp4",resolution:"hd"},Be={merge:Pt,timeline:Nt,output:Mt},B=[];function Ee(t,e=v){let n;const l=new Set;function r(u){if(T(t,u)&&(t=u,n)){const a=!B.length;for(const o of l)o[1](),B.push(o,t);if(a){for(let o=0;o<B.length;o+=2)B[o][0](B[o+1]);B.length=0}}}function s(u){r(u(t))}function i(u,a=v){const o=[u,a];return l.add(o),l.size===1&&(n=e(r)||v),u(t),()=>{l.delete(o),l.size===0&&(n(),n=null)}}return{set:r,update:s,subscribe:i}}function jt(t){let e,n,l;return{c(){e=p("input"),d(e,"class","border w-full mb-3 pl-2 py-1 text-stone-500"),d(e,"type","text"),d(e,"role","textbox"),d(e,"aria-label",t[1])},m(r,s){S(r,e,s),_e(e,t[0]),n||(l=[j(e,"input",t[3]),j(e,"focus",t[4],{once:!0})],n=!0)},p(r,[s]){s&2&&d(e,"aria-label",r[1]),s&1&&e.value!==r[0]&&_e(e,r[0])},i:v,o:v,d(r){r&&F(e),n=!1,J(l)}}}function At(t,e,n){let{value:l}=e,{label:r}=e,{onFocus:s}=e;function i(){l=this.value,n(0,l)}const u=a=>s(a.currentTarget);return t.$$set=a=>{"value"in a&&n(0,l=a.value),"label"in a&&n(1,r=a.label),"onFocus"in a&&n(2,s=a.onFocus)},[l,r,s,i,u]}class Oe extends k{constructor(e){super(),$(this,e,At,jt,T,{value:0,label:1,onFocus:2})}}function Rt(t){let e,n,l,r,s,i,u,a,o,c,f,m,_,h,b,C;function M(N){t[7](N)}let U={label:"MergeField.find",onFocus:t[6]};t[1]!==void 0&&(U.value=t[1]),i=new Oe({props:U}),ee.push(()=>we(i,"value",M));function G(N){t[9](N)}let D={label:"MergeField.replace",onFocus:t[8]};return t[2]!==void 0&&(D.value=t[2]),o=new Oe({props:D}),ee.push(()=>we(o,"value",G)),{c(){e=p("div"),n=p("div"),l=p("h1"),l.textContent="Add a new merge field",r=P(),s=p("div"),I(i.$$.fragment),a=P(),I(o.$$.fragment),f=P(),m=p("div"),_=p("button"),_.textContent="Add",d(l,"class","text-teal-400 px-1"),d(_,"aria-label","Add field"),d(_,"class","bg-blue-500 hover:bg-blue-700 text-white font-bold py-1 px-3 rounded align-self-end"),d(m,"class","flex flex-row-reverse"),d(s,"class","border p-4 mb-6"),d(e,"data-cy","add-merge-field-section")},m(N,H){S(N,e,H),g(e,n),g(n,l),g(n,r),g(n,s),E(i,s,null),g(s,a),E(o,s,null),g(s,f),g(s,m),g(m,_),h=!0,b||(C=j(_,"click",fe(t[10])),b=!0)},p(N,[H]){const me={};!u&&H&2&&(u=!0,me.value=N[1],be(()=>u=!1)),i.$set(me);const he={};!c&&H&4&&(c=!0,he.value=N[2],be(()=>c=!1)),o.$set(he)},i(N){h||(w(i.$$.fragment,N),w(o.$$.fragment,N),h=!0)},o(N){y(i.$$.fragment,N),y(o.$$.fragment,N),h=!1},d(N){N&&F(e),O(i),O(o),b=!1,C()}}}function xt(t,e,n){let l,r,s=Ee("find");pe(t,s,h=>n(1,l=h));let i=Ee("replace");pe(t,i,h=>n(2,r=h));let u=h=>h.set(""),{addField:a}=e;const o=()=>u(s);function c(h){l=h,s.set(l)}const f=()=>u(i);function m(h){r=h,i.set(r)}const _=()=>a({find:l,replace:r});return t.$$set=h=>{"addField"in h&&n(0,a=h.addField)},[a,l,r,s,i,u,o,c,f,m,_]}class Dt extends k{constructor(e){super(),$(this,e,xt,Rt,T,{addField:0})}}function Lt(t){let e,n;return{c(){e=Z("svg"),n=Z("path"),d(n,"fill","white"),d(n,"d","M.293.293a1 1 0 011.414 0L8 6.586 14.293.293a1 1 0 111.414 1.414L9.414 8l6.293 6.293a1 1 0 01-1.414 1.414L8 9.414l-6.293 6.293a1 1 0 01-1.414-1.414L6.586 8 .293 1.707a1 1 0 010-1.414z"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"viewBox","0 0 16 16")},m(l,r){S(l,e,r),g(e,n)},p:v,i:v,o:v,d(l){l&&F(e)}}}function Ut(t){return[]}class Bt extends k{constructor(e){super(),$(this,e,Ut,Lt,T,{})}}function Jt(t){let e,n,l,r,s;return n=new Bt({}),{c(){e=p("button"),I(n.$$.fragment),d(e,"class","bg-blue-400 hover:bg-blue-700 text-white font-bold absolute top-0 right-0 rounded-full w-4 h-4 p-1"),d(e,"aria-label","Remove field")},m(i,u){S(i,e,u),E(n,e,null),l=!0,r||(s=j(e,"click",fe(function(){ne(t[0])&&t[0].apply(this,arguments)})),r=!0)},p(i,[u]){t=i},i(i){l||(w(n.$$.fragment,i),l=!0)},o(i){y(n.$$.fragment,i),l=!1},d(i){i&&F(e),O(n),r=!1,s()}}}function qt(t,e,n){let{onClick:l}=e;return t.$$set=r=>{"onClick"in r&&n(0,l=r.onClick)},[l]}class Vt extends k{constructor(e){super(),$(this,e,qt,Jt,T,{onClick:0})}}function zt(t){let e,n;return{c(){e=p("label"),n=x(t[0]),d(e,"for",t[0]),d(e,"class","block mb-2 monospace"),d(e,"aria-label","Current label")},m(l,r){S(l,e,r),g(e,n)},p(l,[r]){r&1&&re(n,l[0]),r&1&&d(e,"for",l[0])},i:v,o:v,d(l){l&&F(e)}}}function Gt(t,e,n){let{find:l}=e;return t.$$set=r=>{"find"in r&&n(0,l=r.find)},[l]}class Ht extends k{constructor(e){super(),$(this,e,Gt,zt,T,{find:0})}}function Xt(t){let e,n,l;return{c(){e=p("input"),d(e,"role","textbox"),d(e,"class","border w-full mb-3 pl-2 py-1 text-stone-500"),d(e,"type","text"),e.value=t[2],d(e,"label",t[1])},m(r,s){S(r,e,s),n||(l=j(e,"input",t[4]),n=!0)},p(r,[s]){s&4&&e.value!==r[2]&&(e.value=r[2]),s&2&&d(e,"label",r[1])},i:v,o:v,d(r){r&&F(e),n=!1,l()}}}function Yt(t,e,n){let{field:l}=e,{find:r}=e,{replace:s}=e,{handleFormInput:i}=e;const u=a=>i({find:r,replace:a.currentTarget.value},l);return t.$$set=a=>{"field"in a&&n(0,l=a.field),"find"in a&&n(1,r=a.find),"replace"in a&&n(2,s=a.replace),"handleFormInput"in a&&n(3,i=a.handleFormInput)},[l,r,s,i,u]}class Kt extends k{constructor(e){super(),$(this,e,Yt,Xt,T,{field:0,find:1,replace:2,handleFormInput:3})}}function Qt(t){let e,n,l,r,s;return n=new Ht({props:{find:t[0].find}}),r=new Kt({props:{find:t[0].find,replace:t[0].replace,field:t[0],handleFormInput:t[1]}}),{c(){e=p("div"),I(n.$$.fragment),l=P(),I(r.$$.fragment),d(e,"data-cy","label-input")},m(i,u){S(i,e,u),E(n,e,null),g(e,l),E(r,e,null),s=!0},p(i,[u]){const a={};u&1&&(a.find=i[0].find),n.$set(a);const o={};u&1&&(o.find=i[0].find),u&1&&(o.replace=i[0].replace),u&1&&(o.field=i[0]),u&2&&(o.handleFormInput=i[1]),r.$set(o)},i(i){s||(w(n.$$.fragment,i),w(r.$$.fragment,i),s=!0)},o(i){y(n.$$.fragment,i),y(r.$$.fragment,i),s=!1},d(i){i&&F(e),O(n),O(r)}}}function Wt(t,e,n){let{field:l}=e,{handleFormInput:r}=e;return t.$$set=s=>{"field"in s&&n(0,l=s.field),"handleFormInput"in s&&n(1,r=s.handleFormInput)},[l,r]}class Je extends k{constructor(e){super(),$(this,e,Wt,Qt,T,{field:0,handleFormInput:1})}}function Ie(t,e,n){const l=t.slice();return l[6]=e[n],l}function Te(t){let e,n,l,r,s,i;n=new Je({props:{field:t[6],handleFormInput:t[2]}});function u(){return t[5](t[6])}return r=new Vt({props:{onClick:u}}),{c(){e=p("div"),I(n.$$.fragment),l=P(),I(r.$$.fragment),s=P(),d(e,"class","relative")},m(a,o){S(a,e,o),E(n,e,null),g(e,l),E(r,e,null),g(e,s),i=!0},p(a,o){t=a;const c={};o&2&&(c.field=t[6]),o&4&&(c.handleFormInput=t[2]),n.$set(c);const f={};o&18&&(f.onClick=u),r.$set(f)},i(a){i||(w(n.$$.fragment,a),w(r.$$.fragment,a),i=!0)},o(a){y(n.$$.fragment,a),y(r.$$.fragment,a),i=!1},d(a){a&&F(e),O(n),O(r)}}}function Zt(t){let e,n,l,r,s,i,u,a,o=t[1],c=[];for(let m=0;m<o.length;m+=1)c[m]=Te(Ie(t,o,m));const f=m=>y(c[m],1,1,()=>{c[m]=null});return u=new Dt({props:{addField:t[3]}}),{c(){e=p("div"),n=p("div"),l=p("h1"),l.textContent="Modify Merge Values",r=P(),s=p("div");for(let m=0;m<c.length;m+=1)c[m].c();i=P(),I(u.$$.fragment),d(l,"class","text-teal-400 px-1"),d(s,"class","border p-4 mb-6"),d(n,"data-cy","merge-fields-input-section"),R(e,"hidden",t[0])},m(m,_){S(m,e,_),g(e,n),g(n,l),g(n,r),g(n,s);for(let h=0;h<c.length;h+=1)c[h].m(s,null);g(e,i),E(u,e,null),a=!0},p(m,[_]){if(_&22){o=m[1];let b;for(b=0;b<o.length;b+=1){const C=Ie(m,o,b);c[b]?(c[b].p(C,_),w(c[b],1)):(c[b]=Te(C),c[b].c(),w(c[b],1),c[b].m(s,null))}for(Re(),b=o.length;b<c.length;b+=1)f(b);xe()}const h={};_&8&&(h.addField=m[3]),u.$set(h),(!a||_&1)&&R(e,"hidden",m[0])},i(m){if(!a){for(let _=0;_<o.length;_+=1)w(c[_]);w(u.$$.fragment,m),a=!0}},o(m){c=c.filter(Boolean);for(let _=0;_<c.length;_+=1)y(c[_]);y(u.$$.fragment,m),a=!1},d(m){m&&F(e),je(c,m),O(u)}}}function en(t,e,n){let{error:l}=e,{fields:r=[]}=e,{handleFormInput:s}=e,{addField:i}=e,{removeField:u}=e;const a=o=>u(o);return t.$$set=o=>{"error"in o&&n(0,l=o.error),"fields"in o&&n(1,r=o.fields),"handleFormInput"in o&&n(2,s=o.handleFormInput),"addField"in o&&n(3,i=o.addField),"removeField"in o&&n(4,u=o.removeField)},[l,r,s,i,u,a]}class tn extends k{constructor(e){super(),$(this,e,en,Zt,T,{error:0,fields:1,handleFormInput:2,addField:3,removeField:4})}}function nn(t){let e,n,l;return{c(){e=p("button"),e.textContent="Reset",d(e,"class","bg-blue-500 hover:bg-blue-700 text-white font-bold py-1 px-3 rounded align-self-end")},m(r,s){S(r,e,s),n||(l=j(e,"click",fe(function(){ne(t[0])&&t[0].apply(this,arguments)})),n=!0)},p(r,[s]){t=r},i:v,o:v,d(r){r&&F(e),n=!1,l()}}}function rn(t,e,n){let{onClick:l}=e;return t.$$set=r=>{"onClick"in r&&n(0,l=r.onClick)},[l]}class ln extends k{constructor(e){super(),$(this,e,rn,nn,T,{onClick:0})}}function sn(t){let e,n,l,r,s,i,u,a;return u=new ln({props:{onClick:t[0]}}),{c(){e=p("div"),n=p("p"),l=p("span"),r=x(t[2]),s=P(),i=p("div"),I(u.$$.fragment),d(l,"class","monospace text-orange-900"),d(n,"data-cy","template-input-error"),d(n,"class","bg-rose-200 rounded py-2 my-4 px-4"),d(i,"class","flex flex-row-reverse "),d(e,"data-cy","error-container"),R(e,"hidden",!t[1])},m(o,c){S(o,e,c),g(e,n),g(n,l),g(l,r),g(e,s),g(e,i),E(u,i,null),a=!0},p(o,[c]){(!a||c&4)&&re(r,o[2]);const f={};c&1&&(f.onClick=o[0]),u.$set(f),(!a||c&2)&&R(e,"hidden",!o[1])},i(o){a||(w(u.$$.fragment,o),a=!0)},o(o){y(u.$$.fragment,o),a=!1},d(o){o&&F(e),O(u)}}}function on(t,e,n){let l,{onClick:r}=e,{error:s}=e;return t.$$set=i=>{"onClick"in i&&n(0,r=i.onClick),"error"in i&&n(1,s=i.error)},t.$$.update=()=>{t.$$.dirty&2&&n(2,l=s&&s.message||"")},[r,s,l]}class un extends k{constructor(e){super(),$(this,e,on,sn,T,{onClick:0,error:1})}}const $e=(t,e)=>async n=>await e(n,t);function an(t){let e,n,l=ce(t[1])+"",r,s,i,u,a,o,c;return{c(){e=p("div"),n=p("label"),r=x(l),s=P(),i=p("input"),u=P(),a=p("input"),d(n,"class","block mb-2 monospace"),d(n,"for","input"),d(i,"aria-label","Current source value"),d(i,"class","border w-full mb-3 pl-2 py-1 text-stone-500"),d(i,"type","text"),i.value=t[0],i.disabled=!0,a.disabled=t[2],d(a,"role","button"),d(a,"aria-label","File upload"),d(a,"class","border w-full mb-3 pl-2 py-1 text-stone-500"),d(a,"type","file"),d(e,"data-cy","source-input")},m(f,m){S(f,e,m),g(e,n),g(n,r),g(e,s),g(e,i),g(e,u),g(e,a),o||(c=j(a,"change",t[7]),o=!0)},p(f,[m]){m&2&&l!==(l=ce(f[1])+"")&&re(r,l),m&1&&i.value!==f[0]&&(i.value=f[0]),m&4&&(a.disabled=f[2])},i:v,o:v,d(f){f&&F(e),o=!1,c()}}}function cn(t,e,n){let l,{asset:r}=e,{value:s}=e,{label:i}=e,{handleChange:u}=e,a=!1,o=async f=>{n(6,a=!0),await u(f),n(0,s=r.src),n(6,a=!1)};const c=f=>o(f.currentTarget.files);return t.$$set=f=>{"asset"in f&&n(4,r=f.asset),"value"in f&&n(0,s=f.value),"label"in f&&n(1,i=f.label),"handleChange"in f&&n(5,u=f.handleChange)},t.$$.update=()=>{t.$$.dirty&64&&n(2,l=a)},[s,i,l,o,r,u,a,c]}class qe extends k{constructor(e){super(),$(this,e,cn,an,T,{asset:4,value:0,label:1,handleChange:5})}}function ke(t,e,n){const l=t.slice();return l[2]=e[n],l}function Ce(t){let e,n;return e=new qe({props:{label:t[2].placeholder,handleChange:$e(t[2].asset,t[1]),value:t[2].asset.src,asset:t[2].asset}}),{c(){I(e.$$.fragment)},m(l,r){E(e,l,r),n=!0},p(l,r){const s={};r&1&&(s.label=l[2].placeholder),r&3&&(s.handleChange=$e(l[2].asset,l[1])),r&1&&(s.value=l[2].asset.src),r&1&&(s.asset=l[2].asset),e.$set(s)},i(l){n||(w(e.$$.fragment,l),n=!0)},o(l){y(e.$$.fragment,l),n=!1},d(l){O(e,l)}}}function fn(t){let e,n,l,r,s,i=t[0],u=[];for(let o=0;o<i.length;o+=1)u[o]=Ce(ke(t,i,o));const a=o=>y(u[o],1,1,()=>{u[o]=null});return{c(){e=p("div"),n=p("h1"),n.textContent="Update sources",l=P(),r=p("div");for(let o=0;o<u.length;o+=1)u[o].c();d(n,"class","text-teal-400 px-1"),d(r,"class","border p-4 mb-6"),d(e,"data-cy","source-container"),R(e,"hidden",t[0].length<1)},m(o,c){S(o,e,c),g(e,n),g(e,l),g(e,r);for(let f=0;f<u.length;f+=1)u[f].m(r,null);s=!0},p(o,[c]){if(c&3){i=o[0];let f;for(f=0;f<i.length;f+=1){const m=ke(o,i,f);u[f]?(u[f].p(m,c),w(u[f],1)):(u[f]=Ce(m),u[f].c(),w(u[f],1),u[f].m(r,null))}for(Re(),f=i.length;f<u.length;f+=1)a(f);xe()}(!s||c&1)&&R(e,"hidden",o[0].length<1)},i(o){if(!s){for(let c=0;c<i.length;c+=1)w(u[c]);s=!0}},o(o){u=u.filter(Boolean);for(let c=0;c<u.length;c+=1)y(u[c]);s=!1},d(o){o&&F(e),je(u,o)}}}function dn(t,e,n){let{sources:l}=e,{handleSourceFieldUpdate:r}=e;return t.$$set=s=>{"sources"in s&&n(0,l=s.sources),"handleSourceFieldUpdate"in s&&n(1,r=s.handleSourceFieldUpdate)},[l,r]}class mn extends k{constructor(e){super(),$(this,e,dn,fn,T,{sources:0,handleSourceFieldUpdate:1})}}function hn(t){let e,n;const l=t[1].default,r=Ye(l,t,t[0],null);return{c(){e=p("label"),r&&r.c(),d(e,"for","json-input"),d(e,"class","text-teal-400 px-1")},m(s,i){S(s,e,i),r&&r.m(e,null),n=!0},p(s,[i]){r&&r.p&&(!n||i&1)&&Qe(r,l,s,s[0],n?Ke(l,s[0],i,null):We(s[0]),null)},i(s){n||(w(r,s),n=!0)},o(s){y(r,s),n=!1},d(s){s&&F(e),r&&r.d(s)}}}function gn(t,e,n){let{$$slots:l={},$$scope:r}=e;return t.$$set=s=>{"$$scope"in s&&n(0,r=s.$$scope)},[r,l]}class Ve extends k{constructor(e){super(),$(this,e,gn,hn,T,{})}}function te(t){return JSON.stringify(t,null,2)}function pn(t){let e,n,l,r;return{c(){e=p("textarea"),d(e,"data-cy","template-input"),d(e,"class","w-full h-60 monospace border p-4 overflow-auto whitespace-pre resize-none"),d(e,"id","json-input"),e.value=n=te(t[1])},m(s,i){S(s,e,i),l||(r=j(e,"input",t[2]),l=!0)},p(s,[i]){i&2&&n!==(n=te(s[1]))&&(e.value=n)},i:v,o:v,d(s){s&&F(e),l=!1,r()}}}function _n(t,e,n){let{handleTemplateInput:l}=e,{template:r}=e;const s=i=>l(i.currentTarget.value);return t.$$set=i=>{"handleTemplateInput"in i&&n(0,l=i.handleTemplateInput),"template"in i&&n(1,r=i.template)},[l,r,s]}class bn extends k{constructor(e){super(),$(this,e,_n,pn,T,{handleTemplateInput:0,template:1})}}function wn(t){let e;return{c(){e=x("Paste template")},m(n,l){S(n,e,l)},d(n){n&&F(e)}}}function vn(t){let e,n,l,r,s;return n=new Ve({props:{$$slots:{default:[wn]},$$scope:{ctx:t}}}),r=new bn({props:{template:t[0],handleTemplateInput:t[1]}}),{c(){e=p("div"),I(n.$$.fragment),l=P(),I(r.$$.fragment),d(e,"data-cy","template-input-section"),d(e,"class","mb-6")},m(i,u){S(i,e,u),E(n,e,null),g(e,l),E(r,e,null),s=!0},p(i,[u]){const a={};u&4&&(a.$$scope={dirty:u,ctx:i}),n.$set(a);const o={};u&1&&(o.template=i[0]),u&2&&(o.handleTemplateInput=i[1]),r.$set(o)},i(i){s||(w(n.$$.fragment,i),w(r.$$.fragment,i),s=!0)},o(i){y(n.$$.fragment,i),y(r.$$.fragment,i),s=!1},d(i){i&&F(e),O(n),O(r)}}}function yn(t,e,n){let{template:l}=e,{handleTemplateInput:r}=e;return t.$$set=s=>{"template"in s&&n(0,l=s.template),"handleTemplateInput"in s&&n(1,r=s.handleTemplateInput)},[l,r]}class Fn extends k{constructor(e){super(),$(this,e,yn,vn,T,{template:0,handleTemplateInput:1})}}function Sn(t){let e,n;return{c(){e=Z("svg"),n=Z("path"),d(n,"d","M13 8V2H7v6H2l8 8 8-8h-5zM0 18h20v2H0v-2z"),d(e,"class","fill-current w-4 h-4 mr-2"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"viewBox","0 0 20 20")},m(l,r){S(l,e,r),g(e,n)},p:v,i:v,o:v,d(l){l&&F(e)}}}function En(t){return[]}class On extends k{constructor(e){super(),$(this,e,En,Sn,T,{})}}function In(t){let e,n,l,r;return n=new On({}),{c(){e=p("a"),I(n.$$.fragment),l=x(`
	Download`),d(e,"href",t[0]),d(e,"download","result.json"),d(e,"class","bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded inline-flex items-center w-40 justify-center")},m(s,i){S(s,e,i),E(n,e,null),g(e,l),r=!0},p(s,[i]){(!r||i&1)&&d(e,"href",s[0])},i(s){r||(w(n.$$.fragment,s),r=!0)},o(s){y(n.$$.fragment,s),r=!1},d(s){s&&F(e),O(n)}}}function Tn(t,e,n){let{download:l=""}=e;return t.$$set=r=>{"download"in r&&n(0,l=r.download)},[l]}class $n extends k{constructor(e){super(),$(this,e,Tn,In,T,{download:0})}}function kn(t){let e,n,l;return{c(){e=p("button"),e.textContent="Submit",d(e,"class","bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded w-40")},m(r,s){S(r,e,s),n||(l=j(e,"click",function(){ne(t[0])&&t[0].apply(this,arguments)}),n=!0)},p(r,[s]){t=r},i:v,o:v,d(r){r&&F(e),n=!1,l()}}}function Cn(t,e,n){let{submit:l}=e;return t.$$set=r=>{"submit"in r&&n(0,l=r.submit)},[l]}class Pn extends k{constructor(e){super(),$(this,e,Cn,kn,T,{submit:0})}}function Nn(t){let e,n,l,r,s;return n=new $n({props:{download:t[0]}}),r=new Pn({props:{submit:t[1]}}),{c(){e=p("div"),I(n.$$.fragment),l=P(),I(r.$$.fragment),d(e,"class","flex justify-between pt-4")},m(i,u){S(i,e,u),E(n,e,null),g(e,l),E(r,e,null),s=!0},p(i,[u]){const a={};u&1&&(a.download=i[0]),n.$set(a);const o={};u&2&&(o.submit=i[1]),r.$set(o)},i(i){s||(w(n.$$.fragment,i),w(r.$$.fragment,i),s=!0)},o(i){y(n.$$.fragment,i),y(r.$$.fragment,i),s=!1},d(i){i&&F(e),O(n),O(r)}}}function Mn(t,e,n){let{download:l=""}=e,{submit:r}=e;return t.$$set=s=>{"download"in s&&n(0,l=s.download),"submit"in s&&n(1,r=s.submit)},[l,r]}class jn extends k{constructor(e){super(),$(this,e,Mn,Nn,T,{download:0,submit:1})}}function An(t){navigator.clipboard.writeText(JSON.stringify(t)),alert("JSON copied to clipboard!")}const Rn=""+new URL("copy-regular.423f8619.svg",import.meta.url).href;function xn(t){let e,n,l,r,s;return{c(){e=p("abbr"),n=p("img"),Ge(n.src,l=Rn)||d(n,"src",l),d(n,"alt","copy-button"),d(n,"class","h-4 cursor-pointer inline mb-1"),d(e,"title","Copy to clipboard")},m(i,u){S(i,e,u),g(e,n),r||(s=j(n,"click",t[1]),r=!0)},p:v,i:v,o:v,d(i){i&&F(e),r=!1,s()}}}function Dn(t,e,n){let{result:l}=e;const r=()=>An(l);return t.$$set=s=>{"result"in s&&n(0,l=s.result)},[l,r]}class Ln extends k{constructor(e){super(),$(this,e,Dn,xn,T,{result:0})}}function Un(t){let e,n;return{c(){e=p("p"),n=x(t[0]),d(e,"data-cy","result"),d(e,"class","h-60 overflow-auto border p-4 whitespace-pre monospace")},m(l,r){S(l,e,r),g(e,n)},p(l,[r]){r&1&&re(n,l[0])},i:v,o:v,d(l){l&&F(e)}}}function Bn(t,e,n){let{text:l}=e;return t.$$set=r=>{"text"in r&&n(0,l=r.text)},[l]}class Jn extends k{constructor(e){super(),$(this,e,Bn,Un,T,{text:0})}}function qn(t){let e;return{c(){e=x("Result")},m(n,l){S(n,e,l)},d(n){n&&F(e)}}}function Vn(t){let e,n,l,r,s,i,u,a,o;return n=new Ve({props:{$$slots:{default:[qn]},$$scope:{ctx:t}}}),r=new Ln({props:{result:t[0]}}),i=new Jn({props:{text:te(t[0])}}),a=new jn({props:{submit:t[2],download:t[1]}}),{c(){e=p("div"),I(n.$$.fragment),l=P(),I(r.$$.fragment),s=P(),I(i.$$.fragment),u=P(),I(a.$$.fragment),d(e,"data-cy","result-section"),R(e,"hidden",t[3])},m(c,f){S(c,e,f),E(n,e,null),g(e,l),E(r,e,null),g(e,s),E(i,e,null),g(e,u),E(a,e,null),o=!0},p(c,[f]){const m={};f&16&&(m.$$scope={dirty:f,ctx:c}),n.$set(m);const _={};f&1&&(_.result=c[0]),r.$set(_);const h={};f&1&&(h.text=te(c[0])),i.$set(h);const b={};f&4&&(b.submit=c[2]),f&2&&(b.download=c[1]),a.$set(b),(!o||f&8)&&R(e,"hidden",c[3])},i(c){o||(w(n.$$.fragment,c),w(r.$$.fragment,c),w(i.$$.fragment,c),w(a.$$.fragment,c),o=!0)},o(c){y(n.$$.fragment,c),y(r.$$.fragment,c),y(i.$$.fragment,c),y(a.$$.fragment,c),o=!1},d(c){c&&F(e),O(n),O(r),O(i),O(a)}}}function zn(t,e,n){let{result:l}=e,{download:r}=e,{submit:s}=e,{error:i}=e;return t.$$set=u=>{"result"in u&&n(0,l=u.result),"download"in u&&n(1,r=u.download),"submit"in u&&n(2,s=u.submit),"error"in u&&n(3,i=u.error)},[l,r,s,i]}class Gn extends k{constructor(e){super(),$(this,e,zn,Vn,T,{result:0,download:1,submit:2,error:3})}}function Hn(t){let e,n,l,r,s,i,u,a,o,c,f,m,_;return r=new Fn({props:{template:t[1],handleTemplateInput:t[5]}}),i=new un({props:{error:t[2],onClick:t[10]}}),a=new tn({props:{fields:t[0].merge,handleFormInput:t[6],addField:t[8],removeField:t[9],error:t[2]}}),c=new mn({props:{sources:t[3],handleSourceFieldUpdate:t[11]}}),m=new Gn({props:{submit:t[7],download:t[4],result:t[0],error:t[2]}}),{c(){e=p("div"),n=p("section"),l=p("form"),I(r.$$.fragment),s=P(),I(i.$$.fragment),u=P(),I(a.$$.fragment),o=P(),I(c.$$.fragment),f=P(),I(m.$$.fragment),d(l,"class","svelte-r93edu"),d(n,"data-cy","form-container"),d(n,"class","max-w-lg my-4 mx-auto border rounded-xl px-7 py-4 svelte-r93edu"),d(e,"class","shotstack-mergefield-form svelte-r93edu")},m(h,b){S(h,e,b),g(e,n),g(n,l),E(r,l,null),g(l,s),E(i,l,null),g(l,u),E(a,l,null),g(l,o),E(c,l,null),g(n,f),E(m,n,null),_=!0},p(h,[b]){const C={};b&2&&(C.template=h[1]),r.$set(C);const M={};b&4&&(M.error=h[2]),i.$set(M);const U={};b&1&&(U.fields=h[0].merge),b&4&&(U.error=h[2]),a.$set(U);const G={};b&8&&(G.sources=h[3]),c.$set(G);const D={};b&16&&(D.download=h[4]),b&1&&(D.result=h[0]),b&4&&(D.error=h[2]),m.$set(D)},i(h){_||(w(r.$$.fragment,h),w(i.$$.fragment,h),w(a.$$.fragment,h),w(c.$$.fragment,h),w(m.$$.fragment,h),_=!0)},o(h){y(r.$$.fragment,h),y(i.$$.fragment,h),y(a.$$.fragment,h),y(c.$$.fragment,h),y(m.$$.fragment,h),_=!1},d(h){h&&F(e),O(r),O(i),O(a),O(c),O(m)}}}function Xn(t){if(typeof window<"u"){const e=new Blob([JSON.stringify(t,null,2)],{type:"text/plain"});return URL.createObjectURL(e)}else return null}function Yn(t,e,n){let l,{editTemplateService:r=new Ue(Be)}=e,s=r.template,i=r.result,u=null,a=r.getSrcPlaceholders();function o(C){r.setTemplateSource(C),n(1,s=r.template),n(0,i=r.result),n(2,u=r.error),n(3,a=r.getSrcPlaceholders())}function c(C,M){r.updateResultMergeFields(C,M),n(0,i=r.result)}function f(){r.submit(),window.alert("Form successfully submitted!")}function m(C){r.addMergeField(C),n(1,s=r.template),n(0,i=r.result),n(2,u=r.error)}function _(C){const M=r.getMergeFieldItem(C);r.removeMergeField(M),n(1,s=r.template),n(0,i=r.result),n(2,u=r.error)}function h(){r.setTemplateSource(r.result),n(1,s=r.template),n(0,i=r.result),n(2,u=r.error)}async function b(C,M){await r.updateSrc(C,M),n(1,s=r.template),n(0,i=r.result)}return t.$$set=C=>{"editTemplateService"in C&&n(12,r=C.editTemplateService)},t.$$.update=()=>{t.$$.dirty&1&&n(4,l=Xn(i)||"")},[i,s,u,a,l,o,c,f,m,_,h,b,r]}class Kn extends k{constructor(e){super(),$(this,e,Yn,Hn,T,{editTemplateService:12})}}class Qn{constructor(e){this.templateService=new Ue(e),this.container=void 0}on(e,n){this.templateService.on(e,n)}off(e,n){this.templateService.off(e,n)}submit(){this.templateService.submit()}renderForm(e){this.container=e,new Kn({target:e,props:{editTemplateService:this.templateService}})}renderElements(e,n){const l=this.getInputs();n?n.after(...l):e.append(...l)}display(){this.container&&(this.container.style.display="block")}hide(){this.container&&(this.container.style.display="none")}attach(e){this.remove(),this.container=e,this.renderForm(this.container)}remove(){this.container&&this.container.replaceChildren()}merge(){return this.templateService.result}load(e){this.templateService.setTemplateSource(e)}addField(e,n){this.templateService.addMergeField({find:e,replace:n})}removeField(e){this.templateService.removeMergeField(e)}getField(e){return this.templateService.getMergeFieldItem(e)}getInputs(){const e=document.createElement("div");return this.renderMergeFields(e),this.renderSourceFields(e),e.children}renderMergeFields(e){this.templateService.template.merge.forEach(n=>new Je({target:e,props:{field:n,handleFormInput:l=>{this.templateService.updateResultMergeFields(l,n)}}}))}renderSourceFields(e){this.templateService.getSrcPlaceholders().forEach(n=>new qe({target:e,props:{value:n.asset.src,asset:n.asset,label:n.placeholder,handleChange:async l=>{await this.templateService.updateSrc(l,n.asset)}}}))}}const Wn=new Qn(Be),Pe=document.querySelector("#app");Pe&&Wn.renderForm(Pe);
