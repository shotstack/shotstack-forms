var Shotstack=function(){"use strict";var rn=Object.defineProperty;var ln=(T,H,q)=>H in T?rn(T,H,{enumerable:!0,configurable:!0,writable:!0,value:q}):T[H]=q;var te=(T,H,q)=>(ln(T,typeof H!="symbol"?H+"":H,q),q);function T(){}function H(t){return t()}function q(){return Object.create(null)}function X(t){t.forEach(H)}function se(t){return typeof t=="function"}function F(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let oe;function Pe(t,e){return oe||(oe=document.createElement("a")),oe.href=e,t===oe.href}function He(t){return Object.keys(t).length===0}function Qe(t,...e){if(t==null)return T;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Ne(t,e,n){t.$$.on_destroy.push(Qe(e,n))}let ue=!1;function Je(){ue=!0}function Ge(){ue=!1}function qe(t,e,n,i){for(;t<e;){const r=t+(e-t>>1);n(r)<=i?t=r+1:e=r}return t}function Ze(t){if(t.hydrate_init)return;t.hydrate_init=!0;let e=t.childNodes;if(t.nodeName==="HEAD"){const u=[];for(let a=0;a<e.length;a++){const c=e[a];c.claim_order!==void 0&&u.push(c)}e=u}const n=new Int32Array(e.length+1),i=new Int32Array(e.length);n[0]=-1;let r=0;for(let u=0;u<e.length;u++){const a=e[u].claim_order,c=(r>0&&e[n[r]].claim_order<=a?r+1:qe(1,r,M=>e[n[M]].claim_order,a))-1;i[u]=n[c]+1;const f=c+1;n[f]=u,r=Math.max(f,r)}const s=[],l=[];let o=e.length-1;for(let u=n[r]+1;u!=0;u=i[u-1]){for(s.push(e[u-1]);o>=u;o--)l.push(e[o]);o--}for(;o>=0;o--)l.push(e[o]);s.reverse(),l.sort((u,a)=>u.claim_order-a.claim_order);for(let u=0,a=0;u<l.length;u++){for(;a<s.length&&l[u].claim_order>=s[a].claim_order;)a++;const c=a<s.length?s[a]:null;t.insertBefore(l[u],c)}}function p(t,e){if(ue){for(Ze(t),(t.actual_end_child===void 0||t.actual_end_child!==null&&t.actual_end_child.parentNode!==t)&&(t.actual_end_child=t.firstChild);t.actual_end_child!==null&&t.actual_end_child.claim_order===void 0;)t.actual_end_child=t.actual_end_child.nextSibling;e!==t.actual_end_child?(e.claim_order!==void 0||e.parentNode!==t)&&t.insertBefore(e,t.actual_end_child):t.actual_end_child=e.nextSibling}else(e.parentNode!==t||e.nextSibling!==null)&&t.appendChild(e)}function x(t,e,n){ue&&!n?p(t,e):(e.parentNode!==t||e.nextSibling!=n)&&t.insertBefore(e,n||null)}function _(t){t.parentNode.removeChild(t)}function We(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function w(t){return document.createElement(t)}function ne(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function k(t){return document.createTextNode(t)}function S(){return k(" ")}function J(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function _e(t){return function(e){return e.preventDefault(),t.call(this,e)}}function h(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function y(t){return Array.from(t.childNodes)}function Xe(t){t.claim_info===void 0&&(t.claim_info={last_index:0,total_claimed:0})}function Te(t,e,n,i,r=!1){Xe(t);const s=(()=>{for(let l=t.claim_info.last_index;l<t.length;l++){const o=t[l];if(e(o)){const u=n(o);return u===void 0?t.splice(l,1):t[l]=u,r||(t.claim_info.last_index=l),o}}for(let l=t.claim_info.last_index-1;l>=0;l--){const o=t[l];if(e(o)){const u=n(o);return u===void 0?t.splice(l,1):t[l]=u,r?u===void 0&&t.claim_info.last_index--:t.claim_info.last_index=l,o}}return i()})();return s.claim_order=t.claim_info.total_claimed,t.claim_info.total_claimed+=1,s}function De(t,e,n,i){return Te(t,r=>r.nodeName===e,r=>{const s=[];for(let l=0;l<r.attributes.length;l++){const o=r.attributes[l];n[o.name]||s.push(o.name)}s.forEach(l=>r.removeAttribute(l))},()=>i(e))}function E(t,e,n){return De(t,e,n,w)}function ae(t,e,n){return De(t,e,n,ne)}function Y(t,e){return Te(t,n=>n.nodeType===3,n=>{const i=""+e;if(n.data.startsWith(i)){if(n.data.length!==i.length)return n.splitText(i.length)}else n.data=i},()=>k(e),!0)}function A(t){return Y(t," ")}function ve(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function $e(t,e){t.value=e==null?"":e}function ce(t,e,n){t.classList[n?"add":"remove"](e)}let be;function re(t){be=t}const ie=[],fe=[],de=[],ye=[],Ke=Promise.resolve();let we=!1;function et(){we||(we=!0,Ke.then(Ae))}function Ee(t){de.push(t)}function Se(t){ye.push(t)}const Me=new Set;let he=0;function Ae(){const t=be;do{for(;he<ie.length;){const e=ie[he];he++,re(e),tt(e.$$)}for(re(null),ie.length=0,he=0;fe.length;)fe.pop()();for(let e=0;e<de.length;e+=1){const n=de[e];Me.has(n)||(Me.add(n),n())}de.length=0}while(ie.length);for(;ye.length;)ye.pop()();we=!1,Me.clear(),re(t)}function tt(t){if(t.fragment!==null){t.update(),X(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ee)}}const me=new Set;let Z;function Ce(){Z={r:0,c:[],p:Z}}function je(){Z.r||X(Z.c),Z=Z.p}function $(t,e){t&&t.i&&(me.delete(t),t.i(e))}function j(t,e,n,i){if(t&&t.o){if(me.has(t))return;me.add(t),Z.c.push(()=>{me.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}function xe(t,e,n){const i=t.$$.props[e];i!==void 0&&(t.$$.bound[i]=n,n(t.$$.ctx[i]))}function R(t){t&&t.c()}function B(t,e){t&&t.l(e)}function L(t,e,n,i){const{fragment:r,on_mount:s,on_destroy:l,after_update:o}=t.$$;r&&r.m(e,n),i||Ee(()=>{const u=s.map(H).filter(se);l?l.push(...u):X(u),t.$$.on_mount=[]}),o.forEach(Ee)}function O(t,e){const n=t.$$;n.fragment!==null&&(X(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function nt(t,e){t.$$.dirty[0]===-1&&(ie.push(t),et(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function U(t,e,n,i,r,s,l,o=[-1]){const u=be;re(t);const a=t.$$={fragment:null,ctx:null,props:s,update:T,not_equal:r,bound:q(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:q(),dirty:o,skip_bound:!1,root:e.target||u.$$.root};l&&l(a.root);let c=!1;if(a.ctx=n?n(t,e.props||{},(f,M,...d)=>{const m=d.length?d[0]:M;return a.ctx&&r(a.ctx[f],a.ctx[f]=m)&&(!a.skip_bound&&a.bound[f]&&a.bound[f](m),c&&nt(t,f)),M}):[],a.update(),c=!0,X(a.before_update),a.fragment=i?i(a.ctx):!1,e.target){if(e.hydrate){Je();const f=y(e.target);a.fragment&&a.fragment.l(f),f.forEach(_)}else a.fragment&&a.fragment.c();e.intro&&$(t.$$.fragment),L(t,e.target,e.anchor,e.customElement),Ge(),Ae()}re(u)}class V{$destroy(){O(this,1),this.$destroy=T}$on(e,n){const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!He(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const sn="",on="",rt="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MS4yIDUxLjIiIHdpZHRoPSI1MS4yIiBoZWlnaHQ9IjUxLjIiID4KICAgIDxzdmcgd2lkdGg9IjUxLjIiIGhlaWdodD0iNTEuMiIgdmlld0JveD0iMCAwIDUxMiA1MTIiPgogICAgICAgIDxwYXRoCiAgICAgICAgICAgIGQ9Ik01MDIuNiA3MC42M2wtNjEuMjUtNjEuMjVDNDM1LjQgMy4zNzEgNDI3LjIgMCA0MTguNyAwSDI1NS4xYy0zNS4zNSAwLTY0IDI4LjY2LTY0IDY0bC4wMTk1IDI1NkMxOTIgMzU1LjQgMjIwLjcgMzg0IDI1NiAzODRoMTkyYzM1LjIgMCA2NC0yOC44IDY0LTY0VjkzLjI1QzUxMiA4NC43NyA1MDguNiA3Ni42MyA1MDIuNiA3MC42M3pNNDY0IDMyMGMwIDguODM2LTcuMTY0IDE2LTE2IDE2SDI1NS4xYy04LjgzOCAwLTE2LTcuMTY0LTE2LTE2TDIzOS4xIDY0LjEzYzAtOC44MzYgNy4xNjQtMTYgMTYtMTZoMTI4TDM4NCA5NmMwIDE3LjY3IDE0LjMzIDMyIDMyIDMyaDQ3LjFWMzIwek0yNzIgNDQ4YzAgOC44MzYtNy4xNjQgMTYtMTYgMTZINjMuMWMtOC44MzggMC0xNi03LjE2NC0xNi0xNkw0Ny45OCAxOTIuMWMwLTguODM2IDcuMTY0LTE2IDE2LTE2SDE2MFYxMjhINjMuOTljLTM1LjM1IDAtNjQgMjguNjUtNjQgNjRsLjAwOTggMjU2Qy4wMDIgNDgzLjMgMjguNjYgNTEyIDY0IDUxMmgxOTJjMzUuMiAwIDY0LTI4LjggNjQtNjR2LTMyaC00Ny4xTDI3MiA0NDh6IiAvPgogICAgPC9zdmc+Cjwvc3ZnPg==",it="A 'merge' property is required",lt="Property 'merge' must be an array",st="A 'find' property is required on every element inside 'merge'",ot="Every 'find' property inside 'merge' must be of type string",ut="Every 'find' property inside 'merge' must be a string of length equal to or higher than one",at="A 'replace' property is required on every element inside 'merge'",ct="Unexpected error while parsing template JSON",ft="Every element inside the 'merge' should be an object";class G extends Error{constructor(e){super(e)}}function dt(t){return typeof t=="object"}function ge(t,e){return t in e}function Ie(t,e){return!ge(t,e)}function ht(t,e){return ge(t,e)&&!(e[t]instanceof Array)}function mt(t,e){return ge(t,e)&&typeof e[t]!="string"}function gt(t,e){const n=ge(t,e)&&e[t];return!(typeof n=="string"&&n.length>0)}function pt(t){try{const e=JSON.parse(t);if(Ie("merge",e))throw new G(it);if(ht("merge",e))throw new G(lt);const{merge:n}=e,i=_t(n);return{...e,merge:i}}catch(e){throw Fe(e)}}function _t(t){return t.map(n=>{if(!dt(n))throw new G(ft);if(Ie("find",n))throw new G(st);if(Ie("replace",n))throw new G(at);if(mt("find",n))throw new G(ot);if(gt("find",n))throw new G(ut);return n}).map(({find:n,replace:i})=>({find:n,replace:ke(i)}))}function vt(t){return typeof t=="object"&&t!==null&&"message"in t}function Fe(t){return t instanceof Error?t:vt(t)?new G(t.message):new G(ct)}function ke(t){return typeof t=="string"?t:JSON.stringify(t)}class Le{constructor(e){te(this,"template");te(this,"_result");te(this,"_error");te(this,"handlers");this._error=null,this.template={merge:[]},this._result={merge:[]},this.handlers={change:[],submit:[],error:[this.logger]},this.setTemplateSource(e)}set error(e){const n=this._error&&{...this._error}||null;this._error=e,e!==null&&this.handlers.error.forEach(i=>i(e,n))}get error(){return this._error}set result(e){const n={...this._result};this._result=e,this.handlers.change.forEach(i=>i(e,n))}get result(){return this._result}on(e,n){this.handlers[e].push(n)}off(e,n){this.handlers={...this.handlers,[e]:this.handlers[e].filter(i=>i!==n)}}submit(){if(this.error)throw this.error;this.handlers.submit.forEach(e=>e(this.result))}setTemplateSource(e){try{const n=pt(ke(e));this.template=n,this.result=n,this.error=null}catch(n){const i=Fe(n);this.error=i}}updateResultMergeFields(e,n){const i=n||this.getMergeFieldItem({find:e.find}),r=this.result.merge.map(s=>s===i?e:s);return this.result={...this.result,merge:r},r}logger(e){console.error(e)}addMergeField(e){this.setTemplateSource({...this.result,merge:[...this.result.merge,e]})}removeMergeField(e){this.setTemplateSource({...this.result,merge:this.result.merge.filter(n=>n!==e)})}getMergeFieldItem(e){if(Object.keys(e).length===0)return;const n=function(i){let r;for(r in e)if(i[r]!==e[r])return!1;return!0};return this.result.merge.find(n)}}const bt={merge:[{find:"NAME",replace:"world"}],timeline:{tracks:[{clips:[{asset:{type:"title",text:"Hello {{ NAME }}",style:"future"},start:0,length:5}]}]},output:{format:"mp4",resolution:"hd"}};function yt(t){let e,n;return{c(){e=ne("svg"),n=ne("path"),this.h()},l(i){e=ae(i,"svg",{class:!0,xmlns:!0,viewBox:!0});var r=y(e);n=ae(r,"path",{d:!0}),y(n).forEach(_),r.forEach(_),this.h()},h(){h(n,"d","M13 8V2H7v6H2l8 8 8-8h-5zM0 18h20v2H0v-2z"),h(e,"class","fill-current w-4 h-4 mr-2"),h(e,"xmlns","http://www.w3.org/2000/svg"),h(e,"viewBox","0 0 20 20")},m(i,r){x(i,e,r),p(e,n)},p:T,i:T,o:T,d(i){i&&_(e)}}}function wt(t){return[]}class Et extends V{constructor(e){super(),U(this,e,wt,yt,F,{})}}function Mt(t){let e,n,i,r;return n=new Et({}),{c(){e=w("a"),R(n.$$.fragment),i=k(`
	Download`),this.h()},l(s){e=E(s,"A",{href:!0,download:!0,class:!0});var l=y(e);B(n.$$.fragment,l),i=Y(l,`
	Download`),l.forEach(_),this.h()},h(){h(e,"href",t[0]),h(e,"download","result.json"),h(e,"class","bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded inline-flex items-center w-40 justify-center")},m(s,l){x(s,e,l),L(n,e,null),p(e,i),r=!0},p(s,[l]){(!r||l&1)&&h(e,"href",s[0])},i(s){r||($(n.$$.fragment,s),r=!0)},o(s){j(n.$$.fragment,s),r=!1},d(s){s&&_(e),O(n)}}}function It(t,e,n){let{download:i=""}=e;return t.$$set=r=>{"download"in r&&n(0,i=r.download)},[i]}class Nt extends V{constructor(e){super(),U(this,e,It,Mt,F,{download:0})}}function Tt(t){let e,n,i,r;return{c(){e=w("button"),n=k("Submit"),this.h()},l(s){e=E(s,"BUTTON",{class:!0});var l=y(e);n=Y(l,"Submit"),l.forEach(_),this.h()},h(){h(e,"class","bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded w-40")},m(s,l){x(s,e,l),p(e,n),i||(r=J(e,"click",function(){se(t[0])&&t[0].apply(this,arguments)}),i=!0)},p(s,[l]){t=s},i:T,o:T,d(s){s&&_(e),i=!1,r()}}}function Dt(t,e,n){let{submit:i}=e;return t.$$set=r=>{"submit"in r&&n(0,i=r.submit)},[i]}class $t extends V{constructor(e){super(),U(this,e,Dt,Tt,F,{submit:0})}}function St(t){let e,n,i,r,s;return n=new Nt({props:{download:t[0]}}),r=new $t({props:{submit:t[1]}}),{c(){e=w("div"),R(n.$$.fragment),i=S(),R(r.$$.fragment),this.h()},l(l){e=E(l,"DIV",{class:!0});var o=y(e);B(n.$$.fragment,o),i=A(o),B(r.$$.fragment,o),o.forEach(_),this.h()},h(){h(e,"class","flex justify-between pt-4")},m(l,o){x(l,e,o),L(n,e,null),p(e,i),L(r,e,null),s=!0},p(l,[o]){const u={};o&1&&(u.download=l[0]),n.$set(u);const a={};o&2&&(a.submit=l[1]),r.$set(a)},i(l){s||($(n.$$.fragment,l),$(r.$$.fragment,l),s=!0)},o(l){j(n.$$.fragment,l),j(r.$$.fragment,l),s=!1},d(l){l&&_(e),O(n),O(r)}}}function At(t,e,n){let{download:i=""}=e,{submit:r}=e;return t.$$set=s=>{"download"in s&&n(0,i=s.download),"submit"in s&&n(1,r=s.submit)},[i,r]}class Ct extends V{constructor(e){super(),U(this,e,At,St,F,{download:0,submit:1})}}const K=[];function Oe(t,e=T){let n;const i=new Set;function r(o){if(F(t,o)&&(t=o,n)){const u=!K.length;for(const a of i)a[1](),K.push(a,t);if(u){for(let a=0;a<K.length;a+=2)K[a][0](K[a+1]);K.length=0}}}function s(o){r(o(t))}function l(o,u=T){const a=[o,u];return i.add(a),i.size===1&&(n=e(r)||T),o(t),()=>{i.delete(a),i.size===0&&(n(),n=null)}}return{set:r,update:s,subscribe:l}}function jt(t){let e,n,i;return{c(){e=w("input"),this.h()},l(r){e=E(r,"INPUT",{class:!0,type:!0}),this.h()},h(){h(e,"class","border w-full mb-3 pl-2 py-1 text-stone-500"),h(e,"type","text")},m(r,s){x(r,e,s),$e(e,t[0]),n||(i=[J(e,"input",t[2]),J(e,"focus",t[3],{once:!0})],n=!0)},p(r,[s]){s&1&&e.value!==r[0]&&$e(e,r[0])},i:T,o:T,d(r){r&&_(e),n=!1,X(i)}}}function xt(t,e,n){let{value:i}=e,{onFocus:r}=e;function s(){i=this.value,n(0,i)}const l=o=>r(o.currentTarget);return t.$$set=o=>{"value"in o&&n(0,i=o.value),"onFocus"in o&&n(1,r=o.onFocus)},[i,r,s,l]}class ze extends V{constructor(e){super(),U(this,e,xt,jt,F,{value:0,onFocus:1})}}function Ft(t){let e,n,i,r,s,l,o,u,a,c,f,M,d,m,N,v,b,g;function I(D){t[7](D)}let C={onFocus:t[6]};t[1]!==void 0&&(C.value=t[1]),o=new ze({props:C}),fe.push(()=>xe(o,"value",I));function P(D){t[9](D)}let z={onFocus:t[8]};return t[2]!==void 0&&(z.value=t[2]),c=new ze({props:z}),fe.push(()=>xe(c,"value",P)),{c(){e=w("div"),n=w("div"),i=w("h1"),r=k("Add a new merge field"),s=S(),l=w("div"),R(o.$$.fragment),a=S(),R(c.$$.fragment),M=S(),d=w("div"),m=w("button"),N=k("Add"),this.h()},l(D){e=E(D,"DIV",{});var Q=y(e);n=E(Q,"DIV",{});var W=y(n);i=E(W,"H1",{class:!0});var le=y(i);r=Y(le,"Add a new merge field"),le.forEach(_),s=A(W),l=E(W,"DIV",{class:!0});var ee=y(l);B(o.$$.fragment,ee),a=A(ee),B(c.$$.fragment,ee),M=A(ee),d=E(ee,"DIV",{class:!0});var Ue=y(d);m=E(Ue,"BUTTON",{class:!0});var Ve=y(m);N=Y(Ve,"Add"),Ve.forEach(_),Ue.forEach(_),ee.forEach(_),W.forEach(_),Q.forEach(_),this.h()},h(){h(i,"class","text-teal-400 px-1"),h(m,"class","bg-blue-500 hover:bg-blue-700 text-white font-bold py-1 px-3 rounded align-self-end"),h(d,"class","flex flex-row-reverse"),h(l,"class","border p-4 mb-6")},m(D,Q){x(D,e,Q),p(e,n),p(n,i),p(i,r),p(n,s),p(n,l),L(o,l,null),p(l,a),L(c,l,null),p(l,M),p(l,d),p(d,m),p(m,N),v=!0,b||(g=J(m,"click",_e(t[10])),b=!0)},p(D,[Q]){const W={};!u&&Q&2&&(u=!0,W.value=D[1],Se(()=>u=!1)),o.$set(W);const le={};!f&&Q&4&&(f=!0,le.value=D[2],Se(()=>f=!1)),c.$set(le)},i(D){v||($(o.$$.fragment,D),$(c.$$.fragment,D),v=!0)},o(D){j(o.$$.fragment,D),j(c.$$.fragment,D),v=!1},d(D){D&&_(e),O(o),O(c),b=!1,g()}}}function kt(t,e,n){let i,r,s=Oe("find");Ne(t,s,m=>n(1,i=m));let l=Oe("replace");Ne(t,l,m=>n(2,r=m));let o=m=>m.set(""),{addField:u}=e;const a=()=>o(s);function c(m){i=m,s.set(i)}const f=()=>o(l);function M(m){r=m,l.set(r)}const d=()=>u({find:i,replace:r});return t.$$set=m=>{"addField"in m&&n(0,u=m.addField)},[u,i,r,s,l,o,a,c,f,M,d]}class Lt extends V{constructor(e){super(),U(this,e,kt,Ft,F,{addField:0})}}function Ot(t){let e,n;return{c(){e=ne("svg"),n=ne("path"),this.h()},l(i){e=ae(i,"svg",{xmlns:!0,viewBox:!0});var r=y(e);n=ae(r,"path",{fill:!0,d:!0}),y(n).forEach(_),r.forEach(_),this.h()},h(){h(n,"fill","white"),h(n,"d","M.293.293a1 1 0 011.414 0L8 6.586 14.293.293a1 1 0 111.414 1.414L9.414 8l6.293 6.293a1 1 0 01-1.414 1.414L8 9.414l-6.293 6.293a1 1 0 01-1.414-1.414L6.586 8 .293 1.707a1 1 0 010-1.414z"),h(e,"xmlns","http://www.w3.org/2000/svg"),h(e,"viewBox","0 0 16 16")},m(i,r){x(i,e,r),p(e,n)},p:T,i:T,o:T,d(i){i&&_(e)}}}function zt(t){return[]}class Yt extends V{constructor(e){super(),U(this,e,zt,Ot,F,{})}}function Rt(t){let e,n,i,r,s;return n=new Yt({}),{c(){e=w("button"),R(n.$$.fragment),this.h()},l(l){e=E(l,"BUTTON",{class:!0});var o=y(e);B(n.$$.fragment,o),o.forEach(_),this.h()},h(){h(e,"class","bg-blue-400 hover:bg-blue-700 text-white font-bold absolute top-0 right-0 rounded-full w-4 h-4 p-1")},m(l,o){x(l,e,o),L(n,e,null),i=!0,r||(s=J(e,"click",_e(function(){se(t[0])&&t[0].apply(this,arguments)})),r=!0)},p(l,[o]){t=l},i(l){i||($(n.$$.fragment,l),i=!0)},o(l){j(n.$$.fragment,l),i=!1},d(l){l&&_(e),O(n),r=!1,s()}}}function Bt(t,e,n){let{onClick:i}=e;return t.$$set=r=>{"onClick"in r&&n(0,i=r.onClick)},[i]}class Ut extends V{constructor(e){super(),U(this,e,Bt,Rt,F,{onClick:0})}}function Ye(t,e,n){const i=t.slice();return i[7]=e[n],i}function Re(t){let e,n,i=t[7].find+"",r,s,l,o,u,a,c,f,M,d,m;function N(...b){return t[5](t[7],...b)}function v(){return t[6](t[7])}return c=new Ut({props:{onClick:v}}),{c(){e=w("div"),n=w("label"),r=k(i),l=S(),o=w("input"),a=S(),R(c.$$.fragment),f=S(),this.h()},l(b){e=E(b,"DIV",{"data-cy":!0,class:!0});var g=y(e);n=E(g,"LABEL",{for:!0,class:!0});var I=y(n);r=Y(I,i),I.forEach(_),l=A(g),o=E(g,"INPUT",{role:!0,class:!0,type:!0}),a=A(g),B(c.$$.fragment,g),f=A(g),g.forEach(_),this.h()},h(){h(n,"for",s=t[7].find),h(n,"class","block mb-2 monospace"),h(o,"role","textbox"),h(o,"class","border w-full mb-3 pl-2 py-1 text-stone-500"),h(o,"type","text"),o.value=u=t[7].replace,h(e,"data-cy","label-input"),h(e,"class","relative")},m(b,g){x(b,e,g),p(e,n),p(n,r),p(e,l),p(e,o),p(e,a),L(c,e,null),p(e,f),M=!0,d||(m=J(o,"input",N),d=!0)},p(b,g){t=b,(!M||g&2)&&i!==(i=t[7].find+"")&&ve(r,i),(!M||g&2&&s!==(s=t[7].find))&&h(n,"for",s),(!M||g&2&&u!==(u=t[7].replace)&&o.value!==u)&&(o.value=u);const I={};g&18&&(I.onClick=v),c.$set(I)},i(b){M||($(c.$$.fragment,b),M=!0)},o(b){j(c.$$.fragment,b),M=!1},d(b){b&&_(e),O(c),d=!1,m()}}}function Vt(t){let e,n,i,r,s,l,o,u,a,c=t[1],f=[];for(let d=0;d<c.length;d+=1)f[d]=Re(Ye(t,c,d));const M=d=>j(f[d],1,1,()=>{f[d]=null});return u=new Lt({props:{addField:t[3]}}),{c(){e=w("div"),n=w("div"),i=w("h1"),r=k("Modify Merge Values"),s=S(),l=w("div");for(let d=0;d<f.length;d+=1)f[d].c();o=S(),R(u.$$.fragment),this.h()},l(d){e=E(d,"DIV",{});var m=y(e);n=E(m,"DIV",{"data-cy":!0});var N=y(n);i=E(N,"H1",{class:!0});var v=y(i);r=Y(v,"Modify Merge Values"),v.forEach(_),s=A(N),l=E(N,"DIV",{class:!0});var b=y(l);for(let g=0;g<f.length;g+=1)f[g].l(b);b.forEach(_),N.forEach(_),o=A(m),B(u.$$.fragment,m),m.forEach(_),this.h()},h(){h(i,"class","text-teal-400 px-1"),h(l,"class","border p-4 mb-6"),h(n,"data-cy","merge-fields-input-section"),ce(e,"hidden",t[0])},m(d,m){x(d,e,m),p(e,n),p(n,i),p(i,r),p(n,s),p(n,l);for(let N=0;N<f.length;N+=1)f[N].m(l,null);p(e,o),L(u,e,null),a=!0},p(d,[m]){if(m&22){c=d[1];let v;for(v=0;v<c.length;v+=1){const b=Ye(d,c,v);f[v]?(f[v].p(b,m),$(f[v],1)):(f[v]=Re(b),f[v].c(),$(f[v],1),f[v].m(l,null))}for(Ce(),v=c.length;v<f.length;v+=1)M(v);je()}const N={};m&8&&(N.addField=d[3]),u.$set(N),(!a||m&1)&&ce(e,"hidden",d[0])},i(d){if(!a){for(let m=0;m<c.length;m+=1)$(f[m]);$(u.$$.fragment,d),a=!0}},o(d){f=f.filter(Boolean);for(let m=0;m<f.length;m+=1)j(f[m]);j(u.$$.fragment,d),a=!1},d(d){d&&_(e),We(f,d),O(u)}}}function Pt(t,e,n){let{error:i}=e,{fields:r=[]}=e,{handleFormInput:s}=e,{addField:l}=e,{removeField:o}=e;const u=(c,f)=>s({find:c.find,replace:f.currentTarget.value},c),a=c=>o(c);return t.$$set=c=>{"error"in c&&n(0,i=c.error),"fields"in c&&n(1,r=c.fields),"handleFormInput"in c&&n(2,s=c.handleFormInput),"addField"in c&&n(3,l=c.addField),"removeField"in c&&n(4,o=c.removeField)},[i,r,s,l,o,u,a]}class Ht extends V{constructor(e){super(),U(this,e,Pt,Vt,F,{error:0,fields:1,handleFormInput:2,addField:3,removeField:4})}}function Qt(t){let e,n,i,r;return{c(){e=w("button"),n=k("Reset"),this.h()},l(s){e=E(s,"BUTTON",{class:!0});var l=y(e);n=Y(l,"Reset"),l.forEach(_),this.h()},h(){h(e,"class","bg-blue-500 hover:bg-blue-700 text-white font-bold py-1 px-3 rounded align-self-end")},m(s,l){x(s,e,l),p(e,n),i||(r=J(e,"click",_e(function(){se(t[0])&&t[0].apply(this,arguments)})),i=!0)},p(s,[l]){t=s},i:T,o:T,d(s){s&&_(e),i=!1,r()}}}function Jt(t,e,n){let{onClick:i}=e;return t.$$set=r=>{"onClick"in r&&n(0,i=r.onClick)},[i]}class Gt extends V{constructor(e){super(),U(this,e,Jt,Qt,F,{onClick:0})}}function qt(t){let e,n,i,r,s,l,o,u;return o=new Gt({props:{onClick:t[0]}}),{c(){e=w("div"),n=w("p"),i=w("span"),r=k(t[2]),s=S(),l=w("div"),R(o.$$.fragment),this.h()},l(a){e=E(a,"DIV",{});var c=y(e);n=E(c,"P",{"data-cy":!0,class:!0});var f=y(n);i=E(f,"SPAN",{class:!0});var M=y(i);r=Y(M,t[2]),M.forEach(_),f.forEach(_),s=A(c),l=E(c,"DIV",{class:!0});var d=y(l);B(o.$$.fragment,d),d.forEach(_),c.forEach(_),this.h()},h(){h(i,"class","monospace text-orange-900"),h(n,"data-cy","template-input-error"),h(n,"class","bg-rose-200 rounded py-2 my-4 px-4"),h(l,"class","flex flex-row-reverse "),ce(e,"hidden",!t[1])},m(a,c){x(a,e,c),p(e,n),p(n,i),p(i,r),p(e,s),p(e,l),L(o,l,null),u=!0},p(a,[c]){(!u||c&4)&&ve(r,a[2]);const f={};c&1&&(f.onClick=a[0]),o.$set(f),(!u||c&2)&&ce(e,"hidden",!a[1])},i(a){u||($(o.$$.fragment,a),u=!0)},o(a){j(o.$$.fragment,a),u=!1},d(a){a&&_(e),O(o)}}}function Zt(t,e,n){let i,{onClick:r}=e,{error:s}=e;return t.$$set=l=>{"onClick"in l&&n(0,r=l.onClick),"error"in l&&n(1,s=l.error)},t.$$.update=()=>{t.$$.dirty&2&&n(2,i=s&&s.message||"")},[r,s,i]}class Wt extends V{constructor(e){super(),U(this,e,Zt,qt,F,{onClick:0,error:1})}}const fn="";function Be(t){let e,n,i,r,s,l,o,u,a,c=pe(t[0])+"",f,M,d,m,N,v;return d=new Ct({props:{submit:t[7],download:t[3]}}),{c(){e=w("div"),n=w("h1"),i=k("Result"),r=S(),s=w("abbr"),l=w("img"),u=S(),a=w("p"),f=k(c),M=S(),R(d.$$.fragment),this.h()},l(b){e=E(b,"DIV",{"data-cy":!0,class:!0});var g=y(e);n=E(g,"H1",{class:!0});var I=y(n);i=Y(I,"Result"),I.forEach(_),r=A(g),s=E(g,"ABBR",{title:!0,class:!0});var C=y(s);l=E(C,"IMG",{src:!0,alt:!0,class:!0}),C.forEach(_),u=A(g),a=E(g,"P",{"data-cy":!0,class:!0});var P=y(a);f=Y(P,c),P.forEach(_),M=A(g),B(d.$$.fragment,g),g.forEach(_),this.h()},h(){h(n,"class","text-teal-400 px-1 inline-block mr-2 svelte-r93edu"),Pe(l.src,o=rt)||h(l,"src",o),h(l,"alt","copy-button"),h(l,"class","h-4 cursor-pointer inline mb-1 svelte-r93edu"),h(s,"title","Copy to clipboard"),h(s,"class","svelte-r93edu"),h(a,"data-cy","result"),h(a,"class","h-60 overflow-auto border p-4 whitespace-pre monospace svelte-r93edu"),h(e,"data-cy","result-section"),h(e,"class","svelte-r93edu")},m(b,g){x(b,e,g),p(e,n),p(n,i),p(e,r),p(e,s),p(s,l),p(e,u),p(e,a),p(a,f),p(e,M),L(d,e,null),m=!0,N||(v=J(l,"click",t[6]),N=!0)},p(b,g){(!m||g&1)&&c!==(c=pe(b[0])+"")&&ve(f,c);const I={};g&8&&(I.download=b[3]),d.$set(I)},i(b){m||($(d.$$.fragment,b),m=!0)},o(b){j(d.$$.fragment,b),m=!1},d(b){b&&_(e),O(d),N=!1,v()}}}function Xt(t){let e,n,i,r,s,l,o,u,a,c,f,M,d,m,N,v,b;f=new Wt({props:{error:t[2],onClick:t[10]}}),d=new Ht({props:{fields:t[0].merge,handleFormInput:t[5],addField:t[8],removeField:t[9],error:t[2]}});let g=!t[2]&&Be(t);return{c(){e=w("div"),n=w("section"),i=w("form"),r=w("div"),s=w("label"),l=k("Paste template"),o=S(),u=w("textarea"),c=S(),R(f.$$.fragment),M=S(),R(d.$$.fragment),m=S(),g&&g.c(),this.h()},l(I){e=E(I,"DIV",{class:!0});var C=y(e);n=E(C,"SECTION",{"data-cy":!0,class:!0});var P=y(n);i=E(P,"FORM",{class:!0});var z=y(i);r=E(z,"DIV",{"data-cy":!0,class:!0});var D=y(r);s=E(D,"LABEL",{for:!0,class:!0});var Q=y(s);l=Y(Q,"Paste template"),Q.forEach(_),o=A(D),u=E(D,"TEXTAREA",{"data-cy":!0,class:!0,id:!0}),y(u).forEach(_),D.forEach(_),c=A(z),B(f.$$.fragment,z),M=A(z),B(d.$$.fragment,z),z.forEach(_),m=A(P),g&&g.l(P),P.forEach(_),C.forEach(_),this.h()},h(){h(s,"for","json-input"),h(s,"class","text-teal-400 px-1 svelte-r93edu"),h(u,"data-cy","template-input"),h(u,"class","w-full h-60 monospace border p-4 overflow-auto whitespace-pre resize-none svelte-r93edu"),h(u,"id","json-input"),u.value=a=pe(t[1]),h(r,"data-cy","template-input-section"),h(r,"class","mb-6 svelte-r93edu"),h(i,"class","svelte-r93edu"),h(n,"data-cy","form-container"),h(n,"class","max-w-lg my-4 mx-auto border rounded-xl px-7 py-4 svelte-r93edu"),h(e,"class","shotstack-mergefield-form svelte-r93edu")},m(I,C){x(I,e,C),p(e,n),p(n,i),p(i,r),p(r,s),p(s,l),p(r,o),p(r,u),p(i,c),L(f,i,null),p(i,M),L(d,i,null),p(n,m),g&&g.m(n,null),N=!0,v||(b=J(u,"input",t[12]),v=!0)},p(I,[C]){(!N||C&2&&a!==(a=pe(I[1])))&&(u.value=a);const P={};C&4&&(P.error=I[2]),f.$set(P);const z={};C&1&&(z.fields=I[0].merge),C&4&&(z.error=I[2]),d.$set(z),I[2]?g&&(Ce(),j(g,1,1,()=>{g=null}),je()):g?(g.p(I,C),C&4&&$(g,1)):(g=Be(I),g.c(),$(g,1),g.m(n,null))},i(I){N||($(f.$$.fragment,I),$(d.$$.fragment,I),$(g),N=!0)},o(I){j(f.$$.fragment,I),j(d.$$.fragment,I),j(g),N=!1},d(I){I&&_(e),O(f),O(d),g&&g.d(),v=!1,b()}}}function pe(t){return JSON.stringify(t,null,2)}function Kt(t){if(typeof window<"u"){const e=new Blob([JSON.stringify(t,null,2)],{type:"text/plain"});return URL.createObjectURL(e)}else return null}function en(t,e,n){let i,{editTemplateService:r=new Le(bt)}=e,s=r.template,l=r.result,o=null;function u(v){r.setTemplateSource(v),n(1,s=r.template),n(0,l=r.result),n(2,o=r.error)}function a(v,b){r.updateResultMergeFields(v,b),n(0,l=r.result)}function c(){navigator.clipboard.writeText(JSON.stringify(l)),alert("JSON copied to clipboard!")}function f(){r.submit(),window.alert("Form successfully submitted!")}function M(v){r.addMergeField(v),n(1,s=r.template),n(0,l=r.result),n(2,o=r.error)}function d(v){const b=r.getMergeFieldItem(v);r.removeMergeField(b),n(1,s=r.template),n(0,l=r.result),n(2,o=r.error)}function m(){r.setTemplateSource(r.result),n(1,s=r.template),n(0,l=r.result),n(2,o=r.error)}const N=v=>u(v.currentTarget.value);return t.$$set=v=>{"editTemplateService"in v&&n(11,r=v.editTemplateService)},t.$$.update=()=>{t.$$.dirty&1&&n(3,i=Kt(l)||"")},[l,s,o,i,u,a,c,f,M,d,m,r,N]}class tn extends V{constructor(e){super(),U(this,e,en,Xt,F,{editTemplateService:11})}}class nn{constructor(e,n=document.querySelector("#shotstack-form-field")){te(this,"templateService");this.containerElement=n,this.templateService=new Le(e),this.initialize()}on(e,n){this.templateService.on(e,n)}off(e,n){this.templateService.off(e,n)}submit(){this.templateService.submit()}initialize(){!this.containerElement||this.containerElement&&this.render(this.containerElement)}render(e){new tn({target:e,props:{editTemplateService:this.templateService}})}display(){!this.containerElement||(this.containerElement.style.display="block")}hide(){!this.containerElement||(this.containerElement.style.display="none")}attach(e){this.remove(),this.containerElement=e,this.render(this.containerElement)}remove(){!this.containerElement||this.containerElement.replaceChildren()}get container(){if(!!this.containerElement)return this.containerElement}merge(){return this.templateService.result}load(e){this.templateService.setTemplateSource(e)}addField(e,n){this.templateService.addMergeField({find:e,replace:n})}removeField(e){this.templateService.removeMergeField(e)}getField(e){return this.templateService.getMergeFieldItem(e)}}return nn}();
