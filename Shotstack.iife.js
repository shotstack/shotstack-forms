var Shotstack=function(){"use strict";var et=Object.defineProperty;var tt=(D,S,C)=>S in D?et(D,S,{enumerable:!0,configurable:!0,writable:!0,value:C}):D[S]=C;var X=(D,S,C)=>(tt(D,typeof S!="symbol"?S+"":S,C),C);function D(){}function S(e){return e()}function C(){return Object.create(null)}function P(e){e.forEach(S)}function he(e){return typeof e=="function"}function me(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let $;function _e(e,t){return $||($=document.createElement("a")),$.href=t,e===$.href}function ge(e){return Object.keys(e).length===0}let F=!1;function ye(){F=!0}function Ne(){F=!1}function ve(e,t,r,n){for(;e<t;){const l=e+(t-e>>1);r(l)<=n?e=l+1:t=l}return e}function be(e){if(e.hydrate_init)return;e.hydrate_init=!0;let t=e.childNodes;if(e.nodeName==="HEAD"){const a=[];for(let o=0;o<t.length;o++){const u=t[o];u.claim_order!==void 0&&a.push(u)}t=a}const r=new Int32Array(t.length+1),n=new Int32Array(t.length);r[0]=-1;let l=0;for(let a=0;a<t.length;a++){const o=t[a].claim_order,u=(l>0&&t[r[l]].claim_order<=o?l+1:ve(1,l,_=>t[r[_]].claim_order,o))-1;n[a]=r[u]+1;const h=u+1;r[h]=a,l=Math.max(h,l)}const c=[],i=[];let s=t.length-1;for(let a=r[l]+1;a!=0;a=n[a-1]){for(c.push(t[a-1]);s>=a;s--)i.push(t[s]);s--}for(;s>=0;s--)i.push(t[s]);c.reverse(),i.sort((a,o)=>a.claim_order-o.claim_order);for(let a=0,o=0;a<i.length;a++){for(;o<c.length&&i[a].claim_order>=c[o].claim_order;)o++;const u=o<c.length?c[o]:null;e.insertBefore(i[a],u)}}function p(e,t){if(F){for(be(e),(e.actual_end_child===void 0||e.actual_end_child!==null&&e.actual_end_child.parentNode!==e)&&(e.actual_end_child=e.firstChild);e.actual_end_child!==null&&e.actual_end_child.claim_order===void 0;)e.actual_end_child=e.actual_end_child.nextSibling;t!==e.actual_end_child?(t.claim_order!==void 0||t.parentNode!==e)&&e.insertBefore(t,e.actual_end_child):e.actual_end_child=t.nextSibling}else(t.parentNode!==e||t.nextSibling!==null)&&e.appendChild(t)}function z(e,t,r){F&&!r?p(e,t):(t.parentNode!==e||t.nextSibling!=r)&&e.insertBefore(t,r||null)}function m(e){e.parentNode.removeChild(e)}function Me(e,t){for(let r=0;r<e.length;r+=1)e[r]&&e[r].d(t)}function v(e){return document.createElement(e)}function L(e){return document.createTextNode(e)}function j(){return L(" ")}function G(e,t,r,n){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r,n)}function d(e,t,r){r==null?e.removeAttribute(t):e.getAttribute(t)!==r&&e.setAttribute(t,r)}function E(e){return Array.from(e.childNodes)}function Ee(e){e.claim_info===void 0&&(e.claim_info={last_index:0,total_claimed:0})}function K(e,t,r,n,l=!1){Ee(e);const c=(()=>{for(let i=e.claim_info.last_index;i<e.length;i++){const s=e[i];if(t(s)){const a=r(s);return a===void 0?e.splice(i,1):e[i]=a,l||(e.claim_info.last_index=i),s}}for(let i=e.claim_info.last_index-1;i>=0;i--){const s=e[i];if(t(s)){const a=r(s);return a===void 0?e.splice(i,1):e[i]=a,l?a===void 0&&e.claim_info.last_index--:e.claim_info.last_index=i,s}}return n()})();return c.claim_order=e.claim_info.total_claimed,e.claim_info.total_claimed+=1,c}function Te(e,t,r,n){return K(e,l=>l.nodeName===t,l=>{const c=[];for(let i=0;i<l.attributes.length;i++){const s=l.attributes[i];r[s.name]||c.push(s.name)}c.forEach(i=>l.removeAttribute(i))},()=>n(t))}function M(e,t,r){return Te(e,t,r,v)}function O(e,t){return K(e,r=>r.nodeType===3,r=>{const n=""+t;if(r.data.startsWith(n)){if(r.data.length!==n.length)return r.splitText(n.length)}else r.data=n},()=>L(t),!0)}function k(e){return O(e," ")}function J(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}let H;function Y(e){H=e}const R=[],ee=[],B=[],te=[],Ie=Promise.resolve();let V=!1;function Ae(){V||(V=!0,Ie.then(re))}function Q(e){B.push(e)}const W=new Set;let U=0;function re(){const e=H;do{for(;U<R.length;){const t=R[U];U++,Y(t),we(t.$$)}for(Y(null),R.length=0,U=0;ee.length;)ee.pop()();for(let t=0;t<B.length;t+=1){const r=B[t];W.has(r)||(W.add(r),r())}B.length=0}while(R.length);for(;te.length;)te.pop()();V=!1,W.clear(),Y(e)}function we(e){if(e.fragment!==null){e.update(),P(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Q)}}const De=new Set;function Se(e,t){e&&e.i&&(De.delete(e),e.i(t))}function je(e,t,r,n){const{fragment:l,on_mount:c,on_destroy:i,after_update:s}=e.$$;l&&l.m(t,r),n||Q(()=>{const a=c.map(S).filter(he);i?i.push(...a):P(a),e.$$.on_mount=[]}),s.forEach(Q)}function ke(e,t){const r=e.$$;r.fragment!==null&&(P(r.on_destroy),r.fragment&&r.fragment.d(t),r.on_destroy=r.fragment=null,r.ctx=[])}function Le(e,t){e.$$.dirty[0]===-1&&(R.push(e),Ae(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Ce(e,t,r,n,l,c,i,s=[-1]){const a=H;Y(e);const o=e.$$={fragment:null,ctx:null,props:c,update:D,not_equal:l,bound:C(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(a?a.$$.context:[])),callbacks:C(),dirty:s,skip_bound:!1,root:t.target||a.$$.root};i&&i(o.root);let u=!1;if(o.ctx=r?r(e,t.props||{},(h,_,...y)=>{const g=y.length?y[0]:_;return o.ctx&&l(o.ctx[h],o.ctx[h]=g)&&(!o.skip_bound&&o.bound[h]&&o.bound[h](g),u&&Le(e,h)),_}):[],o.update(),u=!0,P(o.before_update),o.fragment=n?n(o.ctx):!1,t.target){if(t.hydrate){ye();const h=E(t.target);o.fragment&&o.fragment.l(h),h.forEach(m)}else o.fragment&&o.fragment.c();t.intro&&Se(e.$$.fragment),je(e,t.target,t.anchor,t.customElement),Ne(),re()}Y(a)}class Oe{$destroy(){ke(this,1),this.$destroy=D}$on(t,r){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(r),()=>{const l=n.indexOf(r);l!==-1&&n.splice(l,1)}}$set(t){this.$$set&&!ge(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const rt="",xe="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIgNTEyIj48IS0tISBGb250IEF3ZXNvbWUgUHJvIDYuMi4wIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlIChDb21tZXJjaWFsIExpY2Vuc2UpIENvcHlyaWdodCAyMDIyIEZvbnRpY29ucywgSW5jLiAtLT48cGF0aCBkPSJNNTAyLjYgNzAuNjNsLTYxLjI1LTYxLjI1QzQzNS40IDMuMzcxIDQyNy4yIDAgNDE4LjcgMEgyNTUuMWMtMzUuMzUgMC02NCAyOC42Ni02NCA2NGwuMDE5NSAyNTZDMTkyIDM1NS40IDIyMC43IDM4NCAyNTYgMzg0aDE5MmMzNS4yIDAgNjQtMjguOCA2NC02NFY5My4yNUM1MTIgODQuNzcgNTA4LjYgNzYuNjMgNTAyLjYgNzAuNjN6TTQ2NCAzMjBjMCA4LjgzNi03LjE2NCAxNi0xNiAxNkgyNTUuMWMtOC44MzggMC0xNi03LjE2NC0xNi0xNkwyMzkuMSA2NC4xM2MwLTguODM2IDcuMTY0LTE2IDE2LTE2aDEyOEwzODQgOTZjMCAxNy42NyAxNC4zMyAzMiAzMiAzMmg0Ny4xVjMyMHpNMjcyIDQ0OGMwIDguODM2LTcuMTY0IDE2LTE2IDE2SDYzLjFjLTguODM4IDAtMTYtNy4xNjQtMTYtMTZMNDcuOTggMTkyLjFjMC04LjgzNiA3LjE2NC0xNiAxNi0xNkgxNjBWMTI4SDYzLjk5Yy0zNS4zNSAwLTY0IDI4LjY1LTY0IDY0bC4wMDk4IDI1NkMuMDAyIDQ4My4zIDI4LjY2IDUxMiA2NCA1MTJoMTkyYzM1LjIgMCA2NC0yOC44IDY0LTY0di0zMmgtNDcuMUwyNzIgNDQ4eiIvPjwvc3ZnPg==",ze="A 'merge' property is required",Ye="Property 'merge' must be an array",Re="Property 'merge' must contain at least one element",Pe="A 'find' property is required on every element inside 'merge'",$e="Every 'find' property inside 'merge' must be of type string",Fe="Every 'find' property inside 'merge' must be a string of length equal to or higher than one",Je="A 'replace' property is required on every element inside 'merge'";class x extends Error{constructor(t){super(t)}}function q(e,t){return!(e in t)}function Be(e,t){return!(t[e]instanceof Array)}function Ue(e,t){return typeof t[e]!="string"}function Ze(e,t){return!(typeof t[e]=="string"&&t[e].length>0)}function Ge(e,t){return!(t[e]instanceof Array&&t[e].length>0)}function He(e){try{const t=JSON.parse(e);if(q("merge",t))throw new x(ze);if(Be("merge",t))throw new x(Ye);if(Ge("merge",t))throw new x(Re);const r=Ve(t.merge);return{...t,merge:r}}catch(t){throw t instanceof Error?t:new x("There was a problem parsing the template json")}}function Ve(e){return e.map(r=>{if(q("find",r))throw new x(Pe);if(q("replace",r))throw new x(Je);if(Ue("find",r))throw new x($e);if(Ze("find",r))throw new x(Fe);return r}).map(({find:r,replace:n})=>({find:r,replace:typeof n=="string"?n:JSON.stringify(n)}))}class Qe{constructor(t={merge:[]}){X(this,"template");X(this,"result");this.template=t,this.result=t}setTemplateSource(t){try{const r=He(t);return this.template=r,this.result=r,r}catch(r){throw r instanceof Error?r:new Error("Error parsing JSON")}}updateResultMergeFields(t){const{find:r,replace:n}=t,l={find:r,replace:n},c=this.result.merge.map(i=>(i==null?void 0:i.find)===t.find?l:i);return this.result={...this.result,merge:c},c}}const We={merge:[{find:"NAME",replace:"world"}],timeline:{tracks:[{clips:[{asset:{type:"title",text:"Hello {{ NAME }}",style:"future"},start:0,length:5}]}]},output:{format:"mp4",resolution:"hd"}},at="";function ne(e,t,r){const n=e.slice();return n[9]=t[r].find,n[10]=t[r].replace,n}function le(e){let t,r,n;return{c(){t=v("p"),r=v("span"),n=L(e[2]),this.h()},l(l){t=M(l,"P",{"data-cy":!0,class:!0});var c=E(t);r=M(c,"SPAN",{class:!0});var i=E(r);n=O(i,e[2]),i.forEach(m),c.forEach(m),this.h()},h(){d(r,"class","monospace text-orange-900 svelte-u6rap9"),d(t,"data-cy","template-input-error"),d(t,"class","bg-rose-200 rounded py-2 px-4 svelte-u6rap9")},m(l,c){z(l,t,c),p(t,r),p(r,n)},p(l,c){c&4&&J(n,l[2])},d(l){l&&m(t)}}}function ie(e){let t,r,n,l,c,i=e[0].merge,s=[];for(let a=0;a<i.length;a+=1)s[a]=ae(ne(e,i,a));return{c(){t=v("div"),r=v("h1"),n=L("Modify Merge Values"),l=j(),c=v("div");for(let a=0;a<s.length;a+=1)s[a].c();this.h()},l(a){t=M(a,"DIV",{"data-cy":!0,class:!0});var o=E(t);r=M(o,"H1",{class:!0});var u=E(r);n=O(u,"Modify Merge Values"),u.forEach(m),l=k(o),c=M(o,"DIV",{class:!0});var h=E(c);for(let _=0;_<s.length;_+=1)s[_].l(h);h.forEach(m),o.forEach(m),this.h()},h(){d(r,"class","text-teal-400 px-1 svelte-u6rap9"),d(c,"class","border p-4 mb-6 svelte-u6rap9"),d(t,"data-cy","merge-fields-input-section"),d(t,"class","svelte-u6rap9")},m(a,o){z(a,t,o),p(t,r),p(r,n),p(t,l),p(t,c);for(let u=0;u<s.length;u+=1)s[u].m(c,null)},p(a,o){if(o&33){i=a[0].merge;let u;for(u=0;u<i.length;u+=1){const h=ne(a,i,u);s[u]?s[u].p(h,o):(s[u]=ae(h),s[u].c(),s[u].m(c,null))}for(;u<s.length;u+=1)s[u].d(1);s.length=i.length}},d(a){a&&m(t),Me(s,a)}}}function ae(e){let t,r,n="{{ "+e[9]+" }} ",l,c,i,s,a,o,u,h,_;function y(...g){return e[7](e[9],...g)}return{c(){t=v("div"),r=v("label"),l=L(n),i=j(),s=v("input"),u=j(),this.h()},l(g){t=M(g,"DIV",{"data-cy":!0,class:!0});var f=E(t);r=M(f,"LABEL",{for:!0,class:!0});var N=E(r);l=O(N,n),N.forEach(m),i=k(f),s=M(f,"INPUT",{class:!0,id:!0,type:!0}),u=k(f),f.forEach(m),this.h()},h(){d(r,"for",c=e[9]),d(r,"class","block mb-2 monospace svelte-u6rap9"),d(s,"class","border w-full mb-3 pl-2 py-1 text-stone-500 svelte-u6rap9"),d(s,"id",a=e[9]),d(s,"type","text"),s.value=o=oe(e[10]),d(t,"data-cy","label-input"),d(t,"class","svelte-u6rap9")},m(g,f){z(g,t,f),p(t,r),p(r,l),p(t,i),p(t,s),p(t,u),h||(_=G(s,"input",y),h=!0)},p(g,f){e=g,f&1&&n!==(n="{{ "+e[9]+" }} ")&&J(l,n),f&1&&c!==(c=e[9])&&d(r,"for",c),f&1&&a!==(a=e[9])&&d(s,"id",a),f&1&&o!==(o=oe(e[10]))&&s.value!==o&&(s.value=o)},d(g){g&&m(t),h=!1,_()}}}function se(e){let t,r,n;return{c(){t=v("p"),r=v("span"),n=L(e[3]),this.h()},l(l){t=M(l,"P",{"data-cy":!0,class:!0});var c=E(t);r=M(c,"SPAN",{class:!0});var i=E(r);n=O(i,e[3]),i.forEach(m),c.forEach(m),this.h()},h(){d(r,"class","monospace text-orange-900 svelte-u6rap9"),d(t,"data-cy","merge-fields-input-error"),d(t,"class","bg-rose-200 rounded py-2 px-4 svelte-u6rap9")},m(l,c){z(l,t,c),p(t,r),p(r,n)},p(l,c){c&8&&J(n,l[3])},d(l){l&&m(t)}}}function ce(e){let t,r,n,l,c,i,s,a,o,u=JSON.stringify(e[1],null,2)+"",h,_,y;return{c(){t=v("div"),r=v("h1"),n=L("Result"),l=j(),c=v("abbr"),i=v("img"),a=j(),o=v("p"),h=L(u),this.h()},l(g){t=M(g,"DIV",{"data-cy":!0,class:!0});var f=E(t);r=M(f,"H1",{class:!0});var N=E(r);n=O(N,"Result"),N.forEach(m),l=k(f),c=M(f,"ABBR",{title:!0,class:!0});var T=E(c);i=M(T,"IMG",{src:!0,alt:!0,class:!0}),T.forEach(m),a=k(f),o=M(f,"P",{"data-cy":!0,class:!0});var I=E(o);h=O(I,u),I.forEach(m),f.forEach(m),this.h()},h(){d(r,"class","text-teal-400 px-1 inline-block mr-2 svelte-u6rap9"),_e(i.src,s=xe)||d(i,"src",s),d(i,"alt","copy-button"),d(i,"class","h-4 cursor-pointer inline mb-1 svelte-u6rap9"),d(c,"title","Copy to clipboard"),d(c,"class","svelte-u6rap9"),d(o,"data-cy","result"),d(o,"class","h-60 overflow-auto border p-4 whitespace-pre monospace svelte-u6rap9"),d(t,"data-cy","result-section"),d(t,"class","svelte-u6rap9")},m(g,f){z(g,t,f),p(t,r),p(r,n),p(t,l),p(t,c),p(c,i),p(t,a),p(t,o),p(o,h),_||(y=G(i,"click",e[6]),_=!0)},p(g,f){f&2&&u!==(u=JSON.stringify(g[1],null,2)+"")&&J(h,u)},d(g){g&&m(t),_=!1,y()}}}function qe(e){var de;let t,r,n,l,c,i,s,a,o,u,h,_,y,g,f=e[2]&&le(e),N=((de=e[0].merge)==null?void 0:de.length)&&!e[2]&&ie(e),T=e[3]&&se(e),I=!e[3]&&!e[2]&&ce(e);return{c(){t=v("section"),r=v("form"),n=v("div"),l=v("label"),c=L("Paste template"),i=j(),s=v("textarea"),o=j(),f&&f.c(),u=j(),N&&N.c(),h=j(),T&&T.c(),_=j(),I&&I.c(),this.h()},l(b){t=M(b,"SECTION",{"data-cy":!0,class:!0});var A=E(t);r=M(A,"FORM",{class:!0});var w=E(r);n=M(w,"DIV",{"data-cy":!0,class:!0});var Z=E(n);l=M(Z,"LABEL",{for:!0,class:!0});var pe=E(l);c=O(pe,"Paste template"),pe.forEach(m),i=k(Z),s=M(Z,"TEXTAREA",{"data-cy":!0,class:!0,id:!0}),E(s).forEach(m),Z.forEach(m),o=k(w),f&&f.l(w),u=k(w),N&&N.l(w),h=k(w),T&&T.l(w),w.forEach(m),_=k(A),I&&I.l(A),A.forEach(m),this.h()},h(){d(l,"for","json-input"),d(l,"class","text-teal-400 px-1 svelte-u6rap9"),d(s,"data-cy","template-input"),d(s,"class","w-full h-60 monospace border p-4 overflow-auto whitespace-pre resize-none svelte-u6rap9"),d(s,"id","json-input"),s.value=a=JSON.stringify(e[0],null,2),d(n,"data-cy","template-input-section"),d(n,"class","mb-6 svelte-u6rap9"),d(r,"class","svelte-u6rap9"),d(t,"data-cy","form-container"),d(t,"class","max-w-lg my-4 mx-auto border rounded-xl px-7 py-4 svelte-u6rap9")},m(b,A){z(b,t,A),p(t,r),p(r,n),p(n,l),p(l,c),p(n,i),p(n,s),p(r,o),f&&f.m(r,null),p(r,u),N&&N.m(r,null),p(r,h),T&&T.m(r,null),p(t,_),I&&I.m(t,null),y||(g=G(s,"input",e[4]),y=!0)},p(b,[A]){var w;A&1&&a!==(a=JSON.stringify(b[0],null,2))&&(s.value=a),b[2]?f?f.p(b,A):(f=le(b),f.c(),f.m(r,u)):f&&(f.d(1),f=null),((w=b[0].merge)==null?void 0:w.length)&&!b[2]?N?N.p(b,A):(N=ie(b),N.c(),N.m(r,h)):N&&(N.d(1),N=null),b[3]?T?T.p(b,A):(T=se(b),T.c(),T.m(r,null)):T&&(T.d(1),T=null),!b[3]&&!b[2]?I?I.p(b,A):(I=ce(b),I.c(),I.m(t,null)):I&&(I.d(1),I=null)},i:D,o:D,d(b){b&&m(t),f&&f.d(),N&&N.d(),T&&T.d(),I&&I.d(),y=!1,g()}}}function oe(e){if(typeof e=="string")return e;try{return JSON.stringify(e)}catch{return e}}function Xe(e,t,r){const n=new Qe(We);let l=n.template,c=n.result,i,s;function a(_){try{const y=n.setTemplateSource(_.target.value);r(0,l=y),r(1,c=y),r(2,i="")}catch(y){r(2,i=y.message)}}function o(_){try{const y=n.updateResultMergeFields(_);r(1,c={...c,merge:y}),r(3,s="")}catch(y){r(3,s=y.message)}}function u(){navigator.clipboard.writeText(JSON.stringify(c)),alert("JSON copied to clipboard!")}return[l,c,i,s,a,o,u,(_,y)=>o({find:_,replace:y.currentTarget.value})]}class Ke extends Oe{constructor(t){super(),Ce(this,t,Xe,qe,me,{})}}const ue={render:e=>new Ke({target:e})},fe=document.querySelector("#shotstack-form-field");return fe&&ue.render(fe),ue}();
