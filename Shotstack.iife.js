var Shotstack=function(){"use strict";var on=Object.defineProperty;var un=(T,H,q)=>H in T?on(T,H,{enumerable:!0,configurable:!0,writable:!0,value:q}):T[H]=q;var X=(T,H,q)=>(un(T,typeof H!="symbol"?H+"":H,q),q);function T(){}function H(t){return t()}function q(){return Object.create(null)}function K(t){t.forEach(H)}function se(t){return typeof t=="function"}function x(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let oe;function He(t,e){return oe||(oe=document.createElement("a")),oe.href=e,t===oe.href}function Qe(t){return Object.keys(t).length===0}function Je(t,...e){if(t==null)return T;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Ne(t,e,n){t.$$.on_destroy.push(Je(e,n))}let ue=!1;function Ge(){ue=!0}function qe(){ue=!1}function Ze(t,e,n,i){for(;t<e;){const r=t+(e-t>>1);n(r)<=i?t=r+1:e=r}return t}function We(t){if(t.hydrate_init)return;t.hydrate_init=!0;let e=t.childNodes;if(t.nodeName==="HEAD"){const a=[];for(let u=0;u<e.length;u++){const m=e[u];m.claim_order!==void 0&&a.push(m)}e=a}const n=new Int32Array(e.length+1),i=new Int32Array(e.length);n[0]=-1;let r=0;for(let a=0;a<e.length;a++){const u=e[a].claim_order,m=(r>0&&e[n[r]].claim_order<=u?r+1:Ze(1,r,E=>e[n[E]].claim_order,u))-1;i[a]=n[m]+1;const d=m+1;n[d]=a,r=Math.max(d,r)}const s=[],l=[];let o=e.length-1;for(let a=n[r]+1;a!=0;a=i[a-1]){for(s.push(e[a-1]);o>=a;o--)l.push(e[o]);o--}for(;o>=0;o--)l.push(e[o]);s.reverse(),l.sort((a,u)=>a.claim_order-u.claim_order);for(let a=0,u=0;a<l.length;a++){for(;u<s.length&&l[a].claim_order>=s[u].claim_order;)u++;const m=u<s.length?s[u]:null;t.insertBefore(l[a],m)}}function g(t,e){if(ue){for(We(t),(t.actual_end_child===void 0||t.actual_end_child!==null&&t.actual_end_child.parentNode!==t)&&(t.actual_end_child=t.firstChild);t.actual_end_child!==null&&t.actual_end_child.claim_order===void 0;)t.actual_end_child=t.actual_end_child.nextSibling;e!==t.actual_end_child?(e.claim_order!==void 0||e.parentNode!==t)&&t.insertBefore(e,t.actual_end_child):t.actual_end_child=e.nextSibling}else(e.parentNode!==t||e.nextSibling!==null)&&t.appendChild(e)}function $(t,e,n){ue&&!n?g(t,e):(e.parentNode!==t||e.nextSibling!=n)&&t.insertBefore(e,n||null)}function p(t){t.parentNode.removeChild(t)}function Xe(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function w(t){return document.createElement(t)}function ne(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function O(t){return document.createTextNode(t)}function F(){return O(" ")}function J(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function _e(t){return function(e){return e.preventDefault(),t.call(this,e)}}function h(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function b(t){return Array.from(t.childNodes)}function Ke(t){t.claim_info===void 0&&(t.claim_info={last_index:0,total_claimed:0})}function Te(t,e,n,i,r=!1){Ke(t);const s=(()=>{for(let l=t.claim_info.last_index;l<t.length;l++){const o=t[l];if(e(o)){const a=n(o);return a===void 0?t.splice(l,1):t[l]=a,r||(t.claim_info.last_index=l),o}}for(let l=t.claim_info.last_index-1;l>=0;l--){const o=t[l];if(e(o)){const a=n(o);return a===void 0?t.splice(l,1):t[l]=a,r?a===void 0&&t.claim_info.last_index--:t.claim_info.last_index=l,o}}return i()})();return s.claim_order=t.claim_info.total_claimed,t.claim_info.total_claimed+=1,s}function De(t,e,n,i){return Te(t,r=>r.nodeName===e,r=>{const s=[];for(let l=0;l<r.attributes.length;l++){const o=r.attributes[l];n[o.name]||s.push(o.name)}s.forEach(l=>r.removeAttribute(l))},()=>i(e))}function I(t,e,n){return De(t,e,n,w)}function ae(t,e,n){return De(t,e,n,ne)}function V(t,e){return Te(t,n=>n.nodeType===3,n=>{const i=""+e;if(n.data.startsWith(i)){if(n.data.length!==i.length)return n.splitText(i.length)}else n.data=i},()=>O(e),!0)}function A(t){return V(t," ")}function ve(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function Se(t,e){t.value=e==null?"":e}function ce(t,e,n){t.classList[n?"add":"remove"](e)}let be;function re(t){be=t}const ie=[],fe=[],de=[],ye=[],et=Promise.resolve();let we=!1;function tt(){we||(we=!0,et.then(Ae))}function Ie(t){de.push(t)}function Fe(t){ye.push(t)}const Me=new Set;let he=0;function Ae(){const t=be;do{for(;he<ie.length;){const e=ie[he];he++,re(e),nt(e.$$)}for(re(null),ie.length=0,he=0;fe.length;)fe.pop()();for(let e=0;e<de.length;e+=1){const n=de[e];Me.has(n)||(Me.add(n),n())}de.length=0}while(ie.length);for(;ye.length;)ye.pop()();we=!1,Me.clear(),re(t)}function nt(t){if(t.fragment!==null){t.update(),K(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ie)}}const me=new Set;let Z;function Ce(){Z={r:0,c:[],p:Z}}function je(){Z.r||K(Z.c),Z=Z.p}function S(t,e){t&&t.i&&(me.delete(t),t.i(e))}function C(t,e,n,i){if(t&&t.o){if(me.has(t))return;me.add(t),Z.c.push(()=>{me.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}function $e(t,e,n){const i=t.$$.props[e];i!==void 0&&(t.$$.bound[i]=n,n(t.$$.ctx[i]))}function z(t){t&&t.c()}function Y(t,e){t&&t.l(e)}function k(t,e,n,i){const{fragment:r,on_mount:s,on_destroy:l,after_update:o}=t.$$;r&&r.m(e,n),i||Ie(()=>{const a=s.map(H).filter(se);l?l.push(...a):K(a),t.$$.on_mount=[]}),o.forEach(Ie)}function L(t,e){const n=t.$$;n.fragment!==null&&(K(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function rt(t,e){t.$$.dirty[0]===-1&&(ie.push(t),tt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function R(t,e,n,i,r,s,l,o=[-1]){const a=be;re(t);const u=t.$$={fragment:null,ctx:null,props:s,update:T,not_equal:r,bound:q(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:q(),dirty:o,skip_bound:!1,root:e.target||a.$$.root};l&&l(u.root);let m=!1;if(u.ctx=n?n(t,e.props||{},(d,E,...c)=>{const f=c.length?c[0]:E;return u.ctx&&r(u.ctx[d],u.ctx[d]=f)&&(!u.skip_bound&&u.bound[d]&&u.bound[d](f),m&&rt(t,d)),E}):[],u.update(),m=!0,K(u.before_update),u.fragment=i?i(u.ctx):!1,e.target){if(e.hydrate){Ge();const d=b(e.target);u.fragment&&u.fragment.l(d),d.forEach(p)}else u.fragment&&u.fragment.c();e.intro&&S(t.$$.fragment),k(t,e.target,e.anchor,e.customElement),qe(),Ae()}re(a)}class B{$destroy(){L(this,1),this.$destroy=T}$on(e,n){const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!Qe(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const an="",cn="",it="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MS4yIDUxLjIiIHdpZHRoPSI1MS4yIiBoZWlnaHQ9IjUxLjIiID4KICAgIDxzdmcgd2lkdGg9IjUxLjIiIGhlaWdodD0iNTEuMiIgdmlld0JveD0iMCAwIDUxMiA1MTIiPgogICAgICAgIDxwYXRoCiAgICAgICAgICAgIGQ9Ik01MDIuNiA3MC42M2wtNjEuMjUtNjEuMjVDNDM1LjQgMy4zNzEgNDI3LjIgMCA0MTguNyAwSDI1NS4xYy0zNS4zNSAwLTY0IDI4LjY2LTY0IDY0bC4wMTk1IDI1NkMxOTIgMzU1LjQgMjIwLjcgMzg0IDI1NiAzODRoMTkyYzM1LjIgMCA2NC0yOC44IDY0LTY0VjkzLjI1QzUxMiA4NC43NyA1MDguNiA3Ni42MyA1MDIuNiA3MC42M3pNNDY0IDMyMGMwIDguODM2LTcuMTY0IDE2LTE2IDE2SDI1NS4xYy04LjgzOCAwLTE2LTcuMTY0LTE2LTE2TDIzOS4xIDY0LjEzYzAtOC44MzYgNy4xNjQtMTYgMTYtMTZoMTI4TDM4NCA5NmMwIDE3LjY3IDE0LjMzIDMyIDMyIDMyaDQ3LjFWMzIwek0yNzIgNDQ4YzAgOC44MzYtNy4xNjQgMTYtMTYgMTZINjMuMWMtOC44MzggMC0xNi03LjE2NC0xNi0xNkw0Ny45OCAxOTIuMWMwLTguODM2IDcuMTY0LTE2IDE2LTE2SDE2MFYxMjhINjMuOTljLTM1LjM1IDAtNjQgMjguNjUtNjQgNjRsLjAwOTggMjU2Qy4wMDIgNDgzLjMgMjguNjYgNTEyIDY0IDUxMmgxOTJjMzUuMiAwIDY0LTI4LjggNjQtNjR2LTMyaC00Ny4xTDI3MiA0NDh6IiAvPgogICAgPC9zdmc+Cjwvc3ZnPg==",lt="A 'merge' property is required",st="Property 'merge' must be an array",ot="A 'find' property is required on every element inside 'merge'",ut="Every 'find' property inside 'merge' must be of type string",at="Every 'find' property inside 'merge' must be a string of length equal to or higher than one",ct="A 'replace' property is required on every element inside 'merge'",ft="Unexpected error while parsing template JSON",dt="Every element inside the 'merge' should be an object";class G extends Error{constructor(e){super(e)}}function ht(t){return typeof t=="object"}function ge(t,e){return t in e}function Ee(t,e){return!ge(t,e)}function mt(t,e){return ge(t,e)&&!(e[t]instanceof Array)}function gt(t,e){return ge(t,e)&&typeof e[t]!="string"}function pt(t,e){const n=ge(t,e)&&e[t];return!(typeof n=="string"&&n.length>0)}function _t(t){try{const e=JSON.parse(t);if(Ee("merge",e))throw new G(lt);if(mt("merge",e))throw new G(st);const{merge:n}=e,i=vt(n);return{...e,merge:i}}catch(e){throw xe(e)}}function vt(t){return t.map(n=>{if(!ht(n))throw new G(dt);if(Ee("find",n))throw new G(ot);if(Ee("replace",n))throw new G(ct);if(gt("find",n))throw new G(ut);if(pt("find",n))throw new G(at);return n}).map(({find:n,replace:i})=>({find:n,replace:ke(i)}))}function bt(t){return typeof t=="object"&&t!==null&&"message"in t}function xe(t){return t instanceof Error?t:bt(t)?new G(t.message):new G(ft)}function ke(t){return typeof t=="string"?t:JSON.stringify(t)}class Le{constructor(e){X(this,"template");X(this,"_result");X(this,"_error");X(this,"handlers");this._error=null,this.template={merge:[]},this._result={merge:[]},this.handlers={change:[],submit:[],error:[this.logger]},this.setTemplateSource(e)}set error(e){const n=this._error&&{...this._error}||null;this._error=e,e!==null&&this.handlers.error.forEach(i=>i(e,n))}get error(){return this._error}set result(e){this._result=e,this.handlers.change.forEach(n=>n(e))}get result(){return this._result}on(e,n){this.handlers[e].push(n)}off(e,n){this.handlers={...this.handlers,[e]:this.handlers[e].filter(i=>i!==n)}}submit(){if(this.error)throw this.error;this.handlers.submit.forEach(e=>e(this.result))}setTemplateSource(e){try{const n=_t(ke(e));this.template=n,this.result=n,this.error=null}catch(n){const i=xe(n);this.error=i}}updateResultMergeFields(e,n){const i=n||this.getMergeFieldItem({find:e.find});return this.result.merge.forEach(r=>{r===i&&(r.find=e.find,r.replace=e.replace)}),this.result={...this.result,merge:this.result.merge},this.result.merge}logger(e){console.error(e)}addMergeField(e){this.setTemplateSource({...this.result,merge:[...this.result.merge,e]})}removeMergeField(e){this.setTemplateSource({...this.result,merge:this.result.merge.filter(n=>n!==e)})}getMergeFieldItem(e){if(Object.keys(e).length===0)return;const n=function(i){let r;for(r in e)if(i[r]!==e[r])return!1;return!0};return this.result.merge.find(n)}}const yt={merge:[{find:"NAME",replace:"world"}],timeline:{tracks:[{clips:[{asset:{type:"title",text:"Hello {{ NAME }}",style:"future"},start:0,length:5}]}]},output:{format:"mp4",resolution:"hd"}};function wt(t){let e,n;return{c(){e=ne("svg"),n=ne("path"),this.h()},l(i){e=ae(i,"svg",{class:!0,xmlns:!0,viewBox:!0});var r=b(e);n=ae(r,"path",{d:!0}),b(n).forEach(p),r.forEach(p),this.h()},h(){h(n,"d","M13 8V2H7v6H2l8 8 8-8h-5zM0 18h20v2H0v-2z"),h(e,"class","fill-current w-4 h-4 mr-2"),h(e,"xmlns","http://www.w3.org/2000/svg"),h(e,"viewBox","0 0 20 20")},m(i,r){$(i,e,r),g(e,n)},p:T,i:T,o:T,d(i){i&&p(e)}}}function It(t){return[]}class Mt extends B{constructor(e){super(),R(this,e,It,wt,x,{})}}function Et(t){let e,n,i,r;return n=new Mt({}),{c(){e=w("a"),z(n.$$.fragment),i=O(`
	Download`),this.h()},l(s){e=I(s,"A",{href:!0,download:!0,class:!0});var l=b(e);Y(n.$$.fragment,l),i=V(l,`
	Download`),l.forEach(p),this.h()},h(){h(e,"href",t[0]),h(e,"download","result.json"),h(e,"class","bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded inline-flex items-center w-40 justify-center")},m(s,l){$(s,e,l),k(n,e,null),g(e,i),r=!0},p(s,[l]){(!r||l&1)&&h(e,"href",s[0])},i(s){r||(S(n.$$.fragment,s),r=!0)},o(s){C(n.$$.fragment,s),r=!1},d(s){s&&p(e),L(n)}}}function Nt(t,e,n){let{download:i=""}=e;return t.$$set=r=>{"download"in r&&n(0,i=r.download)},[i]}class Tt extends B{constructor(e){super(),R(this,e,Nt,Et,x,{download:0})}}function Dt(t){let e,n,i,r;return{c(){e=w("button"),n=O("Submit"),this.h()},l(s){e=I(s,"BUTTON",{class:!0});var l=b(e);n=V(l,"Submit"),l.forEach(p),this.h()},h(){h(e,"class","bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded w-40")},m(s,l){$(s,e,l),g(e,n),i||(r=J(e,"click",function(){se(t[0])&&t[0].apply(this,arguments)}),i=!0)},p(s,[l]){t=s},i:T,o:T,d(s){s&&p(e),i=!1,r()}}}function St(t,e,n){let{submit:i}=e;return t.$$set=r=>{"submit"in r&&n(0,i=r.submit)},[i]}class Ft extends B{constructor(e){super(),R(this,e,St,Dt,x,{submit:0})}}function At(t){let e,n,i,r,s;return n=new Tt({props:{download:t[0]}}),r=new Ft({props:{submit:t[1]}}),{c(){e=w("div"),z(n.$$.fragment),i=F(),z(r.$$.fragment),this.h()},l(l){e=I(l,"DIV",{class:!0});var o=b(e);Y(n.$$.fragment,o),i=A(o),Y(r.$$.fragment,o),o.forEach(p),this.h()},h(){h(e,"class","flex justify-between pt-4")},m(l,o){$(l,e,o),k(n,e,null),g(e,i),k(r,e,null),s=!0},p(l,[o]){const a={};o&1&&(a.download=l[0]),n.$set(a);const u={};o&2&&(u.submit=l[1]),r.$set(u)},i(l){s||(S(n.$$.fragment,l),S(r.$$.fragment,l),s=!0)},o(l){C(n.$$.fragment,l),C(r.$$.fragment,l),s=!1},d(l){l&&p(e),L(n),L(r)}}}function Ct(t,e,n){let{download:i=""}=e,{submit:r}=e;return t.$$set=s=>{"download"in s&&n(0,i=s.download),"submit"in s&&n(1,r=s.submit)},[i,r]}class jt extends B{constructor(e){super(),R(this,e,Ct,At,x,{download:0,submit:1})}}const ee=[];function Oe(t,e=T){let n;const i=new Set;function r(o){if(x(t,o)&&(t=o,n)){const a=!ee.length;for(const u of i)u[1](),ee.push(u,t);if(a){for(let u=0;u<ee.length;u+=2)ee[u][0](ee[u+1]);ee.length=0}}}function s(o){r(o(t))}function l(o,a=T){const u=[o,a];return i.add(u),i.size===1&&(n=e(r)||T),o(t),()=>{i.delete(u),i.size===0&&(n(),n=null)}}return{set:r,update:s,subscribe:l}}function $t(t){let e,n,i;return{c(){e=w("input"),this.h()},l(r){e=I(r,"INPUT",{class:!0,type:!0}),this.h()},h(){h(e,"class","border w-full mb-3 pl-2 py-1 text-stone-500"),h(e,"type","text")},m(r,s){$(r,e,s),Se(e,t[0]),n||(i=[J(e,"input",t[2]),J(e,"focus",t[3],{once:!0})],n=!0)},p(r,[s]){s&1&&e.value!==r[0]&&Se(e,r[0])},i:T,o:T,d(r){r&&p(e),n=!1,K(i)}}}function xt(t,e,n){let{value:i}=e,{onFocus:r}=e;function s(){i=this.value,n(0,i)}const l=o=>r(o.currentTarget);return t.$$set=o=>{"value"in o&&n(0,i=o.value),"onFocus"in o&&n(1,r=o.onFocus)},[i,r,s,l]}class ze extends B{constructor(e){super(),R(this,e,xt,$t,x,{value:0,onFocus:1})}}function kt(t){let e,n,i,r,s,l,o,a,u,m,d,E,c,f,y,_,M,v;function N(D){t[7](D)}let j={onFocus:t[6]};t[1]!==void 0&&(j.value=t[1]),o=new ze({props:j}),fe.push(()=>$e(o,"value",N));function P(D){t[9](D)}let U={onFocus:t[8]};return t[2]!==void 0&&(U.value=t[2]),m=new ze({props:U}),fe.push(()=>$e(m,"value",P)),{c(){e=w("div"),n=w("div"),i=w("h1"),r=O("Add a new merge field"),s=F(),l=w("div"),z(o.$$.fragment),u=F(),z(m.$$.fragment),E=F(),c=w("div"),f=w("button"),y=O("Add"),this.h()},l(D){e=I(D,"DIV",{});var Q=b(e);n=I(Q,"DIV",{});var W=b(n);i=I(W,"H1",{class:!0});var le=b(i);r=V(le,"Add a new merge field"),le.forEach(p),s=A(W),l=I(W,"DIV",{class:!0});var te=b(l);Y(o.$$.fragment,te),u=A(te),Y(m.$$.fragment,te),E=A(te),c=I(te,"DIV",{class:!0});var Ve=b(c);f=I(Ve,"BUTTON",{class:!0});var Pe=b(f);y=V(Pe,"Add"),Pe.forEach(p),Ve.forEach(p),te.forEach(p),W.forEach(p),Q.forEach(p),this.h()},h(){h(i,"class","text-teal-400 px-1"),h(f,"class","bg-blue-500 hover:bg-blue-700 text-white font-bold py-1 px-3 rounded align-self-end"),h(c,"class","flex flex-row-reverse"),h(l,"class","border p-4 mb-6")},m(D,Q){$(D,e,Q),g(e,n),g(n,i),g(i,r),g(n,s),g(n,l),k(o,l,null),g(l,u),k(m,l,null),g(l,E),g(l,c),g(c,f),g(f,y),_=!0,M||(v=J(f,"click",_e(t[10])),M=!0)},p(D,[Q]){const W={};!a&&Q&2&&(a=!0,W.value=D[1],Fe(()=>a=!1)),o.$set(W);const le={};!d&&Q&4&&(d=!0,le.value=D[2],Fe(()=>d=!1)),m.$set(le)},i(D){_||(S(o.$$.fragment,D),S(m.$$.fragment,D),_=!0)},o(D){C(o.$$.fragment,D),C(m.$$.fragment,D),_=!1},d(D){D&&p(e),L(o),L(m),M=!1,v()}}}function Lt(t,e,n){let i,r,s=Oe("find");Ne(t,s,f=>n(1,i=f));let l=Oe("replace");Ne(t,l,f=>n(2,r=f));let o=f=>f.set(""),{addField:a}=e;const u=()=>o(s);function m(f){i=f,s.set(i)}const d=()=>o(l);function E(f){r=f,l.set(r)}const c=()=>a({find:i,replace:r});return t.$$set=f=>{"addField"in f&&n(0,a=f.addField)},[a,i,r,s,l,o,u,m,d,E,c]}class Ot extends B{constructor(e){super(),R(this,e,Lt,kt,x,{addField:0})}}function zt(t){let e,n;return{c(){e=ne("svg"),n=ne("path"),this.h()},l(i){e=ae(i,"svg",{xmlns:!0,viewBox:!0});var r=b(e);n=ae(r,"path",{fill:!0,d:!0}),b(n).forEach(p),r.forEach(p),this.h()},h(){h(n,"fill","white"),h(n,"d","M.293.293a1 1 0 011.414 0L8 6.586 14.293.293a1 1 0 111.414 1.414L9.414 8l6.293 6.293a1 1 0 01-1.414 1.414L8 9.414l-6.293 6.293a1 1 0 01-1.414-1.414L6.586 8 .293 1.707a1 1 0 010-1.414z"),h(e,"xmlns","http://www.w3.org/2000/svg"),h(e,"viewBox","0 0 16 16")},m(i,r){$(i,e,r),g(e,n)},p:T,i:T,o:T,d(i){i&&p(e)}}}function Yt(t){return[]}class Rt extends B{constructor(e){super(),R(this,e,Yt,zt,x,{})}}function Bt(t){let e,n,i,r,s;return n=new Rt({}),{c(){e=w("button"),z(n.$$.fragment),this.h()},l(l){e=I(l,"BUTTON",{class:!0});var o=b(e);Y(n.$$.fragment,o),o.forEach(p),this.h()},h(){h(e,"class","bg-blue-400 hover:bg-blue-700 text-white font-bold absolute top-0 right-0 rounded-full w-4 h-4 p-1")},m(l,o){$(l,e,o),k(n,e,null),i=!0,r||(s=J(e,"click",_e(function(){se(t[0])&&t[0].apply(this,arguments)})),r=!0)},p(l,[o]){t=l},i(l){i||(S(n.$$.fragment,l),i=!0)},o(l){C(n.$$.fragment,l),i=!1},d(l){l&&p(e),L(n),r=!1,s()}}}function Ut(t,e,n){let{onClick:i}=e;return t.$$set=r=>{"onClick"in r&&n(0,i=r.onClick)},[i]}class Vt extends B{constructor(e){super(),R(this,e,Ut,Bt,x,{onClick:0})}}function Pt(t){let e,n,i;return{c(){e=w("input"),this.h()},l(r){e=I(r,"INPUT",{role:!0,class:!0,type:!0}),this.h()},h(){h(e,"role","textbox"),h(e,"class","border w-full mb-3 pl-2 py-1 text-stone-500"),h(e,"type","text"),e.value=t[2]},m(r,s){$(r,e,s),n||(i=J(e,"input",t[4]),n=!0)},p(r,[s]){s&4&&e.value!==r[2]&&(e.value=r[2])},i:T,o:T,d(r){r&&p(e),n=!1,i()}}}function Ht(t,e,n){let{field:i}=e,{find:r}=e,{replace:s}=e,{handleFormInput:l}=e;const o=a=>l({find:r,replace:a.currentTarget.value},i);return t.$$set=a=>{"field"in a&&n(0,i=a.field),"find"in a&&n(1,r=a.find),"replace"in a&&n(2,s=a.replace),"handleFormInput"in a&&n(3,l=a.handleFormInput)},[i,r,s,l,o]}class Ye extends B{constructor(e){super(),R(this,e,Ht,Pt,x,{field:0,find:1,replace:2,handleFormInput:3})}}function Re(t,e,n){const i=t.slice();return i[6]=e[n],i}function Be(t){let e,n,i=t[6].find+"",r,s,l,o,a,u,m,d;o=new Ye({props:{find:t[6].find,replace:t[6].replace,field:t[6],handleFormInput:t[2]}});function E(){return t[5](t[6])}return u=new Vt({props:{onClick:E}}),{c(){e=w("div"),n=w("label"),r=O(i),l=F(),z(o.$$.fragment),a=F(),z(u.$$.fragment),m=F(),this.h()},l(c){e=I(c,"DIV",{"data-cy":!0,class:!0});var f=b(e);n=I(f,"LABEL",{for:!0,class:!0});var y=b(n);r=V(y,i),y.forEach(p),l=A(f),Y(o.$$.fragment,f),a=A(f),Y(u.$$.fragment,f),m=A(f),f.forEach(p),this.h()},h(){h(n,"for",s=t[6].find),h(n,"class","block mb-2 monospace"),h(e,"data-cy","label-input"),h(e,"class","relative")},m(c,f){$(c,e,f),g(e,n),g(n,r),g(e,l),k(o,e,null),g(e,a),k(u,e,null),g(e,m),d=!0},p(c,f){t=c,(!d||f&2)&&i!==(i=t[6].find+"")&&ve(r,i),(!d||f&2&&s!==(s=t[6].find))&&h(n,"for",s);const y={};f&2&&(y.find=t[6].find),f&2&&(y.replace=t[6].replace),f&2&&(y.field=t[6]),f&4&&(y.handleFormInput=t[2]),o.$set(y);const _={};f&18&&(_.onClick=E),u.$set(_)},i(c){d||(S(o.$$.fragment,c),S(u.$$.fragment,c),d=!0)},o(c){C(o.$$.fragment,c),C(u.$$.fragment,c),d=!1},d(c){c&&p(e),L(o),L(u)}}}function Qt(t){let e,n,i,r,s,l,o,a,u,m=t[1],d=[];for(let c=0;c<m.length;c+=1)d[c]=Be(Re(t,m,c));const E=c=>C(d[c],1,1,()=>{d[c]=null});return a=new Ot({props:{addField:t[3]}}),{c(){e=w("div"),n=w("div"),i=w("h1"),r=O("Modify Merge Values"),s=F(),l=w("div");for(let c=0;c<d.length;c+=1)d[c].c();o=F(),z(a.$$.fragment),this.h()},l(c){e=I(c,"DIV",{});var f=b(e);n=I(f,"DIV",{"data-cy":!0});var y=b(n);i=I(y,"H1",{class:!0});var _=b(i);r=V(_,"Modify Merge Values"),_.forEach(p),s=A(y),l=I(y,"DIV",{class:!0});var M=b(l);for(let v=0;v<d.length;v+=1)d[v].l(M);M.forEach(p),y.forEach(p),o=A(f),Y(a.$$.fragment,f),f.forEach(p),this.h()},h(){h(i,"class","text-teal-400 px-1"),h(l,"class","border p-4 mb-6"),h(n,"data-cy","merge-fields-input-section"),ce(e,"hidden",t[0])},m(c,f){$(c,e,f),g(e,n),g(n,i),g(i,r),g(n,s),g(n,l);for(let y=0;y<d.length;y+=1)d[y].m(l,null);g(e,o),k(a,e,null),u=!0},p(c,[f]){if(f&22){m=c[1];let _;for(_=0;_<m.length;_+=1){const M=Re(c,m,_);d[_]?(d[_].p(M,f),S(d[_],1)):(d[_]=Be(M),d[_].c(),S(d[_],1),d[_].m(l,null))}for(Ce(),_=m.length;_<d.length;_+=1)E(_);je()}const y={};f&8&&(y.addField=c[3]),a.$set(y),(!u||f&1)&&ce(e,"hidden",c[0])},i(c){if(!u){for(let f=0;f<m.length;f+=1)S(d[f]);S(a.$$.fragment,c),u=!0}},o(c){d=d.filter(Boolean);for(let f=0;f<d.length;f+=1)C(d[f]);C(a.$$.fragment,c),u=!1},d(c){c&&p(e),Xe(d,c),L(a)}}}function Jt(t,e,n){let{error:i}=e,{fields:r=[]}=e,{handleFormInput:s}=e,{addField:l}=e,{removeField:o}=e;const a=u=>o(u);return t.$$set=u=>{"error"in u&&n(0,i=u.error),"fields"in u&&n(1,r=u.fields),"handleFormInput"in u&&n(2,s=u.handleFormInput),"addField"in u&&n(3,l=u.addField),"removeField"in u&&n(4,o=u.removeField)},[i,r,s,l,o,a]}class Gt extends B{constructor(e){super(),R(this,e,Jt,Qt,x,{error:0,fields:1,handleFormInput:2,addField:3,removeField:4})}}function qt(t){let e,n,i,r;return{c(){e=w("button"),n=O("Reset"),this.h()},l(s){e=I(s,"BUTTON",{class:!0});var l=b(e);n=V(l,"Reset"),l.forEach(p),this.h()},h(){h(e,"class","bg-blue-500 hover:bg-blue-700 text-white font-bold py-1 px-3 rounded align-self-end")},m(s,l){$(s,e,l),g(e,n),i||(r=J(e,"click",_e(function(){se(t[0])&&t[0].apply(this,arguments)})),i=!0)},p(s,[l]){t=s},i:T,o:T,d(s){s&&p(e),i=!1,r()}}}function Zt(t,e,n){let{onClick:i}=e;return t.$$set=r=>{"onClick"in r&&n(0,i=r.onClick)},[i]}class Wt extends B{constructor(e){super(),R(this,e,Zt,qt,x,{onClick:0})}}function Xt(t){let e,n,i,r,s,l,o,a;return o=new Wt({props:{onClick:t[0]}}),{c(){e=w("div"),n=w("p"),i=w("span"),r=O(t[2]),s=F(),l=w("div"),z(o.$$.fragment),this.h()},l(u){e=I(u,"DIV",{});var m=b(e);n=I(m,"P",{"data-cy":!0,class:!0});var d=b(n);i=I(d,"SPAN",{class:!0});var E=b(i);r=V(E,t[2]),E.forEach(p),d.forEach(p),s=A(m),l=I(m,"DIV",{class:!0});var c=b(l);Y(o.$$.fragment,c),c.forEach(p),m.forEach(p),this.h()},h(){h(i,"class","monospace text-orange-900"),h(n,"data-cy","template-input-error"),h(n,"class","bg-rose-200 rounded py-2 my-4 px-4"),h(l,"class","flex flex-row-reverse "),ce(e,"hidden",!t[1])},m(u,m){$(u,e,m),g(e,n),g(n,i),g(i,r),g(e,s),g(e,l),k(o,l,null),a=!0},p(u,[m]){(!a||m&4)&&ve(r,u[2]);const d={};m&1&&(d.onClick=u[0]),o.$set(d),(!a||m&2)&&ce(e,"hidden",!u[1])},i(u){a||(S(o.$$.fragment,u),a=!0)},o(u){C(o.$$.fragment,u),a=!1},d(u){u&&p(e),L(o)}}}function Kt(t,e,n){let i,{onClick:r}=e,{error:s}=e;return t.$$set=l=>{"onClick"in l&&n(0,r=l.onClick),"error"in l&&n(1,s=l.error)},t.$$.update=()=>{t.$$.dirty&2&&n(2,i=s&&s.message||"")},[r,s,i]}class en extends B{constructor(e){super(),R(this,e,Kt,Xt,x,{onClick:0,error:1})}}const mn="";function Ue(t){let e,n,i,r,s,l,o,a,u,m=pe(t[0])+"",d,E,c,f,y,_;return c=new jt({props:{submit:t[7],download:t[3]}}),{c(){e=w("div"),n=w("h1"),i=O("Result"),r=F(),s=w("abbr"),l=w("img"),a=F(),u=w("p"),d=O(m),E=F(),z(c.$$.fragment),this.h()},l(M){e=I(M,"DIV",{"data-cy":!0,class:!0});var v=b(e);n=I(v,"H1",{class:!0});var N=b(n);i=V(N,"Result"),N.forEach(p),r=A(v),s=I(v,"ABBR",{title:!0,class:!0});var j=b(s);l=I(j,"IMG",{src:!0,alt:!0,class:!0}),j.forEach(p),a=A(v),u=I(v,"P",{"data-cy":!0,class:!0});var P=b(u);d=V(P,m),P.forEach(p),E=A(v),Y(c.$$.fragment,v),v.forEach(p),this.h()},h(){h(n,"class","text-teal-400 px-1 inline-block mr-2 svelte-r93edu"),He(l.src,o=it)||h(l,"src",o),h(l,"alt","copy-button"),h(l,"class","h-4 cursor-pointer inline mb-1 svelte-r93edu"),h(s,"title","Copy to clipboard"),h(s,"class","svelte-r93edu"),h(u,"data-cy","result"),h(u,"class","h-60 overflow-auto border p-4 whitespace-pre monospace svelte-r93edu"),h(e,"data-cy","result-section"),h(e,"class","svelte-r93edu")},m(M,v){$(M,e,v),g(e,n),g(n,i),g(e,r),g(e,s),g(s,l),g(e,a),g(e,u),g(u,d),g(e,E),k(c,e,null),f=!0,y||(_=J(l,"click",t[6]),y=!0)},p(M,v){(!f||v&1)&&m!==(m=pe(M[0])+"")&&ve(d,m);const N={};v&8&&(N.download=M[3]),c.$set(N)},i(M){f||(S(c.$$.fragment,M),f=!0)},o(M){C(c.$$.fragment,M),f=!1},d(M){M&&p(e),L(c),y=!1,_()}}}function tn(t){let e,n,i,r,s,l,o,a,u,m,d,E,c,f,y,_,M;d=new en({props:{error:t[2],onClick:t[10]}}),c=new Gt({props:{fields:t[0].merge,handleFormInput:t[5],addField:t[8],removeField:t[9],error:t[2]}});let v=!t[2]&&Ue(t);return{c(){e=w("div"),n=w("section"),i=w("form"),r=w("div"),s=w("label"),l=O("Paste template"),o=F(),a=w("textarea"),m=F(),z(d.$$.fragment),E=F(),z(c.$$.fragment),f=F(),v&&v.c(),this.h()},l(N){e=I(N,"DIV",{class:!0});var j=b(e);n=I(j,"SECTION",{"data-cy":!0,class:!0});var P=b(n);i=I(P,"FORM",{class:!0});var U=b(i);r=I(U,"DIV",{"data-cy":!0,class:!0});var D=b(r);s=I(D,"LABEL",{for:!0,class:!0});var Q=b(s);l=V(Q,"Paste template"),Q.forEach(p),o=A(D),a=I(D,"TEXTAREA",{"data-cy":!0,class:!0,id:!0}),b(a).forEach(p),D.forEach(p),m=A(U),Y(d.$$.fragment,U),E=A(U),Y(c.$$.fragment,U),U.forEach(p),f=A(P),v&&v.l(P),P.forEach(p),j.forEach(p),this.h()},h(){h(s,"for","json-input"),h(s,"class","text-teal-400 px-1 svelte-r93edu"),h(a,"data-cy","template-input"),h(a,"class","w-full h-60 monospace border p-4 overflow-auto whitespace-pre resize-none svelte-r93edu"),h(a,"id","json-input"),a.value=u=pe(t[1]),h(r,"data-cy","template-input-section"),h(r,"class","mb-6 svelte-r93edu"),h(i,"class","svelte-r93edu"),h(n,"data-cy","form-container"),h(n,"class","max-w-lg my-4 mx-auto border rounded-xl px-7 py-4 svelte-r93edu"),h(e,"class","shotstack-mergefield-form svelte-r93edu")},m(N,j){$(N,e,j),g(e,n),g(n,i),g(i,r),g(r,s),g(s,l),g(r,o),g(r,a),g(i,m),k(d,i,null),g(i,E),k(c,i,null),g(n,f),v&&v.m(n,null),y=!0,_||(M=J(a,"input",t[12]),_=!0)},p(N,[j]){(!y||j&2&&u!==(u=pe(N[1])))&&(a.value=u);const P={};j&4&&(P.error=N[2]),d.$set(P);const U={};j&1&&(U.fields=N[0].merge),j&4&&(U.error=N[2]),c.$set(U),N[2]?v&&(Ce(),C(v,1,1,()=>{v=null}),je()):v?(v.p(N,j),j&4&&S(v,1)):(v=Ue(N),v.c(),S(v,1),v.m(n,null))},i(N){y||(S(d.$$.fragment,N),S(c.$$.fragment,N),S(v),y=!0)},o(N){C(d.$$.fragment,N),C(c.$$.fragment,N),C(v),y=!1},d(N){N&&p(e),L(d),L(c),v&&v.d(),_=!1,M()}}}function pe(t){return JSON.stringify(t,null,2)}function nn(t){if(typeof window<"u"){const e=new Blob([JSON.stringify(t,null,2)],{type:"text/plain"});return URL.createObjectURL(e)}else return null}function rn(t,e,n){let i,{editTemplateService:r=new Le(yt)}=e,s=r.template,l=r.result,o=null;function a(_){r.setTemplateSource(_),n(1,s=r.template),n(0,l=r.result),n(2,o=r.error)}function u(_,M){r.updateResultMergeFields(_,M),n(0,l=r.result)}function m(){navigator.clipboard.writeText(JSON.stringify(l)),alert("JSON copied to clipboard!")}function d(){r.submit(),window.alert("Form successfully submitted!")}function E(_){r.addMergeField(_),n(1,s=r.template),n(0,l=r.result),n(2,o=r.error)}function c(_){const M=r.getMergeFieldItem(_);r.removeMergeField(M),n(1,s=r.template),n(0,l=r.result),n(2,o=r.error)}function f(){r.setTemplateSource(r.result),n(1,s=r.template),n(0,l=r.result),n(2,o=r.error)}const y=_=>a(_.currentTarget.value);return t.$$set=_=>{"editTemplateService"in _&&n(11,r=_.editTemplateService)},t.$$.update=()=>{t.$$.dirty&1&&n(3,i=nn(l)||"")},[l,s,o,i,a,u,m,d,E,c,f,r,y]}class ln extends B{constructor(e){super(),R(this,e,rn,tn,x,{editTemplateService:11})}}class sn{constructor(e){X(this,"templateService");X(this,"container");this.templateService=new Le(e),this.container=void 0}on(e,n){this.templateService.on(e,n)}off(e,n){this.templateService.off(e,n)}submit(){this.templateService.submit()}renderForm(e){this.container=e,new ln({target:e,props:{editTemplateService:this.templateService}})}renderElements(e,n){const i=this.getInputs();n?n.after(...i):e.append(...i)}display(){this.container&&(this.container.style.display="block")}hide(){this.container&&(this.container.style.display="none")}attach(e){this.remove(),this.container=e,this.renderForm(this.container)}remove(){this.container&&this.container.replaceChildren()}merge(){return this.templateService.result}load(e){this.templateService.setTemplateSource(e)}addField(e,n){this.templateService.addMergeField({find:e,replace:n})}removeField(e){this.templateService.removeMergeField(e)}getField(e){return this.templateService.getMergeFieldItem(e)}getInputs(){const e=document.createElement("div");return this.templateService.template.merge.forEach(n=>new Ye({target:e,props:{find:n.find,replace:n.replace,field:n,handleFormInput:i=>{this.templateService.updateResultMergeFields(i,n)}}})),e.children}}return sn}();
