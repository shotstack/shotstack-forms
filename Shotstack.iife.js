var Shotstack=function(){"use strict";var qt=Object.defineProperty;var Zt=(S,z,G)=>z in S?qt(S,z,{enumerable:!0,configurable:!0,writable:!0,value:G}):S[z]=G;var ee=(S,z,G)=>(Zt(S,typeof z!="symbol"?z+"":z,G),G);function S(){}function z(t){return t()}function G(){return Object.create(null)}function X(t){t.forEach(z)}function me(t){return typeof t=="function"}function Y(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let ie;function Ve(t,e){return ie||(ie=document.createElement("a")),ie.href=e,t===ie.href}function Pe(t){return Object.keys(t).length===0}let se=!1;function He(){se=!0}function Qe(){se=!1}function Je(t,e,n,r){for(;t<e;){const l=t+(e-t>>1);n(l)<=r?t=l+1:e=l}return t}function Ge(t){if(t.hydrate_init)return;t.hydrate_init=!0;let e=t.childNodes;if(t.nodeName==="HEAD"){const a=[];for(let o=0;o<e.length;o++){const _=e[o];_.claim_order!==void 0&&a.push(_)}e=a}const n=new Int32Array(e.length+1),r=new Int32Array(e.length);n[0]=-1;let l=0;for(let a=0;a<e.length;a++){const o=e[a].claim_order,_=(l>0&&e[n[l]].claim_order<=o?l+1:Je(1,l,N=>e[n[N]].claim_order,o))-1;r[a]=n[_]+1;const f=_+1;n[f]=a,l=Math.max(f,l)}const s=[],i=[];let u=e.length-1;for(let a=n[l]+1;a!=0;a=r[a-1]){for(s.push(e[a-1]);u>=a;u--)i.push(e[u]);u--}for(;u>=0;u--)i.push(e[u]);s.reverse(),i.sort((a,o)=>a.claim_order-o.claim_order);for(let a=0,o=0;a<i.length;a++){for(;o<s.length&&i[a].claim_order>=s[o].claim_order;)o++;const _=o<s.length?s[o]:null;t.insertBefore(i[a],_)}}function m(t,e){if(se){for(Ge(t),(t.actual_end_child===void 0||t.actual_end_child!==null&&t.actual_end_child.parentNode!==t)&&(t.actual_end_child=t.firstChild);t.actual_end_child!==null&&t.actual_end_child.claim_order===void 0;)t.actual_end_child=t.actual_end_child.nextSibling;e!==t.actual_end_child?(e.claim_order!==void 0||e.parentNode!==t)&&t.insertBefore(e,t.actual_end_child):t.actual_end_child=e.nextSibling}else(e.parentNode!==t||e.nextSibling!==null)&&t.appendChild(e)}function F(t,e,n){se&&!n?m(t,e):(e.parentNode!==t||e.nextSibling!=n)&&t.insertBefore(e,n||null)}function p(t){t.parentNode.removeChild(t)}function qe(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function M(t){return document.createElement(t)}function te(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function C(t){return document.createTextNode(t)}function A(){return C(" ")}function q(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function Ie(t){return function(e){return e.preventDefault(),t.call(this,e)}}function d(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function E(t){return Array.from(t.childNodes)}function Ze(t){t.claim_info===void 0&&(t.claim_info={last_index:0,total_claimed:0})}function Ne(t,e,n,r,l=!1){Ze(t);const s=(()=>{for(let i=t.claim_info.last_index;i<t.length;i++){const u=t[i];if(e(u)){const a=n(u);return a===void 0?t.splice(i,1):t[i]=a,l||(t.claim_info.last_index=i),u}}for(let i=t.claim_info.last_index-1;i>=0;i--){const u=t[i];if(e(u)){const a=n(u);return a===void 0?t.splice(i,1):t[i]=a,l?a===void 0&&t.claim_info.last_index--:t.claim_info.last_index=i,u}}return r()})();return s.claim_order=t.claim_info.total_claimed,t.claim_info.total_claimed+=1,s}function Te(t,e,n,r){return Ne(t,l=>l.nodeName===e,l=>{const s=[];for(let i=0;i<l.attributes.length;i++){const u=l.attributes[i];n[u.name]||s.push(u.name)}s.forEach(i=>l.removeAttribute(i))},()=>r(e))}function I(t,e,n){return Te(t,e,n,M)}function ue(t,e,n){return Te(t,e,n,te)}function L(t,e){return Ne(t,n=>n.nodeType===3,n=>{const r=""+e;if(n.data.startsWith(r)){if(n.data.length!==r.length)return n.splitText(r.length)}else n.data=r},()=>C(e),!0)}function j(t){return L(t," ")}function ge(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function De(t,e){t.value=e==null?"":e}let pe;function ne(t){pe=t}const re=[],oe=[],ae=[],_e=[],We=Promise.resolve();let ve=!1;function Xe(){ve||(ve=!0,We.then(Se))}function be(t){ae.push(t)}function $e(t){_e.push(t)}const ye=new Set;let ce=0;function Se(){const t=pe;do{for(;ce<re.length;){const e=re[ce];ce++,ne(e),Ke(e.$$)}for(ne(null),re.length=0,ce=0;oe.length;)oe.pop()();for(let e=0;e<ae.length;e+=1){const n=ae[e];ye.has(n)||(ye.add(n),n())}ae.length=0}while(re.length);for(;_e.length;)_e.pop()();ve=!1,ye.clear(),ne(t)}function Ke(t){if(t.fragment!==null){t.update(),X(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(be)}}const fe=new Set;let Z;function we(){Z={r:0,c:[],p:Z}}function Ee(){Z.r||X(Z.c),Z=Z.p}function $(t,e){t&&t.i&&(fe.delete(t),t.i(e))}function x(t,e,n,r){if(t&&t.o){if(fe.has(t))return;fe.add(t),Z.c.push(()=>{fe.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function Ae(t,e,n){const r=t.$$.props[e];r!==void 0&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function R(t){t&&t.c()}function B(t,e){t&&t.l(e)}function O(t,e,n,r){const{fragment:l,on_mount:s,on_destroy:i,after_update:u}=t.$$;l&&l.m(e,n),r||be(()=>{const a=s.map(z).filter(me);i?i.push(...a):X(a),t.$$.on_mount=[]}),u.forEach(be)}function k(t,e){const n=t.$$;n.fragment!==null&&(X(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function et(t,e){t.$$.dirty[0]===-1&&(re.push(t),Xe(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function U(t,e,n,r,l,s,i,u=[-1]){const a=pe;ne(t);const o=t.$$={fragment:null,ctx:null,props:s,update:S,not_equal:l,bound:G(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:G(),dirty:u,skip_bound:!1,root:e.target||a.$$.root};i&&i(o.root);let _=!1;if(o.ctx=n?n(t,e.props||{},(f,N,...c)=>{const b=c.length?c[0]:N;return o.ctx&&l(o.ctx[f],o.ctx[f]=b)&&(!o.skip_bound&&o.bound[f]&&o.bound[f](b),_&&et(t,f)),N}):[],o.update(),_=!0,X(o.before_update),o.fragment=r?r(o.ctx):!1,e.target){if(e.hydrate){He();const f=E(e.target);o.fragment&&o.fragment.l(f),f.forEach(p)}else o.fragment&&o.fragment.c();e.intro&&$(t.$$.fragment),O(t,e.target,e.anchor,e.customElement),Qe(),Se()}ne(a)}class V{$destroy(){k(this,1),this.$destroy=S}$on(e,n){const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const l=r.indexOf(n);l!==-1&&r.splice(l,1)}}$set(e){this.$$set&&!Pe(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Wt="",Xt="",tt="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MS4yIDUxLjIiIHdpZHRoPSI1MS4yIiBoZWlnaHQ9IjUxLjIiID4KICAgIDxzdmcgd2lkdGg9IjUxLjIiIGhlaWdodD0iNTEuMiIgdmlld0JveD0iMCAwIDUxMiA1MTIiPgogICAgICAgIDxwYXRoCiAgICAgICAgICAgIGQ9Ik01MDIuNiA3MC42M2wtNjEuMjUtNjEuMjVDNDM1LjQgMy4zNzEgNDI3LjIgMCA0MTguNyAwSDI1NS4xYy0zNS4zNSAwLTY0IDI4LjY2LTY0IDY0bC4wMTk1IDI1NkMxOTIgMzU1LjQgMjIwLjcgMzg0IDI1NiAzODRoMTkyYzM1LjIgMCA2NC0yOC44IDY0LTY0VjkzLjI1QzUxMiA4NC43NyA1MDguNiA3Ni42MyA1MDIuNiA3MC42M3pNNDY0IDMyMGMwIDguODM2LTcuMTY0IDE2LTE2IDE2SDI1NS4xYy04LjgzOCAwLTE2LTcuMTY0LTE2LTE2TDIzOS4xIDY0LjEzYzAtOC44MzYgNy4xNjQtMTYgMTYtMTZoMTI4TDM4NCA5NmMwIDE3LjY3IDE0LjMzIDMyIDMyIDMyaDQ3LjFWMzIwek0yNzIgNDQ4YzAgOC44MzYtNy4xNjQgMTYtMTYgMTZINjMuMWMtOC44MzggMC0xNi03LjE2NC0xNi0xNkw0Ny45OCAxOTIuMWMwLTguODM2IDcuMTY0LTE2IDE2LTE2SDE2MFYxMjhINjMuOTljLTM1LjM1IDAtNjQgMjguNjUtNjQgNjRsLjAwOTggMjU2Qy4wMDIgNDgzLjMgMjguNjYgNTEyIDY0IDUxMmgxOTJjMzUuMiAwIDY0LTI4LjggNjQtNjR2LTMyaC00Ny4xTDI3MiA0NDh6IiAvPgogICAgPC9zdmc+Cjwvc3ZnPg==",nt="A 'merge' property is required",rt="Property 'merge' must be an array",lt="A 'find' property is required on every element inside 'merge'",it="Every 'find' property inside 'merge' must be of type string",st="Every 'find' property inside 'merge' must be a string of length equal to or higher than one",ut="A 'replace' property is required on every element inside 'merge'",ot="Unexpected error while parsing template JSON",at="Every element inside the 'merge' should be an object";class H extends Error{constructor(e){super(e)}}function ct(t){return typeof t=="object"}function de(t,e){return t in e}function Me(t,e){return!de(t,e)}function ft(t,e){return de(t,e)&&!(e[t]instanceof Array)}function dt(t,e){return de(t,e)&&typeof e[t]!="string"}function ht(t,e){const n=de(t,e)&&e[t];return!(typeof n=="string"&&n.length>0)}function mt(t){try{const e=JSON.parse(t);if(Me("merge",e))throw new H(nt);if(ft("merge",e))throw new H(rt);const{merge:n}=e,r=gt(n);return{...e,merge:r}}catch(e){throw je(e)}}function gt(t){return t.map(n=>{if(!ct(n))throw new H(at);if(Me("find",n))throw new H(lt);if(Me("replace",n))throw new H(ut);if(dt("find",n))throw new H(it);if(ht("find",n))throw new H(st);return n}).map(({find:n,replace:r})=>({find:n,replace:xe(r)}))}function pt(t){return typeof t=="object"&&t!==null&&"message"in t}function je(t){return t instanceof Error?t:pt(t)?new H(t.message):new H(ot)}function xe(t){return typeof t=="string"?t:JSON.stringify(t)}class Fe{constructor(e){ee(this,"template");ee(this,"_result");ee(this,"_error");ee(this,"handlers");this._error=null,this.template={merge:[]},this._result={merge:[]},this.handlers={change:[],submit:[],error:[this.logger]},this.setTemplateSource(e)}set error(e){const n=this._error&&{...this._error}||null;this._error=e,e!==null&&this.handlers.error.forEach(r=>r(e,n))}get error(){return this._error}set result(e){const n={...this._result};this._result=e,this.handlers.change.forEach(r=>r(e,n))}get result(){return this._result}on(e,n){this.handlers[e].push(n)}off(e,n){this.handlers={...this.handlers,[e]:this.handlers[e].filter(r=>r!==n)}}submit(){if(this.error)throw this.error;this.handlers.submit.forEach(e=>e(this.result))}setTemplateSource(e){try{const n=mt(xe(e));this.template=n,this.result=n,this.error=null}catch(n){const r=je(n);this.error=r}}updateResultMergeFields(e){const{find:n,replace:r}=e,l={find:n,replace:r},s=this.result.merge.map(i=>(i==null?void 0:i.find)===e.find?l:i);return this.result={...this.result,merge:s},s}logger(e){console.error(e)}addMergeField(e){this.setTemplateSource({...this.result,merge:[...this.result.merge,e]})}removeMergeField(e){this.setTemplateSource({...this.result,merge:this.result.merge.filter(n=>n!==e)})}getMergeFieldItem(e){if(Object.keys(e).length===0)return;const n=function(r){let l;for(l in e)if(r[l]!==e[l])return!1;return!0};return this.result.merge.find(n)}}const _t={merge:[{find:"NAME",replace:"world"}],timeline:{tracks:[{clips:[{asset:{type:"title",text:"Hello {{ NAME }}",style:"future"},start:0,length:5}]}]},output:{format:"mp4",resolution:"hd"}};function vt(t){let e,n;return{c(){e=te("svg"),n=te("path"),this.h()},l(r){e=ue(r,"svg",{class:!0,xmlns:!0,viewBox:!0});var l=E(e);n=ue(l,"path",{d:!0}),E(n).forEach(p),l.forEach(p),this.h()},h(){d(n,"d","M13 8V2H7v6H2l8 8 8-8h-5zM0 18h20v2H0v-2z"),d(e,"class","fill-current w-4 h-4 mr-2"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"viewBox","0 0 20 20")},m(r,l){F(r,e,l),m(e,n)},p:S,i:S,o:S,d(r){r&&p(e)}}}function bt(t){return[]}class yt extends V{constructor(e){super(),U(this,e,bt,vt,Y,{})}}function wt(t){let e,n,r,l;return n=new yt({}),{c(){e=M("a"),R(n.$$.fragment),r=C(`
	Download`),this.h()},l(s){e=I(s,"A",{href:!0,download:!0,class:!0});var i=E(e);B(n.$$.fragment,i),r=L(i,`
	Download`),i.forEach(p),this.h()},h(){d(e,"href",t[0]),d(e,"download","result.json"),d(e,"class","bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded inline-flex items-center w-40 justify-center")},m(s,i){F(s,e,i),O(n,e,null),m(e,r),l=!0},p(s,[i]){(!l||i&1)&&d(e,"href",s[0])},i(s){l||($(n.$$.fragment,s),l=!0)},o(s){x(n.$$.fragment,s),l=!1},d(s){s&&p(e),k(n)}}}function Et(t,e,n){let{download:r=""}=e;return t.$$set=l=>{"download"in l&&n(0,r=l.download)},[r]}class Mt extends V{constructor(e){super(),U(this,e,Et,wt,Y,{download:0})}}function It(t){let e,n,r,l;return{c(){e=M("button"),n=C("Submit"),this.h()},l(s){e=I(s,"BUTTON",{class:!0});var i=E(e);n=L(i,"Submit"),i.forEach(p),this.h()},h(){d(e,"class","bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded w-40")},m(s,i){F(s,e,i),m(e,n),r||(l=q(e,"click",function(){me(t[0])&&t[0].apply(this,arguments)}),r=!0)},p(s,[i]){t=s},i:S,o:S,d(s){s&&p(e),r=!1,l()}}}function Nt(t,e,n){let{submit:r}=e;return t.$$set=l=>{"submit"in l&&n(0,r=l.submit)},[r]}class Tt extends V{constructor(e){super(),U(this,e,Nt,It,Y,{submit:0})}}function Dt(t){let e,n,r,l,s;return n=new Mt({props:{download:t[0]}}),l=new Tt({props:{submit:t[1]}}),{c(){e=M("div"),R(n.$$.fragment),r=A(),R(l.$$.fragment),this.h()},l(i){e=I(i,"DIV",{class:!0});var u=E(e);B(n.$$.fragment,u),r=j(u),B(l.$$.fragment,u),u.forEach(p),this.h()},h(){d(e,"class","flex justify-between pt-4")},m(i,u){F(i,e,u),O(n,e,null),m(e,r),O(l,e,null),s=!0},p(i,[u]){const a={};u&1&&(a.download=i[0]),n.$set(a);const o={};u&2&&(o.submit=i[1]),l.$set(o)},i(i){s||($(n.$$.fragment,i),$(l.$$.fragment,i),s=!0)},o(i){x(n.$$.fragment,i),x(l.$$.fragment,i),s=!1},d(i){i&&p(e),k(n),k(l)}}}function $t(t,e,n){let{download:r=""}=e,{submit:l}=e;return t.$$set=s=>{"download"in s&&n(0,r=s.download),"submit"in s&&n(1,l=s.submit)},[r,l]}class St extends V{constructor(e){super(),U(this,e,$t,Dt,Y,{download:0,submit:1})}}function At(t){let e,n,r;return{c(){e=M("input"),this.h()},l(l){e=I(l,"INPUT",{class:!0,type:!0}),this.h()},h(){d(e,"class","border w-full mb-3 pl-2 py-1 text-stone-500"),d(e,"type","text")},m(l,s){F(l,e,s),De(e,t[0]),n||(r=[q(e,"input",t[2]),q(e,"focus",t[3],{once:!0})],n=!0)},p(l,[s]){s&1&&e.value!==l[0]&&De(e,l[0])},i:S,o:S,d(l){l&&p(e),n=!1,X(r)}}}function jt(t,e,n){let{value:r}=e,{onFocus:l}=e;function s(){r=this.value,n(0,r)}const i=u=>l(u.currentTarget);return t.$$set=u=>{"value"in u&&n(0,r=u.value),"onFocus"in u&&n(1,l=u.onFocus)},[r,l,s,i]}class Ce extends V{constructor(e){super(),U(this,e,jt,At,Y,{value:0,onFocus:1})}}function xt(t){let e,n,r,l,s,i,u,a,o,_,f,N,c,b,w,g,v,h;function y(D){t[3](D)}let T={onFocus:Le};t[1]!==void 0&&(T.value=t[1]),u=new Ce({props:T}),oe.push(()=>Ae(u,"value",y));function Q(D){t[4](D)}let J={onFocus:Le};return t[2]!==void 0&&(J.value=t[2]),_=new Ce({props:J}),oe.push(()=>Ae(_,"value",Q)),{c(){e=M("div"),n=M("div"),r=M("h1"),l=C("Add a new merge field"),s=A(),i=M("div"),R(u.$$.fragment),o=A(),R(_.$$.fragment),N=A(),c=M("div"),b=M("button"),w=C("Add"),this.h()},l(D){e=I(D,"DIV",{});var P=E(e);n=I(P,"DIV",{});var W=E(n);r=I(W,"H1",{class:!0});var le=E(r);l=L(le,"Add a new merge field"),le.forEach(p),s=j(W),i=I(W,"DIV",{class:!0});var K=E(i);B(u.$$.fragment,K),o=j(K),B(_.$$.fragment,K),N=j(K),c=I(K,"DIV",{class:!0});var Be=E(c);b=I(Be,"BUTTON",{class:!0});var Ue=E(b);w=L(Ue,"Add"),Ue.forEach(p),Be.forEach(p),K.forEach(p),W.forEach(p),P.forEach(p),this.h()},h(){d(r,"class","text-teal-400 px-1"),d(b,"class","bg-blue-500 hover:bg-blue-700 text-white font-bold py-1 px-3 rounded align-self-end"),d(c,"class","flex flex-row-reverse"),d(i,"class","border p-4 mb-6")},m(D,P){F(D,e,P),m(e,n),m(n,r),m(r,l),m(n,s),m(n,i),O(u,i,null),m(i,o),O(_,i,null),m(i,N),m(i,c),m(c,b),m(b,w),g=!0,v||(h=q(b,"click",Ie(t[5])),v=!0)},p(D,[P]){const W={};!a&&P&2&&(a=!0,W.value=D[1],$e(()=>a=!1)),u.$set(W);const le={};!f&&P&4&&(f=!0,le.value=D[2],$e(()=>f=!1)),_.$set(le)},i(D){g||($(u.$$.fragment,D),$(_.$$.fragment,D),g=!0)},o(D){x(u.$$.fragment,D),x(_.$$.fragment,D),g=!1},d(D){D&&p(e),k(u),k(_),v=!1,h()}}}function Le(t){t.value=""}function Ft(t,e,n){let r="find",l="replace",{addField:s}=e;function i(o){r=o,n(1,r)}function u(o){l=o,n(2,l)}const a=()=>s({find:r,replace:l});return t.$$set=o=>{"addField"in o&&n(0,s=o.addField)},[s,r,l,i,u,a]}class Ct extends V{constructor(e){super(),U(this,e,Ft,xt,Y,{addField:0})}}function Lt(t){let e,n;return{c(){e=te("svg"),n=te("path"),this.h()},l(r){e=ue(r,"svg",{xmlns:!0,viewBox:!0});var l=E(e);n=ue(l,"path",{fill:!0,d:!0}),E(n).forEach(p),l.forEach(p),this.h()},h(){d(n,"fill","white"),d(n,"d","M.293.293a1 1 0 011.414 0L8 6.586 14.293.293a1 1 0 111.414 1.414L9.414 8l6.293 6.293a1 1 0 01-1.414 1.414L8 9.414l-6.293 6.293a1 1 0 01-1.414-1.414L6.586 8 .293 1.707a1 1 0 010-1.414z"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"viewBox","0 0 16 16")},m(r,l){F(r,e,l),m(e,n)},p:S,i:S,o:S,d(r){r&&p(e)}}}function Ot(t){return[]}class kt extends V{constructor(e){super(),U(this,e,Ot,Lt,Y,{})}}function zt(t){let e,n,r,l,s;return n=new kt({}),{c(){e=M("button"),R(n.$$.fragment),this.h()},l(i){e=I(i,"BUTTON",{class:!0});var u=E(e);B(n.$$.fragment,u),u.forEach(p),this.h()},h(){d(e,"class","bg-blue-400 hover:bg-blue-700 text-white font-bold absolute top-0 right-0 rounded-full w-4 h-4 p-1")},m(i,u){F(i,e,u),O(n,e,null),r=!0,l||(s=q(e,"click",Ie(function(){me(t[0])&&t[0].apply(this,arguments)})),l=!0)},p(i,[u]){t=i},i(i){r||($(n.$$.fragment,i),r=!0)},o(i){x(n.$$.fragment,i),r=!1},d(i){i&&p(e),k(n),l=!1,s()}}}function Yt(t,e,n){let{onClick:r}=e;return t.$$set=l=>{"onClick"in l&&n(0,r=l.onClick)},[r]}class Rt extends V{constructor(e){super(),U(this,e,Yt,zt,Y,{onClick:0})}}function Oe(t,e,n){const r=t.slice();return r[6]=e[n],r}function ke(t){let e,n,r=t[6].find+"",l,s,i,u,a,o,_,f,N,c,b,w;function g(...h){return t[4](t[6],...h)}function v(){return t[5](t[6])}return f=new Rt({props:{onClick:v}}),{c(){e=M("div"),n=M("label"),l=C(r),i=A(),u=M("input"),_=A(),R(f.$$.fragment),N=A(),this.h()},l(h){e=I(h,"DIV",{"data-cy":!0,class:!0});var y=E(e);n=I(y,"LABEL",{for:!0,class:!0});var T=E(n);l=L(T,r),T.forEach(p),i=j(y),u=I(y,"INPUT",{class:!0,id:!0,type:!0}),_=j(y),B(f.$$.fragment,y),N=j(y),y.forEach(p),this.h()},h(){d(n,"for",s=t[6].find),d(n,"class","block mb-2 monospace"),d(u,"class","border w-full mb-3 pl-2 py-1 text-stone-500"),d(u,"id",a=t[6].find),d(u,"type","text"),u.value=o=t[6].replace,d(e,"data-cy","label-input"),d(e,"class","relative")},m(h,y){F(h,e,y),m(e,n),m(n,l),m(e,i),m(e,u),m(e,_),O(f,e,null),m(e,N),c=!0,b||(w=q(u,"input",g),b=!0)},p(h,y){t=h,(!c||y&1)&&r!==(r=t[6].find+"")&&ge(l,r),(!c||y&1&&s!==(s=t[6].find))&&d(n,"for",s),(!c||y&1&&a!==(a=t[6].find))&&d(u,"id",a),(!c||y&1&&o!==(o=t[6].replace)&&u.value!==o)&&(u.value=o);const T={};y&9&&(T.onClick=v),f.$set(T)},i(h){c||($(f.$$.fragment,h),c=!0)},o(h){x(f.$$.fragment,h),c=!1},d(h){h&&p(e),k(f),b=!1,w()}}}function Bt(t){let e,n,r,l,s,i,u,a,o,_=t[0],f=[];for(let c=0;c<_.length;c+=1)f[c]=ke(Oe(t,_,c));const N=c=>x(f[c],1,1,()=>{f[c]=null});return a=new Ct({props:{addField:t[2]}}),{c(){e=M("div"),n=M("div"),r=M("h1"),l=C("Modify Merge Values"),s=A(),i=M("div");for(let c=0;c<f.length;c+=1)f[c].c();u=A(),R(a.$$.fragment),this.h()},l(c){e=I(c,"DIV",{});var b=E(e);n=I(b,"DIV",{"data-cy":!0});var w=E(n);r=I(w,"H1",{class:!0});var g=E(r);l=L(g,"Modify Merge Values"),g.forEach(p),s=j(w),i=I(w,"DIV",{class:!0});var v=E(i);for(let h=0;h<f.length;h+=1)f[h].l(v);v.forEach(p),w.forEach(p),u=j(b),B(a.$$.fragment,b),b.forEach(p),this.h()},h(){d(r,"class","text-teal-400 px-1"),d(i,"class","border p-4 mb-6"),d(n,"data-cy","merge-fields-input-section")},m(c,b){F(c,e,b),m(e,n),m(n,r),m(r,l),m(n,s),m(n,i);for(let w=0;w<f.length;w+=1)f[w].m(i,null);m(e,u),O(a,e,null),o=!0},p(c,[b]){if(b&11){_=c[0];let g;for(g=0;g<_.length;g+=1){const v=Oe(c,_,g);f[g]?(f[g].p(v,b),$(f[g],1)):(f[g]=ke(v),f[g].c(),$(f[g],1),f[g].m(i,null))}for(we(),g=_.length;g<f.length;g+=1)N(g);Ee()}const w={};b&4&&(w.addField=c[2]),a.$set(w)},i(c){if(!o){for(let b=0;b<_.length;b+=1)$(f[b]);$(a.$$.fragment,c),o=!0}},o(c){f=f.filter(Boolean);for(let b=0;b<f.length;b+=1)x(f[b]);x(a.$$.fragment,c),o=!1},d(c){c&&p(e),qe(f,c),k(a)}}}function Ut(t,e,n){let{fields:r=[]}=e,{handleFormInput:l}=e,{addField:s}=e,{removeField:i}=e;const u=(o,_)=>l({find:o.find,replace:_.currentTarget.value}),a=o=>i(o);return t.$$set=o=>{"fields"in o&&n(0,r=o.fields),"handleFormInput"in o&&n(1,l=o.handleFormInput),"addField"in o&&n(2,s=o.addField),"removeField"in o&&n(3,i=o.removeField)},[r,l,s,i,u,a]}class Vt extends V{constructor(e){super(),U(this,e,Ut,Bt,Y,{fields:0,handleFormInput:1,addField:2,removeField:3})}}const nn="";function ze(t){let e,n,r=t[2].message+"",l;return{c(){e=M("p"),n=M("span"),l=C(r),this.h()},l(s){e=I(s,"P",{"data-cy":!0,class:!0});var i=E(e);n=I(i,"SPAN",{class:!0});var u=E(n);l=L(u,r),u.forEach(p),i.forEach(p),this.h()},h(){d(n,"class","monospace text-orange-900 svelte-r93edu"),d(e,"data-cy","template-input-error"),d(e,"class","bg-rose-200 rounded py-2 px-4 svelte-r93edu")},m(s,i){F(s,e,i),m(e,n),m(n,l)},p(s,i){i&4&&r!==(r=s[2].message+"")&&ge(l,r)},d(s){s&&p(e)}}}function Ye(t){let e,n;return e=new Vt({props:{fields:t[1].merge,handleFormInput:t[5],addField:t[8],removeField:t[9]}}),{c(){R(e.$$.fragment)},l(r){B(e.$$.fragment,r)},m(r,l){O(e,r,l),n=!0},p(r,l){const s={};l&2&&(s.fields=r[1].merge),e.$set(s)},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){x(e.$$.fragment,r),n=!1},d(r){k(e,r)}}}function Re(t){let e,n,r,l,s,i,u,a,o,_=he(t[0])+"",f,N,c,b,w,g;return c=new St({props:{submit:t[7],download:t[3]}}),{c(){e=M("div"),n=M("h1"),r=C("Result"),l=A(),s=M("abbr"),i=M("img"),a=A(),o=M("p"),f=C(_),N=A(),R(c.$$.fragment),this.h()},l(v){e=I(v,"DIV",{"data-cy":!0,class:!0});var h=E(e);n=I(h,"H1",{class:!0});var y=E(n);r=L(y,"Result"),y.forEach(p),l=j(h),s=I(h,"ABBR",{title:!0,class:!0});var T=E(s);i=I(T,"IMG",{src:!0,alt:!0,class:!0}),T.forEach(p),a=j(h),o=I(h,"P",{"data-cy":!0,class:!0});var Q=E(o);f=L(Q,_),Q.forEach(p),N=j(h),B(c.$$.fragment,h),h.forEach(p),this.h()},h(){d(n,"class","text-teal-400 px-1 inline-block mr-2 svelte-r93edu"),Ve(i.src,u=tt)||d(i,"src",u),d(i,"alt","copy-button"),d(i,"class","h-4 cursor-pointer inline mb-1 svelte-r93edu"),d(s,"title","Copy to clipboard"),d(s,"class","svelte-r93edu"),d(o,"data-cy","result"),d(o,"class","h-60 overflow-auto border p-4 whitespace-pre monospace svelte-r93edu"),d(e,"data-cy","result-section"),d(e,"class","svelte-r93edu")},m(v,h){F(v,e,h),m(e,n),m(n,r),m(e,l),m(e,s),m(s,i),m(e,a),m(e,o),m(o,f),m(e,N),O(c,e,null),b=!0,w||(g=q(i,"click",t[6]),w=!0)},p(v,h){(!b||h&1)&&_!==(_=he(v[0])+"")&&ge(f,_);const y={};h&8&&(y.download=v[3]),c.$set(y)},i(v){b||($(c.$$.fragment,v),b=!0)},o(v){x(c.$$.fragment,v),b=!1},d(v){v&&p(e),k(c),w=!1,g()}}}function Pt(t){let e,n,r,l,s,i,u,a,o,_,f,N,c,b,w,g=t[2]&&ze(t),v=!t[2]&&Ye(t),h=!t[2]&&Re(t);return{c(){e=M("div"),n=M("section"),r=M("form"),l=M("div"),s=M("label"),i=C("Paste template"),u=A(),a=M("textarea"),_=A(),g&&g.c(),f=A(),v&&v.c(),N=A(),h&&h.c(),this.h()},l(y){e=I(y,"DIV",{class:!0});var T=E(e);n=I(T,"SECTION",{"data-cy":!0,class:!0});var Q=E(n);r=I(Q,"FORM",{class:!0});var J=E(r);l=I(J,"DIV",{"data-cy":!0,class:!0});var D=E(l);s=I(D,"LABEL",{for:!0,class:!0});var P=E(s);i=L(P,"Paste template"),P.forEach(p),u=j(D),a=I(D,"TEXTAREA",{"data-cy":!0,class:!0,id:!0}),E(a).forEach(p),D.forEach(p),_=j(J),g&&g.l(J),f=j(J),v&&v.l(J),J.forEach(p),N=j(Q),h&&h.l(Q),Q.forEach(p),T.forEach(p),this.h()},h(){d(s,"for","json-input"),d(s,"class","text-teal-400 px-1 svelte-r93edu"),d(a,"data-cy","template-input"),d(a,"class","w-full h-60 monospace border p-4 overflow-auto whitespace-pre resize-none svelte-r93edu"),d(a,"id","json-input"),a.value=o=he(t[1]),d(l,"data-cy","template-input-section"),d(l,"class","mb-6 svelte-r93edu"),d(r,"class","svelte-r93edu"),d(n,"data-cy","form-container"),d(n,"class","max-w-lg my-4 mx-auto border rounded-xl px-7 py-4 svelte-r93edu"),d(e,"class","shotstack-mergefield-form svelte-r93edu")},m(y,T){F(y,e,T),m(e,n),m(n,r),m(r,l),m(l,s),m(s,i),m(l,u),m(l,a),m(r,_),g&&g.m(r,null),m(r,f),v&&v.m(r,null),m(n,N),h&&h.m(n,null),c=!0,b||(w=q(a,"input",t[11]),b=!0)},p(y,[T]){(!c||T&2&&o!==(o=he(y[1])))&&(a.value=o),y[2]?g?g.p(y,T):(g=ze(y),g.c(),g.m(r,f)):g&&(g.d(1),g=null),y[2]?v&&(we(),x(v,1,1,()=>{v=null}),Ee()):v?(v.p(y,T),T&4&&$(v,1)):(v=Ye(y),v.c(),$(v,1),v.m(r,null)),y[2]?h&&(we(),x(h,1,1,()=>{h=null}),Ee()):h?(h.p(y,T),T&4&&$(h,1)):(h=Re(y),h.c(),$(h,1),h.m(n,null))},i(y){c||($(v),$(h),c=!0)},o(y){x(v),x(h),c=!1},d(y){y&&p(e),g&&g.d(),v&&v.d(),h&&h.d(),b=!1,w()}}}function he(t){return JSON.stringify(t,null,2)}function Ht(t){if(typeof window<"u"){const e=new Blob([JSON.stringify(t,null,2)],{type:"text/plain"});return URL.createObjectURL(e)}else return null}function Qt(t,e,n){let r,{editTemplateService:l=new Fe(_t)}=e,s=l.template,i=l.result,u=null;function a(w){l.setTemplateSource(w),n(1,s=l.template),n(0,i=l.result),n(2,u=l.error)}function o(w){l.updateResultMergeFields(w),n(0,i=l.result)}function _(){navigator.clipboard.writeText(JSON.stringify(i)),alert("JSON copied to clipboard!")}function f(){l.submit(),window.alert("Form successfully submitted!")}function N(w){l.addMergeField(w),n(1,s=l.template),n(0,i=l.result),n(2,u=l.error)}function c(w){const g=l.getMergeFieldItem(w);l.removeMergeField(g),n(1,s=l.template),n(0,i=l.result),n(2,u=l.error)}const b=w=>a(w.currentTarget.value);return t.$$set=w=>{"editTemplateService"in w&&n(10,l=w.editTemplateService)},t.$$.update=()=>{t.$$.dirty&1&&n(3,r=Ht(i)||"")},[i,s,u,r,a,o,_,f,N,c,l,b]}class Jt extends V{constructor(e){super(),U(this,e,Qt,Pt,Y,{editTemplateService:10})}}class Gt{constructor(e,n=document.querySelector("#shotstack-form-field")){ee(this,"templateService");this.containerElement=n,this.templateService=new Fe(e),this.initialize()}on(e,n){this.templateService.on(e,n)}off(e,n){this.templateService.off(e,n)}submit(){this.templateService.submit()}initialize(){!this.containerElement||this.containerElement&&this.render(this.containerElement)}render(e){new Jt({target:e,props:{editTemplateService:this.templateService}})}display(){!this.containerElement||(this.containerElement.style.display="block")}hide(){!this.containerElement||(this.containerElement.style.display="none")}attach(e){this.remove(),this.containerElement=e,this.render(this.containerElement)}remove(){!this.containerElement||this.containerElement.replaceChildren()}get container(){if(!!this.containerElement)return this.containerElement}merge(){return this.templateService.result}load(e){this.templateService.setTemplateSource(e)}addField(e,n){this.templateService.addMergeField({find:e,replace:n})}removeField(e){this.templateService.removeMergeField(e)}getField(e){return this.templateService.getMergeFieldItem(e)}}return Gt}();
