var Shotstack=function(){"use strict";var pn=Object.defineProperty;var _n=(I,Q,Z)=>Q in I?pn(I,Q,{enumerable:!0,configurable:!0,writable:!0,value:Z}):I[Q]=Z;var K=(I,Q,Z)=>(_n(I,typeof Q!="symbol"?Q+"":Q,Z),Z);function I(){}function Q(t){return t()}function Z(){return Object.create(null)}function ee(t){t.forEach(Q)}function se(t){return typeof t=="function"}function x(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let ue;function Qe(t,e){return ue||(ue=document.createElement("a")),ue.href=e,t===ue.href}function Je(t){return Object.keys(t).length===0}function Ge(t,...e){if(t==null)return I;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Ne(t,e,n){t.$$.on_destroy.push(Ge(e,n))}let oe=!1;function qe(){oe=!0}function Ze(){oe=!1}function We(t,e,n,i){for(;t<e;){const r=t+(e-t>>1);n(r)<=i?t=r+1:e=r}return t}function Xe(t){if(t.hydrate_init)return;t.hydrate_init=!0;let e=t.childNodes;if(t.nodeName==="HEAD"){const a=[];for(let o=0;o<e.length;o++){const d=e[o];d.claim_order!==void 0&&a.push(d)}e=a}const n=new Int32Array(e.length+1),i=new Int32Array(e.length);n[0]=-1;let r=0;for(let a=0;a<e.length;a++){const o=e[a].claim_order,d=(r>0&&e[n[r]].claim_order<=o?r+1:We(1,r,M=>e[n[M]].claim_order,o))-1;i[a]=n[d]+1;const c=d+1;n[c]=a,r=Math.max(c,r)}const s=[],l=[];let u=e.length-1;for(let a=n[r]+1;a!=0;a=i[a-1]){for(s.push(e[a-1]);u>=a;u--)l.push(e[u]);u--}for(;u>=0;u--)l.push(e[u]);s.reverse(),l.sort((a,o)=>a.claim_order-o.claim_order);for(let a=0,o=0;a<l.length;a++){for(;o<s.length&&l[a].claim_order>=s[o].claim_order;)o++;const d=o<s.length?s[o]:null;t.insertBefore(l[a],d)}}function m(t,e){if(oe){for(Xe(t),(t.actual_end_child===void 0||t.actual_end_child!==null&&t.actual_end_child.parentNode!==t)&&(t.actual_end_child=t.firstChild);t.actual_end_child!==null&&t.actual_end_child.claim_order===void 0;)t.actual_end_child=t.actual_end_child.nextSibling;e!==t.actual_end_child?(e.claim_order!==void 0||e.parentNode!==t)&&t.insertBefore(e,t.actual_end_child):t.actual_end_child=e.nextSibling}else(e.parentNode!==t||e.nextSibling!==null)&&t.appendChild(e)}function k(t,e,n){oe&&!n?m(t,e):(e.parentNode!==t||e.nextSibling!=n)&&t.insertBefore(e,n||null)}function g(t){t.parentNode.removeChild(t)}function Ke(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function v(t){return document.createElement(t)}function re(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function B(t){return document.createTextNode(t)}function S(){return B(" ")}function J(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function _e(t){return function(e){return e.preventDefault(),t.call(this,e)}}function f(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function b(t){return Array.from(t.childNodes)}function et(t){t.claim_info===void 0&&(t.claim_info={last_index:0,total_claimed:0})}function Te(t,e,n,i,r=!1){et(t);const s=(()=>{for(let l=t.claim_info.last_index;l<t.length;l++){const u=t[l];if(e(u)){const a=n(u);return a===void 0?t.splice(l,1):t[l]=a,r||(t.claim_info.last_index=l),u}}for(let l=t.claim_info.last_index-1;l>=0;l--){const u=t[l];if(e(u)){const a=n(u);return a===void 0?t.splice(l,1):t[l]=a,r?a===void 0&&t.claim_info.last_index--:t.claim_info.last_index=l,u}}return i()})();return s.claim_order=t.claim_info.total_claimed,t.claim_info.total_claimed+=1,s}function $e(t,e,n,i){return Te(t,r=>r.nodeName===e,r=>{const s=[];for(let l=0;l<r.attributes.length;l++){const u=r.attributes[l];n[u.name]||s.push(u.name)}s.forEach(l=>r.removeAttribute(l))},()=>i(e))}function y(t,e,n){return $e(t,e,n,v)}function ae(t,e,n){return $e(t,e,n,re)}function P(t,e){return Te(t,n=>n.nodeType===3,n=>{const i=""+e;if(n.data.startsWith(i)){if(n.data.length!==i.length)return n.splitText(i.length)}else n.data=i},()=>B(e),!0)}function A(t){return P(t," ")}function ve(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function De(t,e){t.value=e==null?"":e}function ce(t,e,n){t.classList[n?"add":"remove"](e)}let be;function ie(t){be=t}const le=[],fe=[],de=[],ye=[],tt=Promise.resolve();let we=!1;function nt(){we||(we=!0,tt.then(Se))}function Ie(t){de.push(t)}function Fe(t){ye.push(t)}const Ee=new Set;let he=0;function Se(){const t=be;do{for(;he<le.length;){const e=le[he];he++,ie(e),rt(e.$$)}for(ie(null),le.length=0,he=0;fe.length;)fe.pop()();for(let e=0;e<de.length;e+=1){const n=de[e];Ee.has(n)||(Ee.add(n),n())}de.length=0}while(le.length);for(;ye.length;)ye.pop()();we=!1,Ee.clear(),ie(t)}function rt(t){if(t.fragment!==null){t.update(),ee(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ie)}}const me=new Set;let X;function Ae(){X={r:0,c:[],p:X}}function Ce(){X.r||ee(X.c),X=X.p}function F(t,e){t&&t.i&&(me.delete(t),t.i(e))}function C(t,e,n,i){if(t&&t.o){if(me.has(t))return;me.add(t),X.c.push(()=>{me.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}function je(t,e,n){const i=t.$$.props[e];i!==void 0&&(t.$$.bound[i]=n,n(t.$$.ctx[i]))}function z(t){t&&t.c()}function Y(t,e){t&&t.l(e)}function L(t,e,n,i){const{fragment:r,on_mount:s,on_destroy:l,after_update:u}=t.$$;r&&r.m(e,n),i||Ie(()=>{const a=s.map(Q).filter(se);l?l.push(...a):ee(a),t.$$.on_mount=[]}),u.forEach(Ie)}function O(t,e){const n=t.$$;n.fragment!==null&&(ee(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function it(t,e){t.$$.dirty[0]===-1&&(le.push(t),nt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function R(t,e,n,i,r,s,l,u=[-1]){const a=be;ie(t);const o=t.$$={fragment:null,ctx:null,props:s,update:I,not_equal:r,bound:Z(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:Z(),dirty:u,skip_bound:!1,root:e.target||a.$$.root};l&&l(o.root);let d=!1;if(o.ctx=n?n(t,e.props||{},(c,M,...h)=>{const p=h.length?h[0]:M;return o.ctx&&r(o.ctx[c],o.ctx[c]=p)&&(!o.skip_bound&&o.bound[c]&&o.bound[c](p),d&&it(t,c)),M}):[],o.update(),d=!0,ee(o.before_update),o.fragment=i?i(o.ctx):!1,e.target){if(e.hydrate){qe();const c=b(e.target);o.fragment&&o.fragment.l(c),c.forEach(g)}else o.fragment&&o.fragment.c();e.intro&&F(t.$$.fragment),L(t,e.target,e.anchor,e.customElement),Ze(),Se()}ie(a)}class U{$destroy(){O(this,1),this.$destroy=I}$on(e,n){const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!Je(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const vn="",bn="",lt="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MS4yIDUxLjIiIHdpZHRoPSI1MS4yIiBoZWlnaHQ9IjUxLjIiID4KICAgIDxzdmcgd2lkdGg9IjUxLjIiIGhlaWdodD0iNTEuMiIgdmlld0JveD0iMCAwIDUxMiA1MTIiPgogICAgICAgIDxwYXRoCiAgICAgICAgICAgIGQ9Ik01MDIuNiA3MC42M2wtNjEuMjUtNjEuMjVDNDM1LjQgMy4zNzEgNDI3LjIgMCA0MTguNyAwSDI1NS4xYy0zNS4zNSAwLTY0IDI4LjY2LTY0IDY0bC4wMTk1IDI1NkMxOTIgMzU1LjQgMjIwLjcgMzg0IDI1NiAzODRoMTkyYzM1LjIgMCA2NC0yOC44IDY0LTY0VjkzLjI1QzUxMiA4NC43NyA1MDguNiA3Ni42MyA1MDIuNiA3MC42M3pNNDY0IDMyMGMwIDguODM2LTcuMTY0IDE2LTE2IDE2SDI1NS4xYy04LjgzOCAwLTE2LTcuMTY0LTE2LTE2TDIzOS4xIDY0LjEzYzAtOC44MzYgNy4xNjQtMTYgMTYtMTZoMTI4TDM4NCA5NmMwIDE3LjY3IDE0LjMzIDMyIDMyIDMyaDQ3LjFWMzIwek0yNzIgNDQ4YzAgOC44MzYtNy4xNjQgMTYtMTYgMTZINjMuMWMtOC44MzggMC0xNi03LjE2NC0xNi0xNkw0Ny45OCAxOTIuMWMwLTguODM2IDcuMTY0LTE2IDE2LTE2SDE2MFYxMjhINjMuOTljLTM1LjM1IDAtNjQgMjguNjUtNjQgNjRsLjAwOTggMjU2Qy4wMDIgNDgzLjMgMjguNjYgNTEyIDY0IDUxMmgxOTJjMzUuMiAwIDY0LTI4LjggNjQtNjR2LTMyaC00Ny4xTDI3MiA0NDh6IiAvPgogICAgPC9zdmc+Cjwvc3ZnPg==",st="A 'merge' property is required",ut="Property 'merge' must be an array",ot="A 'find' property is required on every element inside 'merge'",at="Every 'find' property inside 'merge' must be of type string",ct="Every 'find' property inside 'merge' must be a string of length equal to or higher than one",ft="A 'replace' property is required on every element inside 'merge'",dt="Unexpected error while parsing template JSON",ht="Every element inside the 'merge' should be an object";class q extends Error{constructor(e){super(e)}}function mt(t){return typeof t=="object"}function ge(t,e){return t in e}function Me(t,e){return!ge(t,e)}function gt(t,e){return ge(t,e)&&!(e[t]instanceof Array)}function pt(t,e){return ge(t,e)&&typeof e[t]!="string"}function _t(t,e){const n=ge(t,e)&&e[t];return!(typeof n=="string"&&n.length>0)}function vt(t){try{const e=JSON.parse(t);if(Me("merge",e))throw new q(st);if(gt("merge",e))throw new q(ut);const{merge:n}=e,i=bt(n);return{...e,merge:i}}catch(e){throw ke(e)}}function bt(t){return t.map(n=>{if(!mt(n))throw new q(ht);if(Me("find",n))throw new q(ot);if(Me("replace",n))throw new q(ft);if(pt("find",n))throw new q(at);if(_t("find",n))throw new q(ct);return n}).map(({find:n,replace:i})=>({find:n,replace:xe(i)}))}function yt(t){return typeof t=="object"&&t!==null&&"message"in t}function ke(t){return t instanceof Error?t:yt(t)?new q(t.message):new q(dt)}function xe(t){return typeof t=="string"?t:JSON.stringify(t)}class Le{constructor(e){K(this,"template");K(this,"_result");K(this,"_error");K(this,"handlers");this._error=null,this.template={merge:[]},this._result={merge:[]},this.handlers={change:[],submit:[],error:[this.logger]},this.setTemplateSource(e)}set error(e){const n=this._error&&{...this._error}||null;this._error=e,e!==null&&this.handlers.error.forEach(i=>i(e,n))}get error(){return this._error}set result(e){this._result=e,this.handlers.change.forEach(n=>n(e))}get result(){return this._result}on(e,n){this.handlers[e].push(n)}off(e,n){this.handlers={...this.handlers,[e]:this.handlers[e].filter(i=>i!==n)}}submit(){if(this.error)throw this.error;this.handlers.submit.forEach(e=>e(this.result))}setTemplateSource(e){try{const n=vt(xe(e));this.template=n,this.result=n,this.error=null}catch(n){const i=ke(n);this.error=i}}updateResultMergeFields(e,n){const i=n||this.getMergeFieldItem({find:e.find});return this.result.merge.forEach(r=>{r===i&&(r.find=e.find,r.replace=e.replace)}),this.result={...this.result,merge:this.result.merge},this.result.merge}logger(e){console.error(e)}addMergeField(e){this.setTemplateSource({...this.result,merge:[...this.result.merge,e]})}removeMergeField(e){this.setTemplateSource({...this.result,merge:this.result.merge.filter(n=>n!==e)})}getMergeFieldItem(e){if(Object.keys(e).length===0)return;const n=function(i){let r;for(r in e)if(i[r]!==e[r])return!1;return!0};return this.result.merge.find(n)}getSrcPlaceholders(){if(!this.template.tracks)return[];const e=[];for(let n=0;n<this.template.tracks.length;n++)for(let i=0;i<this.template.tracks[n].clips.length;i++){const r={placeholder:this.template.tracks[n].clips[i].asset.src,asset:this.template.tracks[n].clips[i].asset};r.placeholder.charAt(0)==="{"&&e.push(r)}return e}}const wt={merge:[{find:"NAME",replace:"world"}],timeline:{tracks:[{clips:[{asset:{type:"title",text:"Hello {{ NAME }}",style:"future"},start:0,length:5}]}]},output:{format:"mp4",resolution:"hd"}};function It(t){let e,n;return{c(){e=re("svg"),n=re("path"),this.h()},l(i){e=ae(i,"svg",{class:!0,xmlns:!0,viewBox:!0});var r=b(e);n=ae(r,"path",{d:!0}),b(n).forEach(g),r.forEach(g),this.h()},h(){f(n,"d","M13 8V2H7v6H2l8 8 8-8h-5zM0 18h20v2H0v-2z"),f(e,"class","fill-current w-4 h-4 mr-2"),f(e,"xmlns","http://www.w3.org/2000/svg"),f(e,"viewBox","0 0 20 20")},m(i,r){k(i,e,r),m(e,n)},p:I,i:I,o:I,d(i){i&&g(e)}}}function Et(t){return[]}class Mt extends U{constructor(e){super(),R(this,e,Et,It,x,{})}}function Nt(t){let e,n,i,r;return n=new Mt({}),{c(){e=v("a"),z(n.$$.fragment),i=B(`
	Download`),this.h()},l(s){e=y(s,"A",{href:!0,download:!0,class:!0});var l=b(e);Y(n.$$.fragment,l),i=P(l,`
	Download`),l.forEach(g),this.h()},h(){f(e,"href",t[0]),f(e,"download","result.json"),f(e,"class","bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded inline-flex items-center w-40 justify-center")},m(s,l){k(s,e,l),L(n,e,null),m(e,i),r=!0},p(s,[l]){(!r||l&1)&&f(e,"href",s[0])},i(s){r||(F(n.$$.fragment,s),r=!0)},o(s){C(n.$$.fragment,s),r=!1},d(s){s&&g(e),O(n)}}}function Tt(t,e,n){let{download:i=""}=e;return t.$$set=r=>{"download"in r&&n(0,i=r.download)},[i]}class $t extends U{constructor(e){super(),R(this,e,Tt,Nt,x,{download:0})}}function Dt(t){let e,n,i,r;return{c(){e=v("button"),n=B("Submit"),this.h()},l(s){e=y(s,"BUTTON",{class:!0});var l=b(e);n=P(l,"Submit"),l.forEach(g),this.h()},h(){f(e,"class","bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded w-40")},m(s,l){k(s,e,l),m(e,n),i||(r=J(e,"click",function(){se(t[0])&&t[0].apply(this,arguments)}),i=!0)},p(s,[l]){t=s},i:I,o:I,d(s){s&&g(e),i=!1,r()}}}function Ft(t,e,n){let{submit:i}=e;return t.$$set=r=>{"submit"in r&&n(0,i=r.submit)},[i]}class St extends U{constructor(e){super(),R(this,e,Ft,Dt,x,{submit:0})}}function At(t){let e,n,i,r,s;return n=new $t({props:{download:t[0]}}),r=new St({props:{submit:t[1]}}),{c(){e=v("div"),z(n.$$.fragment),i=S(),z(r.$$.fragment),this.h()},l(l){e=y(l,"DIV",{class:!0});var u=b(e);Y(n.$$.fragment,u),i=A(u),Y(r.$$.fragment,u),u.forEach(g),this.h()},h(){f(e,"class","flex justify-between pt-4")},m(l,u){k(l,e,u),L(n,e,null),m(e,i),L(r,e,null),s=!0},p(l,[u]){const a={};u&1&&(a.download=l[0]),n.$set(a);const o={};u&2&&(o.submit=l[1]),r.$set(o)},i(l){s||(F(n.$$.fragment,l),F(r.$$.fragment,l),s=!0)},o(l){C(n.$$.fragment,l),C(r.$$.fragment,l),s=!1},d(l){l&&g(e),O(n),O(r)}}}function Ct(t,e,n){let{download:i=""}=e,{submit:r}=e;return t.$$set=s=>{"download"in s&&n(0,i=s.download),"submit"in s&&n(1,r=s.submit)},[i,r]}class jt extends U{constructor(e){super(),R(this,e,Ct,At,x,{download:0,submit:1})}}const te=[];function Oe(t,e=I){let n;const i=new Set;function r(u){if(x(t,u)&&(t=u,n)){const a=!te.length;for(const o of i)o[1](),te.push(o,t);if(a){for(let o=0;o<te.length;o+=2)te[o][0](te[o+1]);te.length=0}}}function s(u){r(u(t))}function l(u,a=I){const o=[u,a];return i.add(o),i.size===1&&(n=e(r)||I),u(t),()=>{i.delete(o),i.size===0&&(n(),n=null)}}return{set:r,update:s,subscribe:l}}function kt(t){let e,n,i;return{c(){e=v("input"),this.h()},l(r){e=y(r,"INPUT",{class:!0,type:!0}),this.h()},h(){f(e,"class","border w-full mb-3 pl-2 py-1 text-stone-500"),f(e,"type","text")},m(r,s){k(r,e,s),De(e,t[0]),n||(i=[J(e,"input",t[2]),J(e,"focus",t[3],{once:!0})],n=!0)},p(r,[s]){s&1&&e.value!==r[0]&&De(e,r[0])},i:I,o:I,d(r){r&&g(e),n=!1,ee(i)}}}function xt(t,e,n){let{value:i}=e,{onFocus:r}=e;function s(){i=this.value,n(0,i)}const l=u=>r(u.currentTarget);return t.$$set=u=>{"value"in u&&n(0,i=u.value),"onFocus"in u&&n(1,r=u.onFocus)},[i,r,s,l]}class ze extends U{constructor(e){super(),R(this,e,xt,kt,x,{value:0,onFocus:1})}}function Lt(t){let e,n,i,r,s,l,u,a,o,d,c,M,h,p,E,_,w,D;function G($){t[7]($)}let N={onFocus:t[6]};t[1]!==void 0&&(N.value=t[1]),u=new ze({props:N}),fe.push(()=>je(u,"value",G));function T($){t[9]($)}let V={onFocus:t[8]};return t[2]!==void 0&&(V.value=t[2]),d=new ze({props:V}),fe.push(()=>je(d,"value",T)),{c(){e=v("div"),n=v("div"),i=v("h1"),r=B("Add a new merge field"),s=S(),l=v("div"),z(u.$$.fragment),o=S(),z(d.$$.fragment),M=S(),h=v("div"),p=v("button"),E=B("Add"),this.h()},l($){e=y($,"DIV",{});var j=b(e);n=y(j,"DIV",{});var H=b(n);i=y(H,"H1",{class:!0});var W=b(i);r=P(W,"Add a new merge field"),W.forEach(g),s=A(H),l=y(H,"DIV",{class:!0});var ne=b(l);Y(u.$$.fragment,ne),o=A(ne),Y(d.$$.fragment,ne),M=A(ne),h=y(ne,"DIV",{class:!0});var Pe=b(h);p=y(Pe,"BUTTON",{class:!0});var He=b(p);E=P(He,"Add"),He.forEach(g),Pe.forEach(g),ne.forEach(g),H.forEach(g),j.forEach(g),this.h()},h(){f(i,"class","text-teal-400 px-1"),f(p,"class","bg-blue-500 hover:bg-blue-700 text-white font-bold py-1 px-3 rounded align-self-end"),f(h,"class","flex flex-row-reverse"),f(l,"class","border p-4 mb-6")},m($,j){k($,e,j),m(e,n),m(n,i),m(i,r),m(n,s),m(n,l),L(u,l,null),m(l,o),L(d,l,null),m(l,M),m(l,h),m(h,p),m(p,E),_=!0,w||(D=J(p,"click",_e(t[10])),w=!0)},p($,[j]){const H={};!a&&j&2&&(a=!0,H.value=$[1],Fe(()=>a=!1)),u.$set(H);const W={};!c&&j&4&&(c=!0,W.value=$[2],Fe(()=>c=!1)),d.$set(W)},i($){_||(F(u.$$.fragment,$),F(d.$$.fragment,$),_=!0)},o($){C(u.$$.fragment,$),C(d.$$.fragment,$),_=!1},d($){$&&g(e),O(u),O(d),w=!1,D()}}}function Ot(t,e,n){let i,r,s=Oe("find");Ne(t,s,p=>n(1,i=p));let l=Oe("replace");Ne(t,l,p=>n(2,r=p));let u=p=>p.set(""),{addField:a}=e;const o=()=>u(s);function d(p){i=p,s.set(i)}const c=()=>u(l);function M(p){r=p,l.set(r)}const h=()=>a({find:i,replace:r});return t.$$set=p=>{"addField"in p&&n(0,a=p.addField)},[a,i,r,s,l,u,o,d,c,M,h]}class zt extends U{constructor(e){super(),R(this,e,Ot,Lt,x,{addField:0})}}function Yt(t){let e,n;return{c(){e=re("svg"),n=re("path"),this.h()},l(i){e=ae(i,"svg",{xmlns:!0,viewBox:!0});var r=b(e);n=ae(r,"path",{fill:!0,d:!0}),b(n).forEach(g),r.forEach(g),this.h()},h(){f(n,"fill","white"),f(n,"d","M.293.293a1 1 0 011.414 0L8 6.586 14.293.293a1 1 0 111.414 1.414L9.414 8l6.293 6.293a1 1 0 01-1.414 1.414L8 9.414l-6.293 6.293a1 1 0 01-1.414-1.414L6.586 8 .293 1.707a1 1 0 010-1.414z"),f(e,"xmlns","http://www.w3.org/2000/svg"),f(e,"viewBox","0 0 16 16")},m(i,r){k(i,e,r),m(e,n)},p:I,i:I,o:I,d(i){i&&g(e)}}}function Rt(t){return[]}class Ut extends U{constructor(e){super(),R(this,e,Rt,Yt,x,{})}}function Bt(t){let e,n,i,r,s;return n=new Ut({}),{c(){e=v("button"),z(n.$$.fragment),this.h()},l(l){e=y(l,"BUTTON",{class:!0});var u=b(e);Y(n.$$.fragment,u),u.forEach(g),this.h()},h(){f(e,"class","bg-blue-400 hover:bg-blue-700 text-white font-bold absolute top-0 right-0 rounded-full w-4 h-4 p-1")},m(l,u){k(l,e,u),L(n,e,null),i=!0,r||(s=J(e,"click",_e(function(){se(t[0])&&t[0].apply(this,arguments)})),r=!0)},p(l,[u]){t=l},i(l){i||(F(n.$$.fragment,l),i=!0)},o(l){C(n.$$.fragment,l),i=!1},d(l){l&&g(e),O(n),r=!1,s()}}}function Vt(t,e,n){let{onClick:i}=e;return t.$$set=r=>{"onClick"in r&&n(0,i=r.onClick)},[i]}class Pt extends U{constructor(e){super(),R(this,e,Vt,Bt,x,{onClick:0})}}function Ht(t){let e,n;return{c(){e=v("label"),n=B(t[0]),this.h()},l(i){e=y(i,"LABEL",{for:!0,class:!0});var r=b(e);n=P(r,t[0]),r.forEach(g),this.h()},h(){f(e,"for",t[0]),f(e,"class","block mb-2 monospace")},m(i,r){k(i,e,r),m(e,n)},p(i,[r]){r&1&&ve(n,i[0]),r&1&&f(e,"for",i[0])},i:I,o:I,d(i){i&&g(e)}}}function Qt(t,e,n){let{find:i}=e;return t.$$set=r=>{"find"in r&&n(0,i=r.find)},[i]}class Jt extends U{constructor(e){super(),R(this,e,Qt,Ht,x,{find:0})}}function Gt(t){let e,n,i;return{c(){e=v("input"),this.h()},l(r){e=y(r,"INPUT",{role:!0,class:!0,type:!0,label:!0}),this.h()},h(){f(e,"role","textbox"),f(e,"class","border w-full mb-3 pl-2 py-1 text-stone-500"),f(e,"type","text"),e.value=t[2],f(e,"label",t[1])},m(r,s){k(r,e,s),n||(i=J(e,"input",t[4]),n=!0)},p(r,[s]){s&4&&e.value!==r[2]&&(e.value=r[2]),s&2&&f(e,"label",r[1])},i:I,o:I,d(r){r&&g(e),n=!1,i()}}}function qt(t,e,n){let{field:i}=e,{find:r}=e,{replace:s}=e,{handleFormInput:l}=e;const u=a=>l({find:r,replace:a.currentTarget.value},i);return t.$$set=a=>{"field"in a&&n(0,i=a.field),"find"in a&&n(1,r=a.find),"replace"in a&&n(2,s=a.replace),"handleFormInput"in a&&n(3,l=a.handleFormInput)},[i,r,s,l,u]}class Zt extends U{constructor(e){super(),R(this,e,qt,Gt,x,{field:0,find:1,replace:2,handleFormInput:3})}}function Wt(t){let e,n,i,r,s;return n=new Jt({props:{find:t[0].find}}),r=new Zt({props:{find:t[0].find,replace:t[0].replace,field:t[0],handleFormInput:t[1]}}),{c(){e=v("div"),z(n.$$.fragment),i=S(),z(r.$$.fragment),this.h()},l(l){e=y(l,"DIV",{"data-cy":!0});var u=b(e);Y(n.$$.fragment,u),i=A(u),Y(r.$$.fragment,u),u.forEach(g),this.h()},h(){f(e,"data-cy","label-input")},m(l,u){k(l,e,u),L(n,e,null),m(e,i),L(r,e,null),s=!0},p(l,[u]){const a={};u&1&&(a.find=l[0].find),n.$set(a);const o={};u&1&&(o.find=l[0].find),u&1&&(o.replace=l[0].replace),u&1&&(o.field=l[0]),u&2&&(o.handleFormInput=l[1]),r.$set(o)},i(l){s||(F(n.$$.fragment,l),F(r.$$.fragment,l),s=!0)},o(l){C(n.$$.fragment,l),C(r.$$.fragment,l),s=!1},d(l){l&&g(e),O(n),O(r)}}}function Xt(t,e,n){let{field:i}=e,{handleFormInput:r}=e;return t.$$set=s=>{"field"in s&&n(0,i=s.field),"handleFormInput"in s&&n(1,r=s.handleFormInput)},[i,r]}class Ye extends U{constructor(e){super(),R(this,e,Xt,Wt,x,{field:0,handleFormInput:1})}}function Re(t,e,n){const i=t.slice();return i[6]=e[n],i}function Ue(t){let e,n,i,r,s,l;n=new Ye({props:{field:t[6],handleFormInput:t[2]}});function u(){return t[5](t[6])}return r=new Pt({props:{onClick:u}}),{c(){e=v("div"),z(n.$$.fragment),i=S(),z(r.$$.fragment),s=S(),this.h()},l(a){e=y(a,"DIV",{class:!0});var o=b(e);Y(n.$$.fragment,o),i=A(o),Y(r.$$.fragment,o),s=A(o),o.forEach(g),this.h()},h(){f(e,"class","relative")},m(a,o){k(a,e,o),L(n,e,null),m(e,i),L(r,e,null),m(e,s),l=!0},p(a,o){t=a;const d={};o&2&&(d.field=t[6]),o&4&&(d.handleFormInput=t[2]),n.$set(d);const c={};o&18&&(c.onClick=u),r.$set(c)},i(a){l||(F(n.$$.fragment,a),F(r.$$.fragment,a),l=!0)},o(a){C(n.$$.fragment,a),C(r.$$.fragment,a),l=!1},d(a){a&&g(e),O(n),O(r)}}}function Kt(t){let e,n,i,r,s,l,u,a,o,d=t[1],c=[];for(let h=0;h<d.length;h+=1)c[h]=Ue(Re(t,d,h));const M=h=>C(c[h],1,1,()=>{c[h]=null});return a=new zt({props:{addField:t[3]}}),{c(){e=v("div"),n=v("div"),i=v("h1"),r=B("Modify Merge Values"),s=S(),l=v("div");for(let h=0;h<c.length;h+=1)c[h].c();u=S(),z(a.$$.fragment),this.h()},l(h){e=y(h,"DIV",{});var p=b(e);n=y(p,"DIV",{"data-cy":!0});var E=b(n);i=y(E,"H1",{class:!0});var _=b(i);r=P(_,"Modify Merge Values"),_.forEach(g),s=A(E),l=y(E,"DIV",{class:!0});var w=b(l);for(let D=0;D<c.length;D+=1)c[D].l(w);w.forEach(g),E.forEach(g),u=A(p),Y(a.$$.fragment,p),p.forEach(g),this.h()},h(){f(i,"class","text-teal-400 px-1"),f(l,"class","border p-4 mb-6"),f(n,"data-cy","merge-fields-input-section"),ce(e,"hidden",t[0])},m(h,p){k(h,e,p),m(e,n),m(n,i),m(i,r),m(n,s),m(n,l);for(let E=0;E<c.length;E+=1)c[E].m(l,null);m(e,u),L(a,e,null),o=!0},p(h,[p]){if(p&22){d=h[1];let _;for(_=0;_<d.length;_+=1){const w=Re(h,d,_);c[_]?(c[_].p(w,p),F(c[_],1)):(c[_]=Ue(w),c[_].c(),F(c[_],1),c[_].m(l,null))}for(Ae(),_=d.length;_<c.length;_+=1)M(_);Ce()}const E={};p&8&&(E.addField=h[3]),a.$set(E),(!o||p&1)&&ce(e,"hidden",h[0])},i(h){if(!o){for(let p=0;p<d.length;p+=1)F(c[p]);F(a.$$.fragment,h),o=!0}},o(h){c=c.filter(Boolean);for(let p=0;p<c.length;p+=1)C(c[p]);C(a.$$.fragment,h),o=!1},d(h){h&&g(e),Ke(c,h),O(a)}}}function en(t,e,n){let{error:i}=e,{fields:r=[]}=e,{handleFormInput:s}=e,{addField:l}=e,{removeField:u}=e;const a=o=>u(o);return t.$$set=o=>{"error"in o&&n(0,i=o.error),"fields"in o&&n(1,r=o.fields),"handleFormInput"in o&&n(2,s=o.handleFormInput),"addField"in o&&n(3,l=o.addField),"removeField"in o&&n(4,u=o.removeField)},[i,r,s,l,u,a]}class tn extends U{constructor(e){super(),R(this,e,en,Kt,x,{error:0,fields:1,handleFormInput:2,addField:3,removeField:4})}}function nn(t){let e,n,i,r;return{c(){e=v("button"),n=B("Reset"),this.h()},l(s){e=y(s,"BUTTON",{class:!0});var l=b(e);n=P(l,"Reset"),l.forEach(g),this.h()},h(){f(e,"class","bg-blue-500 hover:bg-blue-700 text-white font-bold py-1 px-3 rounded align-self-end")},m(s,l){k(s,e,l),m(e,n),i||(r=J(e,"click",_e(function(){se(t[0])&&t[0].apply(this,arguments)})),i=!0)},p(s,[l]){t=s},i:I,o:I,d(s){s&&g(e),i=!1,r()}}}function rn(t,e,n){let{onClick:i}=e;return t.$$set=r=>{"onClick"in r&&n(0,i=r.onClick)},[i]}class ln extends U{constructor(e){super(),R(this,e,rn,nn,x,{onClick:0})}}function sn(t){let e,n,i,r,s,l,u,a;return u=new ln({props:{onClick:t[0]}}),{c(){e=v("div"),n=v("p"),i=v("span"),r=B(t[2]),s=S(),l=v("div"),z(u.$$.fragment),this.h()},l(o){e=y(o,"DIV",{});var d=b(e);n=y(d,"P",{"data-cy":!0,class:!0});var c=b(n);i=y(c,"SPAN",{class:!0});var M=b(i);r=P(M,t[2]),M.forEach(g),c.forEach(g),s=A(d),l=y(d,"DIV",{class:!0});var h=b(l);Y(u.$$.fragment,h),h.forEach(g),d.forEach(g),this.h()},h(){f(i,"class","monospace text-orange-900"),f(n,"data-cy","template-input-error"),f(n,"class","bg-rose-200 rounded py-2 my-4 px-4"),f(l,"class","flex flex-row-reverse "),ce(e,"hidden",!t[1])},m(o,d){k(o,e,d),m(e,n),m(n,i),m(i,r),m(e,s),m(e,l),L(u,l,null),a=!0},p(o,[d]){(!a||d&4)&&ve(r,o[2]);const c={};d&1&&(c.onClick=o[0]),u.$set(c),(!a||d&2)&&ce(e,"hidden",!o[1])},i(o){a||(F(u.$$.fragment,o),a=!0)},o(o){C(u.$$.fragment,o),a=!1},d(o){o&&g(e),O(u)}}}function un(t,e,n){let i,{onClick:r}=e,{error:s}=e;return t.$$set=l=>{"onClick"in l&&n(0,r=l.onClick),"error"in l&&n(1,s=l.error)},t.$$.update=()=>{t.$$.dirty&2&&n(2,i=s&&s.message||"")},[r,s,i]}class on extends U{constructor(e){super(),R(this,e,un,sn,x,{onClick:0,error:1})}}function an(t){let e,n,i,r,s,l,u,a,o;return{c(){e=v("div"),n=v("label"),i=B("Upload src"),r=S(),s=v("input"),l=S(),u=v("input"),this.h()},l(d){e=y(d,"DIV",{"data-cy":!0});var c=b(e);n=y(c,"LABEL",{class:!0,for:!0});var M=b(n);i=P(M,"Upload src"),M.forEach(g),r=A(c),s=y(c,"INPUT",{class:!0,type:!0}),l=A(c),u=y(c,"INPUT",{class:!0,type:!0}),c.forEach(g),this.h()},h(){f(n,"class","block mb-2 monospace"),f(n,"for","input"),f(s,"class","border w-full mb-3 pl-2 py-1 text-stone-500"),f(s,"type","text"),s.value=t[0],s.disabled=!0,f(u,"class","border w-full mb-3 pl-2 py-1 text-stone-500"),f(u,"type","file"),f(e,"data-cy","source-input")},m(d,c){k(d,e,c),m(e,n),m(n,i),m(e,r),m(e,s),m(e,l),m(e,u),a||(o=J(u,"change",t[2]),a=!0)},p(d,[c]){c&1&&s.value!==d[0]&&(s.value=d[0])},i:I,o:I,d(d){d&&g(e),a=!1,o()}}}function cn(t,e,n){let i="";function r(l){var u;!l||n(0,i=((u=l.item(0))==null?void 0:u.name)||"")}return[i,r,l=>r(l.currentTarget.files)]}class Be extends U{constructor(e){super(),R(this,e,cn,an,x,{})}}const En="";function Ve(t){let e,n,i,r,s,l,u,a,o,d=pe(t[0])+"",c,M,h,p,E,_;return h=new jt({props:{submit:t[7],download:t[3]}}),{c(){e=v("div"),n=v("h1"),i=B("Result"),r=S(),s=v("abbr"),l=v("img"),a=S(),o=v("p"),c=B(d),M=S(),z(h.$$.fragment),this.h()},l(w){e=y(w,"DIV",{"data-cy":!0,class:!0});var D=b(e);n=y(D,"H1",{class:!0});var G=b(n);i=P(G,"Result"),G.forEach(g),r=A(D),s=y(D,"ABBR",{title:!0,class:!0});var N=b(s);l=y(N,"IMG",{src:!0,alt:!0,class:!0}),N.forEach(g),a=A(D),o=y(D,"P",{"data-cy":!0,class:!0});var T=b(o);c=P(T,d),T.forEach(g),M=A(D),Y(h.$$.fragment,D),D.forEach(g),this.h()},h(){f(n,"class","text-teal-400 px-1 inline-block mr-2 svelte-r93edu"),Qe(l.src,u=lt)||f(l,"src",u),f(l,"alt","copy-button"),f(l,"class","h-4 cursor-pointer inline mb-1 svelte-r93edu"),f(s,"title","Copy to clipboard"),f(s,"class","svelte-r93edu"),f(o,"data-cy","result"),f(o,"class","h-60 overflow-auto border p-4 whitespace-pre monospace svelte-r93edu"),f(e,"data-cy","result-section"),f(e,"class","svelte-r93edu")},m(w,D){k(w,e,D),m(e,n),m(n,i),m(e,r),m(e,s),m(s,l),m(e,a),m(e,o),m(o,c),m(e,M),L(h,e,null),p=!0,E||(_=J(l,"click",t[6]),E=!0)},p(w,D){(!p||D&1)&&d!==(d=pe(w[0])+"")&&ve(c,d);const G={};D&8&&(G.download=w[3]),h.$set(G)},i(w){p||(F(h.$$.fragment,w),p=!0)},o(w){C(h.$$.fragment,w),p=!1},d(w){w&&g(e),O(h),E=!1,_()}}}function fn(t){let e,n,i,r,s,l,u,a,o,d,c,M,h,p,E,_,w,D,G;c=new on({props:{error:t[2],onClick:t[10]}}),h=new tn({props:{fields:t[0].merge,handleFormInput:t[5],addField:t[8],removeField:t[9],error:t[2]}}),E=new Be({});let N=!t[2]&&Ve(t);return{c(){e=v("div"),n=v("section"),i=v("form"),r=v("div"),s=v("label"),l=B("Paste template"),u=S(),a=v("textarea"),d=S(),z(c.$$.fragment),M=S(),z(h.$$.fragment),p=S(),z(E.$$.fragment),_=S(),N&&N.c(),this.h()},l(T){e=y(T,"DIV",{class:!0});var V=b(e);n=y(V,"SECTION",{"data-cy":!0,class:!0});var $=b(n);i=y($,"FORM",{class:!0});var j=b(i);r=y(j,"DIV",{"data-cy":!0,class:!0});var H=b(r);s=y(H,"LABEL",{for:!0,class:!0});var W=b(s);l=P(W,"Paste template"),W.forEach(g),u=A(H),a=y(H,"TEXTAREA",{"data-cy":!0,class:!0,id:!0}),b(a).forEach(g),H.forEach(g),d=A(j),Y(c.$$.fragment,j),M=A(j),Y(h.$$.fragment,j),p=A(j),Y(E.$$.fragment,j),j.forEach(g),_=A($),N&&N.l($),$.forEach(g),V.forEach(g),this.h()},h(){f(s,"for","json-input"),f(s,"class","text-teal-400 px-1 svelte-r93edu"),f(a,"data-cy","template-input"),f(a,"class","w-full h-60 monospace border p-4 overflow-auto whitespace-pre resize-none svelte-r93edu"),f(a,"id","json-input"),a.value=o=pe(t[1]),f(r,"data-cy","template-input-section"),f(r,"class","mb-6 svelte-r93edu"),f(i,"class","svelte-r93edu"),f(n,"data-cy","form-container"),f(n,"class","max-w-lg my-4 mx-auto border rounded-xl px-7 py-4 svelte-r93edu"),f(e,"class","shotstack-mergefield-form svelte-r93edu")},m(T,V){k(T,e,V),m(e,n),m(n,i),m(i,r),m(r,s),m(s,l),m(r,u),m(r,a),m(i,d),L(c,i,null),m(i,M),L(h,i,null),m(i,p),L(E,i,null),m(n,_),N&&N.m(n,null),w=!0,D||(G=J(a,"input",t[12]),D=!0)},p(T,[V]){(!w||V&2&&o!==(o=pe(T[1])))&&(a.value=o);const $={};V&4&&($.error=T[2]),c.$set($);const j={};V&1&&(j.fields=T[0].merge),V&4&&(j.error=T[2]),h.$set(j),T[2]?N&&(Ae(),C(N,1,1,()=>{N=null}),Ce()):N?(N.p(T,V),V&4&&F(N,1)):(N=Ve(T),N.c(),F(N,1),N.m(n,null))},i(T){w||(F(c.$$.fragment,T),F(h.$$.fragment,T),F(E.$$.fragment,T),F(N),w=!0)},o(T){C(c.$$.fragment,T),C(h.$$.fragment,T),C(E.$$.fragment,T),C(N),w=!1},d(T){T&&g(e),O(c),O(h),O(E),N&&N.d(),D=!1,G()}}}function pe(t){return JSON.stringify(t,null,2)}function dn(t){if(typeof window<"u"){const e=new Blob([JSON.stringify(t,null,2)],{type:"text/plain"});return URL.createObjectURL(e)}else return null}function hn(t,e,n){let i,{editTemplateService:r=new Le(wt)}=e,s=r.template,l=r.result,u=null;function a(_){r.setTemplateSource(_),n(1,s=r.template),n(0,l=r.result),n(2,u=r.error)}function o(_,w){r.updateResultMergeFields(_,w),n(0,l=r.result)}function d(){navigator.clipboard.writeText(JSON.stringify(l)),alert("JSON copied to clipboard!")}function c(){r.submit(),window.alert("Form successfully submitted!")}function M(_){r.addMergeField(_),n(1,s=r.template),n(0,l=r.result),n(2,u=r.error)}function h(_){const w=r.getMergeFieldItem(_);r.removeMergeField(w),n(1,s=r.template),n(0,l=r.result),n(2,u=r.error)}function p(){r.setTemplateSource(r.result),n(1,s=r.template),n(0,l=r.result),n(2,u=r.error)}const E=_=>a(_.currentTarget.value);return t.$$set=_=>{"editTemplateService"in _&&n(11,r=_.editTemplateService)},t.$$.update=()=>{t.$$.dirty&1&&n(3,i=dn(l)||"")},[l,s,u,i,a,o,d,c,M,h,p,r,E]}class mn extends U{constructor(e){super(),R(this,e,hn,fn,x,{editTemplateService:11})}}class gn{constructor(e){K(this,"templateService");K(this,"container");this.templateService=new Le(e),this.container=void 0}on(e,n){this.templateService.on(e,n)}off(e,n){this.templateService.off(e,n)}submit(){this.templateService.submit()}renderForm(e){this.container=e,new mn({target:e,props:{editTemplateService:this.templateService}})}renderElements(e,n){const i=this.getInputs();n?n.after(...i):e.append(...i)}display(){this.container&&(this.container.style.display="block")}hide(){this.container&&(this.container.style.display="none")}attach(e){this.remove(),this.container=e,this.renderForm(this.container)}remove(){this.container&&this.container.replaceChildren()}merge(){return this.templateService.result}load(e){this.templateService.setTemplateSource(e)}addField(e,n){this.templateService.addMergeField({find:e,replace:n})}removeField(e){this.templateService.removeMergeField(e)}getField(e){return this.templateService.getMergeFieldItem(e)}getInputs(){const e=document.createElement("div");return this.templateService.template.merge.forEach(n=>new Ye({target:e,props:{field:n,handleFormInput:i=>{this.templateService.updateResultMergeFields(i,n)}}})),e.children}getInputSource(){const e=document.createElement("div");return new Be({target:e}),e.children}}return gn}();
