var X=Object.defineProperty;var K=(i,e,l)=>e in i?X(i,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):i[e]=l;var B=(i,e,l)=>(K(i,typeof e!="symbol"?e+"":e,l),l);import{S as Q,i as W,s as Y,k as g,q as P,a as O,l as E,m as S,r as I,h as c,c as J,n as h,b as w,F as b,H,A as q,u as C,I as Z,J as $}from"../../chunks/index-16192b9f.js";class x{constructor(e={merge:[]}){B(this,"template");B(this,"result");this.template=e,this.result=e}validateMergeArray(e){return Boolean(e.merge)}setTemplateSource(e){try{const l=JSON.parse(e);if(!this.validateMergeArray(l))throw new Error("No merge fields array was found");return this.template=l,this.result=l,l}catch(l){throw l.message?new Error(l.message):new Error("Error parsing JSON")}}updateResultMergeFields(e){const{find:l,replace:r}=e,t={find:l,replace:r};if(!isNaN(Number(r))&&r.length>0)t.replace=Number(r);else try{t.replace=JSON.parse(r)}catch{t.replace=r}const o=this.result.merge.map(s=>(s==null?void 0:s.find)===e.find?t:s);return this.result={...this.result,merge:o},o}}const ee=[{find:"NAME",replace:"world"}],le={tracks:[{clips:[{asset:{type:"title",text:"Hello {{ NAME }}",style:"future"},start:0,length:5}]}]},te={format:"mp4",resolution:"hd"},se={merge:ee,timeline:le,output:te};function j(i,e,l){const r=i.slice();return r[9]=e[l].find,r[10]=e[l].replace,r}function D(i){let e,l,r;return{c(){e=g("p"),l=g("span"),r=P(i[2]),this.h()},l(t){e=E(t,"P",{class:!0});var o=S(e);l=E(o,"SPAN",{class:!0});var s=S(l);r=I(s,i[2]),s.forEach(c),o.forEach(c),this.h()},h(){h(l,"class","monospace text-orange-900 svelte-u6rap9"),h(e,"class","bg-rose-200 rounded py-2 px-4 svelte-u6rap9")},m(t,o){w(t,e,o),b(e,l),b(l,r)},p(t,o){o&4&&C(r,t[2])},d(t){t&&c(e)}}}function z(i){let e,l,r,t,o=i[0].merge,s=[];for(let a=0;a<o.length;a+=1)s[a]=F(j(i,o,a));return{c(){e=g("h1"),l=P("Modify Merge Values"),r=O(),t=g("div");for(let a=0;a<s.length;a+=1)s[a].c();this.h()},l(a){e=E(a,"H1",{class:!0});var p=S(e);l=I(p,"Modify Merge Values"),p.forEach(c),r=J(a),t=E(a,"DIV",{class:!0});var n=S(t);for(let m=0;m<s.length;m+=1)s[m].l(n);n.forEach(c),this.h()},h(){h(e,"class","text-teal-400 px-1 svelte-u6rap9"),h(t,"class","border p-4 mb-6 svelte-u6rap9")},m(a,p){w(a,e,p),b(e,l),w(a,r,p),w(a,t,p);for(let n=0;n<s.length;n+=1)s[n].m(t,null)},p(a,p){if(p&33){o=a[0].merge;let n;for(n=0;n<o.length;n+=1){const m=j(a,o,n);s[n]?s[n].p(m,p):(s[n]=F(m),s[n].c(),s[n].m(t,null))}for(;n<s.length;n+=1)s[n].d(1);s.length=o.length}},d(a){a&&c(e),a&&c(r),a&&c(t),Z(s,a)}}}function F(i){let e,l="{{ "+i[9]+" }} ",r,t,o,s,a,p,n,m;function T(...f){return i[7](i[9],...f)}return{c(){e=g("label"),r=P(l),o=O(),s=g("input"),this.h()},l(f){e=E(f,"LABEL",{for:!0,class:!0});var u=S(e);r=I(u,l),u.forEach(c),o=J(f),s=E(f,"INPUT",{class:!0,id:!0,type:!0}),this.h()},h(){h(e,"for",t=i[9]),h(e,"class","block mb-2 monospace svelte-u6rap9"),h(s,"class","border w-full mb-3 pl-2 py-1 text-stone-500 svelte-u6rap9"),h(s,"id",a=i[9]),h(s,"type","text"),s.value=p=i[10]},m(f,u){w(f,e,u),b(e,r),w(f,o,u),w(f,s,u),n||(m=H(s,"input",T),n=!0)},p(f,u){i=f,u&1&&l!==(l="{{ "+i[9]+" }} ")&&C(r,l),u&1&&t!==(t=i[9])&&h(e,"for",t),u&1&&a!==(a=i[9])&&h(s,"id",a),u&1&&p!==(p=i[10])&&s.value!==p&&(s.value=p)},d(f){f&&c(e),f&&c(o),f&&c(s),n=!1,m()}}}function G(i){let e,l,r;return{c(){e=g("p"),l=g("span"),r=P(i[3]),this.h()},l(t){e=E(t,"P",{class:!0});var o=S(e);l=E(o,"SPAN",{class:!0});var s=S(l);r=I(s,i[3]),s.forEach(c),o.forEach(c),this.h()},h(){h(l,"class","monospace text-orange-900 svelte-u6rap9"),h(e,"class","bg-rose-200 rounded py-2 px-4 svelte-u6rap9")},m(t,o){w(t,e,o),b(e,l),b(l,r)},p(t,o){o&8&&C(r,t[3])},d(t){t&&c(e)}}}function U(i){let e,l,r,t,o,s,a,p,n=JSON.stringify(i[1],null,2)+"",m,T,f;return{c(){e=g("h1"),l=P("Result"),r=O(),t=g("abbr"),o=g("img"),a=O(),p=g("p"),m=P(n),this.h()},l(u){e=E(u,"H1",{class:!0});var M=S(e);l=I(M,"Result"),M.forEach(c),r=J(u),t=E(u,"ABBR",{title:!0,class:!0});var _=S(t);o=E(_,"IMG",{src:!0,alt:!0,class:!0}),_.forEach(c),a=J(u),p=E(u,"P",{class:!0});var v=S(p);m=I(v,n),v.forEach(c),this.h()},h(){h(e,"class","text-teal-400 px-1 inline-block mr-2 svelte-u6rap9"),$(o.src,s="img/copy-regular.svg")||h(o,"src",s),h(o,"alt","copy-button"),h(o,"class","h-4 cursor-pointer inline mb-1 svelte-u6rap9"),h(t,"title","Copy to clipboard"),h(t,"class","svelte-u6rap9"),h(p,"class","h-60 overflow-auto border p-4 whitespace-pre monospace svelte-u6rap9")},m(u,M){w(u,e,M),b(e,l),w(u,r,M),w(u,t,M),b(t,o),w(u,a,M),w(u,p,M),b(p,m),T||(f=H(o,"click",i[6]),T=!0)},p(u,M){M&2&&n!==(n=JSON.stringify(u[1],null,2)+"")&&C(m,n)},d(u){u&&c(e),u&&c(r),u&&c(t),u&&c(a),u&&c(p),T=!1,f()}}}function re(i){var L;let e,l,r,t,o,s,a,p,n,m,T,f,u,M,_=i[2]&&D(i),v=((L=i[0].merge)==null?void 0:L.length)&&!i[2]&&z(i),y=i[3]&&G(i),N=!i[3]&&!i[2]&&U(i);return{c(){e=g("section"),l=g("form"),r=g("div"),t=g("label"),o=P("Paste template"),s=O(),a=g("textarea"),n=O(),_&&_.c(),m=O(),v&&v.c(),T=O(),y&&y.c(),f=O(),N&&N.c(),this.h()},l(d){e=E(d,"SECTION",{class:!0});var k=S(e);l=E(k,"FORM",{class:!0});var A=S(l);r=E(A,"DIV",{class:!0});var R=S(r);t=E(R,"LABEL",{for:!0,class:!0});var V=S(t);o=I(V,"Paste template"),V.forEach(c),s=J(R),a=E(R,"TEXTAREA",{class:!0,id:!0}),S(a).forEach(c),R.forEach(c),n=J(A),_&&_.l(A),m=J(A),v&&v.l(A),A.forEach(c),T=J(k),y&&y.l(k),f=J(k),N&&N.l(k),k.forEach(c),this.h()},h(){h(t,"for","json-input"),h(t,"class","text-teal-400 px-1 svelte-u6rap9"),h(a,"class","w-full h-60 monospace border p-4 overflow-auto whitespace-pre resize-none svelte-u6rap9"),h(a,"id","json-input"),a.value=p=JSON.stringify(i[0],null,2),h(r,"class","mb-6 svelte-u6rap9"),h(l,"class","svelte-u6rap9"),h(e,"class","max-w-lg my-4 mx-auto border rounded-xl px-7 py-4 svelte-u6rap9")},m(d,k){w(d,e,k),b(e,l),b(l,r),b(r,t),b(t,o),b(r,s),b(r,a),b(l,n),_&&_.m(l,null),b(l,m),v&&v.m(l,null),b(e,T),y&&y.m(e,null),b(e,f),N&&N.m(e,null),u||(M=H(a,"input",i[4]),u=!0)},p(d,[k]){var A;k&1&&p!==(p=JSON.stringify(d[0],null,2))&&(a.value=p),d[2]?_?_.p(d,k):(_=D(d),_.c(),_.m(l,m)):_&&(_.d(1),_=null),((A=d[0].merge)==null?void 0:A.length)&&!d[2]?v?v.p(d,k):(v=z(d),v.c(),v.m(l,null)):v&&(v.d(1),v=null),d[3]?y?y.p(d,k):(y=G(d),y.c(),y.m(e,f)):y&&(y.d(1),y=null),!d[3]&&!d[2]?N?N.p(d,k):(N=U(d),N.c(),N.m(e,null)):N&&(N.d(1),N=null)},i:q,o:q,d(d){d&&c(e),_&&_.d(),v&&v.d(),y&&y.d(),N&&N.d(),u=!1,M()}}}function ae(i,e,l){const r=new x(se);let t=r.template,o=r.result,s,a;function p(f){try{const u=r.setTemplateSource(f.target.value);l(0,t=u),l(1,o=u),l(2,s="")}catch(u){l(2,s=u.message)}}function n(f){try{const u=r.updateResultMergeFields(f);l(1,o={...o,merge:u}),l(3,a="")}catch(u){l(3,a=u.message)}}function m(){navigator.clipboard.writeText(JSON.stringify(o)),alert("JSON copied to clipboard!")}return[t,o,s,a,p,n,m,(f,u)=>n({find:f,replace:u.currentTarget.value})]}class ue extends Q{constructor(e){super(),W(this,e,ae,re,Y,{})}}export{ue as default};
