var X=Object.defineProperty;var K=(a,e,t)=>e in a?X(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var V=(a,e,t)=>(K(a,typeof e!="symbol"?e+"":e,t),t);import{S as Q,i as W,s as Y,k as E,q as I,a as A,l as N,m as k,r as P,h as _,c as O,n,b as J,F as m,H as B,A as L,u as C,I as Z,J as $}from"../../chunks/index-16192b9f.js";class x{constructor(e={merge:[]}){V(this,"template");V(this,"result");this.template=e,this.result=e}validateMergeArray(e){return Boolean(e.merge)}setTemplateSource(e){try{const t=JSON.parse(e);if(!this.validateMergeArray(t))throw new Error("No merge fields array was found");return this.template=t,this.result=t,t}catch(t){throw t.message?new Error(t.message):new Error("Error parsing JSON")}}updateResultMergeFields(e){const{find:t,replace:l}=e,o={find:t,replace:l};if(!isNaN(Number(l))&&l.length>0)o.replace=Number(l);else try{o.replace=JSON.parse(l)}catch{o.replace=l}const s=this.result.merge.map(r=>(r==null?void 0:r.find)===e.find?o:r);return this.result={...this.result,merge:s},s}}const ee=[{find:"NAME",replace:"world"}],te={tracks:[{clips:[{asset:{type:"title",text:"Hello {{ NAME }}",style:"future"},start:0,length:5}]}]},le={format:"mp4",resolution:"hd"},re={merge:ee,timeline:te,output:le};function q(a,e,t){const l=a.slice();return l[9]=e[t].find,l[10]=e[t].replace,l}function j(a){let e,t,l;return{c(){e=E("p"),t=E("span"),l=I(a[2]),this.h()},l(o){e=N(o,"P",{"data-cy":!0,class:!0});var s=k(e);t=N(s,"SPAN",{class:!0});var r=k(t);l=P(r,a[2]),r.forEach(_),s.forEach(_),this.h()},h(){n(t,"class","monospace text-orange-900 svelte-u6rap9"),n(e,"data-cy","template-input-error"),n(e,"class","bg-rose-200 rounded py-2 px-4 svelte-u6rap9")},m(o,s){J(o,e,s),m(e,t),m(t,l)},p(o,s){s&4&&C(l,o[2])},d(o){o&&_(e)}}}function z(a){let e,t,l,o,s,r=a[0].merge,i=[];for(let u=0;u<r.length;u+=1)i[u]=F(q(a,r,u));return{c(){e=E("div"),t=E("h1"),l=I("Modify Merge Values"),o=A(),s=E("div");for(let u=0;u<i.length;u+=1)i[u].c();this.h()},l(u){e=N(u,"DIV",{"data-cy":!0,class:!0});var d=k(e);t=N(d,"H1",{class:!0});var c=k(t);l=P(c,"Modify Merge Values"),c.forEach(_),o=O(d),s=N(d,"DIV",{class:!0});var S=k(s);for(let p=0;p<i.length;p+=1)i[p].l(S);S.forEach(_),d.forEach(_),this.h()},h(){n(t,"class","text-teal-400 px-1 svelte-u6rap9"),n(s,"class","border p-4 mb-6 svelte-u6rap9"),n(e,"data-cy","merge-fields-input-section"),n(e,"class","svelte-u6rap9")},m(u,d){J(u,e,d),m(e,t),m(t,l),m(e,o),m(e,s);for(let c=0;c<i.length;c+=1)i[c].m(s,null)},p(u,d){if(d&33){r=u[0].merge;let c;for(c=0;c<r.length;c+=1){const S=q(u,r,c);i[c]?i[c].p(S,d):(i[c]=F(S),i[c].c(),i[c].m(s,null))}for(;c<i.length;c+=1)i[c].d(1);i.length=r.length}},d(u){u&&_(e),Z(i,u)}}}function F(a){let e,t="{{ "+a[9]+" }} ",l,o,s,r,i,u,d,c;function S(...p){return a[7](a[9],...p)}return{c(){e=E("label"),l=I(t),s=A(),r=E("input"),this.h()},l(p){e=N(p,"LABEL",{for:!0,class:!0});var f=k(e);l=P(f,t),f.forEach(_),s=O(p),r=N(p,"INPUT",{class:!0,id:!0,type:!0}),this.h()},h(){n(e,"for",o=a[9]),n(e,"class","block mb-2 monospace svelte-u6rap9"),n(r,"class","border w-full mb-3 pl-2 py-1 text-stone-500 svelte-u6rap9"),n(r,"id",i=a[9]),n(r,"type","text"),r.value=u=a[10]},m(p,f){J(p,e,f),m(e,l),J(p,s,f),J(p,r,f),d||(c=B(r,"input",S),d=!0)},p(p,f){a=p,f&1&&t!==(t="{{ "+a[9]+" }} ")&&C(l,t),f&1&&o!==(o=a[9])&&n(e,"for",o),f&1&&i!==(i=a[9])&&n(r,"id",i),f&1&&u!==(u=a[10])&&r.value!==u&&(r.value=u)},d(p){p&&_(e),p&&_(s),p&&_(r),d=!1,c()}}}function G(a){let e,t,l;return{c(){e=E("p"),t=E("span"),l=I(a[3]),this.h()},l(o){e=N(o,"P",{"data-cy":!0,class:!0});var s=k(e);t=N(s,"SPAN",{class:!0});var r=k(t);l=P(r,a[3]),r.forEach(_),s.forEach(_),this.h()},h(){n(t,"class","monospace text-orange-900 svelte-u6rap9"),n(e,"data-cy","merge-fields-input-error"),n(e,"class","bg-rose-200 rounded py-2 px-4 svelte-u6rap9")},m(o,s){J(o,e,s),m(e,t),m(t,l)},p(o,s){s&8&&C(l,o[3])},d(o){o&&_(e)}}}function U(a){let e,t,l,o,s,r,i,u,d,c=JSON.stringify(a[1],null,2)+"",S,p,f;return{c(){e=E("div"),t=E("h1"),l=I("Result"),o=A(),s=E("abbr"),r=E("img"),u=A(),d=E("p"),S=I(c),this.h()},l(T){e=N(T,"DIV",{"data-cy":!0,class:!0});var h=k(e);t=N(h,"H1",{class:!0});var g=k(t);l=P(g,"Result"),g.forEach(_),o=O(h),s=N(h,"ABBR",{title:!0,class:!0});var b=k(s);r=N(b,"IMG",{src:!0,alt:!0,class:!0}),b.forEach(_),u=O(h),d=N(h,"P",{class:!0});var y=k(d);S=P(y,c),y.forEach(_),h.forEach(_),this.h()},h(){n(t,"class","text-teal-400 px-1 inline-block mr-2 svelte-u6rap9"),$(r.src,i="img/copy-regular.svg")||n(r,"src",i),n(r,"alt","copy-button"),n(r,"class","h-4 cursor-pointer inline mb-1 svelte-u6rap9"),n(s,"title","Copy to clipboard"),n(s,"class","svelte-u6rap9"),n(d,"class","h-60 overflow-auto border p-4 whitespace-pre monospace svelte-u6rap9"),n(e,"data-cy","result-section"),n(e,"class","svelte-u6rap9")},m(T,h){J(T,e,h),m(e,t),m(t,l),m(e,o),m(e,s),m(s,r),m(e,u),m(e,d),m(d,S),p||(f=B(r,"click",a[6]),p=!0)},p(T,h){h&2&&c!==(c=JSON.stringify(T[1],null,2)+"")&&C(S,c)},d(T){T&&_(e),p=!1,f()}}}function ae(a){var D;let e,t,l,o,s,r,i,u,d,c,S,p,f,T,h=a[2]&&j(a),g=((D=a[0].merge)==null?void 0:D.length)&&!a[2]&&z(a),b=a[3]&&G(a),y=!a[3]&&!a[2]&&U(a);return{c(){e=E("section"),t=E("form"),l=E("div"),o=E("label"),s=I("Paste template"),r=A(),i=E("textarea"),d=A(),h&&h.c(),c=A(),g&&g.c(),S=A(),b&&b.c(),p=A(),y&&y.c(),this.h()},l(v){e=N(v,"SECTION",{"data-cy":!0,class:!0});var w=k(e);t=N(w,"FORM",{class:!0});var M=k(t);l=N(M,"DIV",{"data-cy":!0,class:!0});var R=k(l);o=N(R,"LABEL",{for:!0,class:!0});var H=k(o);s=P(H,"Paste template"),H.forEach(_),r=O(R),i=N(R,"TEXTAREA",{"data-cy":!0,class:!0,id:!0}),k(i).forEach(_),R.forEach(_),d=O(M),h&&h.l(M),c=O(M),g&&g.l(M),S=O(M),b&&b.l(M),M.forEach(_),p=O(w),y&&y.l(w),w.forEach(_),this.h()},h(){n(o,"for","json-input"),n(o,"class","text-teal-400 px-1 svelte-u6rap9"),n(i,"data-cy","template-input"),n(i,"class","w-full h-60 monospace border p-4 overflow-auto whitespace-pre resize-none svelte-u6rap9"),n(i,"id","json-input"),i.value=u=JSON.stringify(a[0],null,2),n(l,"data-cy","template-input-section"),n(l,"class","mb-6 svelte-u6rap9"),n(t,"class","svelte-u6rap9"),n(e,"data-cy","form-container"),n(e,"class","max-w-lg my-4 mx-auto border rounded-xl px-7 py-4 svelte-u6rap9")},m(v,w){J(v,e,w),m(e,t),m(t,l),m(l,o),m(o,s),m(l,r),m(l,i),m(t,d),h&&h.m(t,null),m(t,c),g&&g.m(t,null),m(t,S),b&&b.m(t,null),m(e,p),y&&y.m(e,null),f||(T=B(i,"input",a[4]),f=!0)},p(v,[w]){var M;w&1&&u!==(u=JSON.stringify(v[0],null,2))&&(i.value=u),v[2]?h?h.p(v,w):(h=j(v),h.c(),h.m(t,c)):h&&(h.d(1),h=null),((M=v[0].merge)==null?void 0:M.length)&&!v[2]?g?g.p(v,w):(g=z(v),g.c(),g.m(t,S)):g&&(g.d(1),g=null),v[3]?b?b.p(v,w):(b=G(v),b.c(),b.m(t,null)):b&&(b.d(1),b=null),!v[3]&&!v[2]?y?y.p(v,w):(y=U(v),y.c(),y.m(e,null)):y&&(y.d(1),y=null)},i:L,o:L,d(v){v&&_(e),h&&h.d(),g&&g.d(),b&&b.d(),y&&y.d(),f=!1,T()}}}function se(a,e,t){const l=new x(re);let o=l.template,s=l.result,r,i;function u(p){try{const f=l.setTemplateSource(p.target.value);t(0,o=f),t(1,s=f),t(2,r="")}catch(f){t(2,r=f.message)}}function d(p){try{const f=l.updateResultMergeFields(p);t(1,s={...s,merge:f}),t(3,i="")}catch(f){t(3,i=f.message)}}function c(){navigator.clipboard.writeText(JSON.stringify(s)),alert("JSON copied to clipboard!")}return[o,s,r,i,u,d,c,(p,f)=>d({find:p,replace:f.currentTarget.value})]}class ne extends Q{constructor(e){super(),W(this,e,se,ae,Y,{})}}export{ne as default};
