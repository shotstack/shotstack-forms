var Te=Object.defineProperty;var ke=(l,e,t)=>e in l?Te(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var Z=(l,e,t)=>(ke(l,typeof e!="symbol"?e+"":e,t),t);import{S as P,i as L,s as J,H as x,I as ee,m as w,h as g,n as d,b as $,F as m,A as M,k as v,v as U,q,l as b,w as R,r as z,x as V,f as T,t as C,y as B,J as X,K as se,a as O,c as D,L as fe,M as Ne,N as de,O as he,P as ae,Q as me,G as ge,u as re,R as W,g as ie,d as oe,T as Fe,U as Ce}from"../../chunks/index-0c661f1c.js";import{w as pe}from"../../chunks/index-5edcacc6.js";const Oe=""+new URL("../../assets/copy-regular-423f8619.svg",import.meta.url).href,De="A 'merge' property is required",Ae="Property 'merge' must be an array",Me="A 'find' property is required on every element inside 'merge'",$e="Every 'find' property inside 'merge' must be of type string",Ue="Every 'find' property inside 'merge' must be a string of length equal to or higher than one",Re="A 'replace' property is required on every element inside 'merge'",Ve="Unexpected error while parsing template JSON",Be="Every element inside the 'merge' should be an object";class Y extends Error{constructor(e){super(e)}}function Pe(l){return typeof l=="object"}function ne(l,e){return l in e}function le(l,e){return!ne(l,e)}function Le(l,e){return ne(l,e)&&!(e[l]instanceof Array)}function Je(l,e){return ne(l,e)&&typeof e[l]!="string"}function He(l,e){const t=ne(l,e)&&e[l];return!(typeof t=="string"&&t.length>0)}function je(l){try{const e=JSON.parse(l);if(le("merge",e))throw new Y(De);if(Le("merge",e))throw new Y(Ae);const{merge:t}=e,n=Ge(t);return{...e,merge:n}}catch(e){throw Ie(e)}}function Ge(l){return l.map(t=>{if(!Pe(t))throw new Y(Be);if(le("find",t))throw new Y(Me);if(le("replace",t))throw new Y(Re);if(Je("find",t))throw new Y($e);if(He("find",t))throw new Y(Ue);return t}).map(({find:t,replace:n})=>({find:t,replace:Se(n)}))}function qe(l){return typeof l=="object"&&l!==null&&"message"in l}function Ie(l){return l instanceof Error?l:qe(l)?new Y(l.message):new Y(Ve)}function Se(l){return typeof l=="string"?l:JSON.stringify(l)}class ze{constructor(e){Z(this,"template");Z(this,"_result");Z(this,"_error");Z(this,"handlers");this._error=null,this.template={merge:[]},this._result={merge:[]},this.handlers={change:[],submit:[],error:[this.logger],upload:[]},this.setTemplateSource(e)}set error(e){const t=this._error&&{...this._error}||null;this._error=e,e!==null&&this.handlers.error.forEach(n=>n(e,t))}get error(){return this._error}set result(e){this._result=e,this.handlers.change.forEach(t=>t(e))}get result(){return this._result}on(e,t){this.handlers[e].push(t)}off(e,t){this.handlers={...this.handlers,[e]:this.handlers[e].filter(n=>n!==t)}}submit(){if(this.error)throw this.error;this.handlers.submit.forEach(e=>e(this.result))}setTemplateSource(e){try{const t=je(Se(e));this.template=t,this.result=t,this.error=null}catch(t){const n=Ie(t);this.error=n}}updateResultMergeFields(e,t){const n=t||this.getMergeFieldItem({find:e.find});return this.result.merge.forEach(r=>{r===n&&(r.find=e.find,r.replace=e.replace)}),this.result={...this.result,merge:this.result.merge},this.result.merge}logger(e){console.error(e)}addMergeField(e){this.setTemplateSource({...this.result,merge:[...this.result.merge,e]})}removeMergeField(e){this.setTemplateSource({...this.result,merge:this.result.merge.filter(t=>t!==e)})}getMergeFieldItem(e){if(Object.keys(e).length===0)return;const t=function(n){let r;for(r in e)if(n[r]!==e[r])return!1;return!0};return this.result.merge.find(t)}getSrcPlaceholders(){if(!this.template.timeline||!this.template.timeline.tracks)return[];const e=this.template.timeline.tracks,t=[];for(let n=0;n<e.length;n++)for(let r=0;r<e[n].clips.length;r++){const a={placeholder:e[n].clips[r].asset.src,asset:e[n].clips[r].asset};a.placeholder!==void 0&&a.placeholder.charAt(0)==="{"&&t.push(a)}return t}async updateSrc(e,t){let n=t.src;for(let r=0;r<this.handlers.upload.length;r++){const a=this.handlers.upload[r];n=await a(e)}t.src=n,this.handlers.change.forEach(r=>r(this.result))}}const Xe=[{find:"NAME",replace:"world"}],Ye={tracks:[{clips:[{asset:{type:"title",text:"Hello {{ NAME }}",style:"future",src:"{{ ASSET }}"},start:0,length:5}]}]},Ke={format:"mp4",resolution:"hd"},Qe={merge:Xe,timeline:Ye,output:Ke};function We(l){let e,t;return{c(){e=x("svg"),t=x("path"),this.h()},l(n){e=ee(n,"svg",{class:!0,xmlns:!0,viewBox:!0});var r=w(e);t=ee(r,"path",{d:!0}),w(t).forEach(g),r.forEach(g),this.h()},h(){d(t,"d","M13 8V2H7v6H2l8 8 8-8h-5zM0 18h20v2H0v-2z"),d(e,"class","fill-current w-4 h-4 mr-2"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"viewBox","0 0 20 20")},m(n,r){$(n,e,r),m(e,t)},p:M,i:M,o:M,d(n){n&&g(e)}}}function Ze(l){return[]}class xe extends P{constructor(e){super(),L(this,e,Ze,We,J,{})}}function et(l){let e,t,n,r;return t=new xe({}),{c(){e=v("a"),U(t.$$.fragment),n=q(`
	Download`),this.h()},l(a){e=b(a,"A",{href:!0,download:!0,class:!0});var s=w(e);R(t.$$.fragment,s),n=z(s,`
	Download`),s.forEach(g),this.h()},h(){d(e,"href",l[0]),d(e,"download","result.json"),d(e,"class","bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded inline-flex items-center w-40 justify-center")},m(a,s){$(a,e,s),V(t,e,null),m(e,n),r=!0},p(a,[s]){(!r||s&1)&&d(e,"href",a[0])},i(a){r||(T(t.$$.fragment,a),r=!0)},o(a){C(t.$$.fragment,a),r=!1},d(a){a&&g(e),B(t)}}}function tt(l,e,t){let{download:n=""}=e;return l.$$set=r=>{"download"in r&&t(0,n=r.download)},[n]}class rt extends P{constructor(e){super(),L(this,e,tt,et,J,{download:0})}}function nt(l){let e,t,n,r;return{c(){e=v("button"),t=q("Submit"),this.h()},l(a){e=b(a,"BUTTON",{class:!0});var s=w(e);t=z(s,"Submit"),s.forEach(g),this.h()},h(){d(e,"class","bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded w-40")},m(a,s){$(a,e,s),m(e,t),n||(r=X(e,"click",function(){se(l[0])&&l[0].apply(this,arguments)}),n=!0)},p(a,[s]){l=a},i:M,o:M,d(a){a&&g(e),n=!1,r()}}}function lt(l,e,t){let{submit:n}=e;return l.$$set=r=>{"submit"in r&&t(0,n=r.submit)},[n]}class st extends P{constructor(e){super(),L(this,e,lt,nt,J,{submit:0})}}function at(l){let e,t,n,r,a;return t=new rt({props:{download:l[0]}}),r=new st({props:{submit:l[1]}}),{c(){e=v("div"),U(t.$$.fragment),n=O(),U(r.$$.fragment),this.h()},l(s){e=b(s,"DIV",{class:!0});var o=w(e);R(t.$$.fragment,o),n=D(o),R(r.$$.fragment,o),o.forEach(g),this.h()},h(){d(e,"class","flex justify-between pt-4")},m(s,o){$(s,e,o),V(t,e,null),m(e,n),V(r,e,null),a=!0},p(s,[o]){const i={};o&1&&(i.download=s[0]),t.$set(i);const c={};o&2&&(c.submit=s[1]),r.$set(c)},i(s){a||(T(t.$$.fragment,s),T(r.$$.fragment,s),a=!0)},o(s){C(t.$$.fragment,s),C(r.$$.fragment,s),a=!1},d(s){s&&g(e),B(t),B(r)}}}function it(l,e,t){let{download:n=""}=e,{submit:r}=e;return l.$$set=a=>{"download"in a&&t(0,n=a.download),"submit"in a&&t(1,r=a.submit)},[n,r]}class ot extends P{constructor(e){super(),L(this,e,it,at,J,{download:0,submit:1})}}function ut(l){let e,t,n;return{c(){e=v("input"),this.h()},l(r){e=b(r,"INPUT",{class:!0,type:!0}),this.h()},h(){d(e,"class","border w-full mb-3 pl-2 py-1 text-stone-500"),d(e,"type","text")},m(r,a){$(r,e,a),fe(e,l[0]),t||(n=[X(e,"input",l[2]),X(e,"focus",l[3],{once:!0})],t=!0)},p(r,[a]){a&1&&e.value!==r[0]&&fe(e,r[0])},i:M,o:M,d(r){r&&g(e),t=!1,Ne(n)}}}function ct(l,e,t){let{value:n}=e,{onFocus:r}=e;function a(){n=this.value,t(0,n)}const s=o=>r(o.currentTarget);return l.$$set=o=>{"value"in o&&t(0,n=o.value),"onFocus"in o&&t(1,r=o.onFocus)},[n,r,a,s]}class _e extends P{constructor(e){super(),L(this,e,ct,ut,J,{value:0,onFocus:1})}}function ft(l){let e,t,n,r,a,s,o,i,c,f,u,p,h,_,F,y,I,E;function H(N){l[7](N)}let k={onFocus:l[6]};l[1]!==void 0&&(k.value=l[1]),o=new _e({props:k}),de.push(()=>he(o,"value",H));function S(N){l[9](N)}let j={onFocus:l[8]};return l[2]!==void 0&&(j.value=l[2]),f=new _e({props:j}),de.push(()=>he(f,"value",S)),{c(){e=v("div"),t=v("div"),n=v("h1"),r=q("Add a new merge field"),a=O(),s=v("div"),U(o.$$.fragment),c=O(),U(f.$$.fragment),p=O(),h=v("div"),_=v("button"),F=q("Add"),this.h()},l(N){e=b(N,"DIV",{});var A=w(e);t=b(A,"DIV",{});var G=w(t);n=b(G,"H1",{class:!0});var K=w(n);r=z(K,"Add a new merge field"),K.forEach(g),a=D(G),s=b(G,"DIV",{class:!0});var Q=w(s);R(o.$$.fragment,Q),c=D(Q),R(f.$$.fragment,Q),p=D(Q),h=b(Q,"DIV",{class:!0});var ue=w(h);_=b(ue,"BUTTON",{class:!0});var ce=w(_);F=z(ce,"Add"),ce.forEach(g),ue.forEach(g),Q.forEach(g),G.forEach(g),A.forEach(g),this.h()},h(){d(n,"class","text-teal-400 px-1"),d(_,"class","bg-blue-500 hover:bg-blue-700 text-white font-bold py-1 px-3 rounded align-self-end"),d(h,"class","flex flex-row-reverse"),d(s,"class","border p-4 mb-6")},m(N,A){$(N,e,A),m(e,t),m(t,n),m(n,r),m(t,a),m(t,s),V(o,s,null),m(s,c),V(f,s,null),m(s,p),m(s,h),m(h,_),m(_,F),y=!0,I||(E=X(_,"click",ae(l[10])),I=!0)},p(N,[A]){const G={};!i&&A&2&&(i=!0,G.value=N[1],me(()=>i=!1)),o.$set(G);const K={};!u&&A&4&&(u=!0,K.value=N[2],me(()=>u=!1)),f.$set(K)},i(N){y||(T(o.$$.fragment,N),T(f.$$.fragment,N),y=!0)},o(N){C(o.$$.fragment,N),C(f.$$.fragment,N),y=!1},d(N){N&&g(e),B(o),B(f),I=!1,E()}}}function dt(l,e,t){let n,r,a=pe("find");ge(l,a,_=>t(1,n=_));let s=pe("replace");ge(l,s,_=>t(2,r=_));let o=_=>_.set(""),{addField:i}=e;const c=()=>o(a);function f(_){n=_,a.set(n)}const u=()=>o(s);function p(_){r=_,s.set(r)}const h=()=>i({find:n,replace:r});return l.$$set=_=>{"addField"in _&&t(0,i=_.addField)},[i,n,r,a,s,o,c,f,u,p,h]}class ht extends P{constructor(e){super(),L(this,e,dt,ft,J,{addField:0})}}function mt(l){let e,t;return{c(){e=x("svg"),t=x("path"),this.h()},l(n){e=ee(n,"svg",{xmlns:!0,viewBox:!0});var r=w(e);t=ee(r,"path",{fill:!0,d:!0}),w(t).forEach(g),r.forEach(g),this.h()},h(){d(t,"fill","white"),d(t,"d","M.293.293a1 1 0 011.414 0L8 6.586 14.293.293a1 1 0 111.414 1.414L9.414 8l6.293 6.293a1 1 0 01-1.414 1.414L8 9.414l-6.293 6.293a1 1 0 01-1.414-1.414L6.586 8 .293 1.707a1 1 0 010-1.414z"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"viewBox","0 0 16 16")},m(n,r){$(n,e,r),m(e,t)},p:M,i:M,o:M,d(n){n&&g(e)}}}function gt(l){return[]}class pt extends P{constructor(e){super(),L(this,e,gt,mt,J,{})}}function _t(l){let e,t,n,r,a;return t=new pt({}),{c(){e=v("button"),U(t.$$.fragment),this.h()},l(s){e=b(s,"BUTTON",{class:!0});var o=w(e);R(t.$$.fragment,o),o.forEach(g),this.h()},h(){d(e,"class","bg-blue-400 hover:bg-blue-700 text-white font-bold absolute top-0 right-0 rounded-full w-4 h-4 p-1")},m(s,o){$(s,e,o),V(t,e,null),n=!0,r||(a=X(e,"click",ae(function(){se(l[0])&&l[0].apply(this,arguments)})),r=!0)},p(s,[o]){l=s},i(s){n||(T(t.$$.fragment,s),n=!0)},o(s){C(t.$$.fragment,s),n=!1},d(s){s&&g(e),B(t),r=!1,a()}}}function vt(l,e,t){let{onClick:n}=e;return l.$$set=r=>{"onClick"in r&&t(0,n=r.onClick)},[n]}class bt extends P{constructor(e){super(),L(this,e,vt,_t,J,{onClick:0})}}function wt(l){let e,t;return{c(){e=v("label"),t=q(l[0]),this.h()},l(n){e=b(n,"LABEL",{for:!0,class:!0});var r=w(e);t=z(r,l[0]),r.forEach(g),this.h()},h(){d(e,"for",l[0]),d(e,"class","block mb-2 monospace")},m(n,r){$(n,e,r),m(e,t)},p(n,[r]){r&1&&re(t,n[0]),r&1&&d(e,"for",n[0])},i:M,o:M,d(n){n&&g(e)}}}function Et(l,e,t){let{find:n}=e;return l.$$set=r=>{"find"in r&&t(0,n=r.find)},[n]}class yt extends P{constructor(e){super(),L(this,e,Et,wt,J,{find:0})}}function Ft(l){let e,t,n;return{c(){e=v("input"),this.h()},l(r){e=b(r,"INPUT",{role:!0,class:!0,type:!0,label:!0}),this.h()},h(){d(e,"role","textbox"),d(e,"class","border w-full mb-3 pl-2 py-1 text-stone-500"),d(e,"type","text"),e.value=l[2],d(e,"label",l[1])},m(r,a){$(r,e,a),t||(n=X(e,"input",l[4]),t=!0)},p(r,[a]){a&4&&e.value!==r[2]&&(e.value=r[2]),a&2&&d(e,"label",r[1])},i:M,o:M,d(r){r&&g(e),t=!1,n()}}}function It(l,e,t){let{field:n}=e,{find:r}=e,{replace:a}=e,{handleFormInput:s}=e;const o=i=>s({find:r,replace:i.currentTarget.value},n);return l.$$set=i=>{"field"in i&&t(0,n=i.field),"find"in i&&t(1,r=i.find),"replace"in i&&t(2,a=i.replace),"handleFormInput"in i&&t(3,s=i.handleFormInput)},[n,r,a,s,o]}class St extends P{constructor(e){super(),L(this,e,It,Ft,J,{field:0,find:1,replace:2,handleFormInput:3})}}function Tt(l){let e,t,n,r,a;return t=new yt({props:{find:l[0].find}}),r=new St({props:{find:l[0].find,replace:l[0].replace,field:l[0],handleFormInput:l[1]}}),{c(){e=v("div"),U(t.$$.fragment),n=O(),U(r.$$.fragment),this.h()},l(s){e=b(s,"DIV",{"data-cy":!0});var o=w(e);R(t.$$.fragment,o),n=D(o),R(r.$$.fragment,o),o.forEach(g),this.h()},h(){d(e,"data-cy","label-input")},m(s,o){$(s,e,o),V(t,e,null),m(e,n),V(r,e,null),a=!0},p(s,[o]){const i={};o&1&&(i.find=s[0].find),t.$set(i);const c={};o&1&&(c.find=s[0].find),o&1&&(c.replace=s[0].replace),o&1&&(c.field=s[0]),o&2&&(c.handleFormInput=s[1]),r.$set(c)},i(s){a||(T(t.$$.fragment,s),T(r.$$.fragment,s),a=!0)},o(s){C(t.$$.fragment,s),C(r.$$.fragment,s),a=!1},d(s){s&&g(e),B(t),B(r)}}}function kt(l,e,t){let{field:n}=e,{handleFormInput:r}=e;return l.$$set=a=>{"field"in a&&t(0,n=a.field),"handleFormInput"in a&&t(1,r=a.handleFormInput)},[n,r]}class Nt extends P{constructor(e){super(),L(this,e,kt,Tt,J,{field:0,handleFormInput:1})}}function ve(l,e,t){const n=l.slice();return n[6]=e[t],n}function be(l){let e,t,n,r,a,s;t=new Nt({props:{field:l[6],handleFormInput:l[2]}});function o(){return l[5](l[6])}return r=new bt({props:{onClick:o}}),{c(){e=v("div"),U(t.$$.fragment),n=O(),U(r.$$.fragment),a=O(),this.h()},l(i){e=b(i,"DIV",{class:!0});var c=w(e);R(t.$$.fragment,c),n=D(c),R(r.$$.fragment,c),a=D(c),c.forEach(g),this.h()},h(){d(e,"class","relative")},m(i,c){$(i,e,c),V(t,e,null),m(e,n),V(r,e,null),m(e,a),s=!0},p(i,c){l=i;const f={};c&2&&(f.field=l[6]),c&4&&(f.handleFormInput=l[2]),t.$set(f);const u={};c&18&&(u.onClick=o),r.$set(u)},i(i){s||(T(t.$$.fragment,i),T(r.$$.fragment,i),s=!0)},o(i){C(t.$$.fragment,i),C(r.$$.fragment,i),s=!1},d(i){i&&g(e),B(t),B(r)}}}function Ct(l){let e,t,n,r,a,s,o,i,c,f=l[1],u=[];for(let h=0;h<f.length;h+=1)u[h]=be(ve(l,f,h));const p=h=>C(u[h],1,1,()=>{u[h]=null});return i=new ht({props:{addField:l[3]}}),{c(){e=v("div"),t=v("div"),n=v("h1"),r=q("Modify Merge Values"),a=O(),s=v("div");for(let h=0;h<u.length;h+=1)u[h].c();o=O(),U(i.$$.fragment),this.h()},l(h){e=b(h,"DIV",{});var _=w(e);t=b(_,"DIV",{"data-cy":!0});var F=w(t);n=b(F,"H1",{class:!0});var y=w(n);r=z(y,"Modify Merge Values"),y.forEach(g),a=D(F),s=b(F,"DIV",{class:!0});var I=w(s);for(let E=0;E<u.length;E+=1)u[E].l(I);I.forEach(g),F.forEach(g),o=D(_),R(i.$$.fragment,_),_.forEach(g),this.h()},h(){d(n,"class","text-teal-400 px-1"),d(s,"class","border p-4 mb-6"),d(t,"data-cy","merge-fields-input-section"),W(e,"hidden",l[0])},m(h,_){$(h,e,_),m(e,t),m(t,n),m(n,r),m(t,a),m(t,s);for(let F=0;F<u.length;F+=1)u[F].m(s,null);m(e,o),V(i,e,null),c=!0},p(h,[_]){if(_&22){f=h[1];let y;for(y=0;y<f.length;y+=1){const I=ve(h,f,y);u[y]?(u[y].p(I,_),T(u[y],1)):(u[y]=be(I),u[y].c(),T(u[y],1),u[y].m(s,null))}for(ie(),y=f.length;y<u.length;y+=1)p(y);oe()}const F={};_&8&&(F.addField=h[3]),i.$set(F),(!c||_&1)&&W(e,"hidden",h[0])},i(h){if(!c){for(let _=0;_<f.length;_+=1)T(u[_]);T(i.$$.fragment,h),c=!0}},o(h){u=u.filter(Boolean);for(let _=0;_<u.length;_+=1)C(u[_]);C(i.$$.fragment,h),c=!1},d(h){h&&g(e),Fe(u,h),B(i)}}}function Ot(l,e,t){let{error:n}=e,{fields:r=[]}=e,{handleFormInput:a}=e,{addField:s}=e,{removeField:o}=e;const i=c=>o(c);return l.$$set=c=>{"error"in c&&t(0,n=c.error),"fields"in c&&t(1,r=c.fields),"handleFormInput"in c&&t(2,a=c.handleFormInput),"addField"in c&&t(3,s=c.addField),"removeField"in c&&t(4,o=c.removeField)},[n,r,a,s,o,i]}class Dt extends P{constructor(e){super(),L(this,e,Ot,Ct,J,{error:0,fields:1,handleFormInput:2,addField:3,removeField:4})}}function At(l){let e,t,n,r;return{c(){e=v("button"),t=q("Reset"),this.h()},l(a){e=b(a,"BUTTON",{class:!0});var s=w(e);t=z(s,"Reset"),s.forEach(g),this.h()},h(){d(e,"class","bg-blue-500 hover:bg-blue-700 text-white font-bold py-1 px-3 rounded align-self-end")},m(a,s){$(a,e,s),m(e,t),n||(r=X(e,"click",ae(function(){se(l[0])&&l[0].apply(this,arguments)})),n=!0)},p(a,[s]){l=a},i:M,o:M,d(a){a&&g(e),n=!1,r()}}}function Mt(l,e,t){let{onClick:n}=e;return l.$$set=r=>{"onClick"in r&&t(0,n=r.onClick)},[n]}class $t extends P{constructor(e){super(),L(this,e,Mt,At,J,{onClick:0})}}function Ut(l){let e,t,n,r,a,s,o,i;return o=new $t({props:{onClick:l[0]}}),{c(){e=v("div"),t=v("p"),n=v("span"),r=q(l[2]),a=O(),s=v("div"),U(o.$$.fragment),this.h()},l(c){e=b(c,"DIV",{});var f=w(e);t=b(f,"P",{"data-cy":!0,class:!0});var u=w(t);n=b(u,"SPAN",{class:!0});var p=w(n);r=z(p,l[2]),p.forEach(g),u.forEach(g),a=D(f),s=b(f,"DIV",{class:!0});var h=w(s);R(o.$$.fragment,h),h.forEach(g),f.forEach(g),this.h()},h(){d(n,"class","monospace text-orange-900"),d(t,"data-cy","template-input-error"),d(t,"class","bg-rose-200 rounded py-2 my-4 px-4"),d(s,"class","flex flex-row-reverse "),W(e,"hidden",!l[1])},m(c,f){$(c,e,f),m(e,t),m(t,n),m(n,r),m(e,a),m(e,s),V(o,s,null),i=!0},p(c,[f]){(!i||f&4)&&re(r,c[2]);const u={};f&1&&(u.onClick=c[0]),o.$set(u),(!i||f&2)&&W(e,"hidden",!c[1])},i(c){i||(T(o.$$.fragment,c),i=!0)},o(c){C(o.$$.fragment,c),i=!1},d(c){c&&g(e),B(o)}}}function Rt(l,e,t){let n,{onClick:r}=e,{error:a}=e;return l.$$set=s=>{"onClick"in s&&t(0,r=s.onClick),"error"in s&&t(1,a=s.error)},l.$$.update=()=>{l.$$.dirty&2&&t(2,n=a&&a.message||"")},[r,a,n]}class Vt extends P{constructor(e){super(),L(this,e,Rt,Ut,J,{onClick:0,error:1})}}function Bt(l){let e,t,n=l[1].slice(2,-2).trim()+"",r,a,s,o,i,c,f;return{c(){e=v("div"),t=v("label"),r=q(n),a=O(),s=v("input"),o=O(),i=v("input"),this.h()},l(u){e=b(u,"DIV",{"data-cy":!0});var p=w(e);t=b(p,"LABEL",{class:!0,for:!0});var h=w(t);r=z(h,n),h.forEach(g),a=D(p),s=b(p,"INPUT",{class:!0,type:!0}),o=D(p),i=b(p,"INPUT",{class:!0,type:!0}),p.forEach(g),this.h()},h(){d(t,"class","block mb-2 monospace"),d(t,"for","input"),d(s,"class","border w-full mb-3 pl-2 py-1 text-stone-500"),d(s,"type","text"),s.value=l[0],s.disabled=!0,i.disabled=l[2],d(i,"class","border w-full mb-3 pl-2 py-1 text-stone-500"),d(i,"type","file"),d(e,"data-cy","source-input")},m(u,p){$(u,e,p),m(e,t),m(t,r),m(e,a),m(e,s),m(e,o),m(e,i),c||(f=X(i,"change",l[7]),c=!0)},p(u,[p]){p&2&&n!==(n=u[1].slice(2,-2).trim()+"")&&re(r,n),p&1&&s.value!==u[0]&&(s.value=u[0]),p&4&&(i.disabled=u[2])},i:M,o:M,d(u){u&&g(e),c=!1,f()}}}function Pt(l,e,t){let n,{asset:r}=e,{value:a}=e,{label:s}=e,{handleChange:o}=e,i=!1,c=async u=>{t(6,i=!0),await o(u),t(0,a=r.src),t(6,i=!1)};const f=u=>c(u.currentTarget.files);return l.$$set=u=>{"asset"in u&&t(4,r=u.asset),"value"in u&&t(0,a=u.value),"label"in u&&t(1,s=u.label),"handleChange"in u&&t(5,o=u.handleChange)},l.$$.update=()=>{l.$$.dirty&64&&t(2,n=i)},[a,s,n,c,r,o,i,f]}class Lt extends P{constructor(e){super(),L(this,e,Pt,Bt,J,{asset:4,value:0,label:1,handleChange:5})}}function we(l,e,t){const n=l.slice();return n[3]=e[t],n}function Ee(l){let e,t;return e=new Lt({props:{label:l[3].placeholder,handleChange:l[1](l[3].asset),value:l[3].asset.src,asset:l[3].asset}}),{c(){U(e.$$.fragment)},l(n){R(e.$$.fragment,n)},m(n,r){V(e,n,r),t=!0},p(n,r){const a={};r&1&&(a.label=n[3].placeholder),r&1&&(a.handleChange=n[1](n[3].asset)),r&1&&(a.value=n[3].asset.src),r&1&&(a.asset=n[3].asset),e.$set(a)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){C(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function Jt(l){let e,t,n,r,a,s,o=l[0],i=[];for(let f=0;f<o.length;f+=1)i[f]=Ee(we(l,o,f));const c=f=>C(i[f],1,1,()=>{i[f]=null});return{c(){e=v("div"),t=v("h1"),n=q("Update sources"),r=O(),a=v("div");for(let f=0;f<i.length;f+=1)i[f].c();this.h()},l(f){e=b(f,"DIV",{"data-cy":!0});var u=w(e);t=b(u,"H1",{class:!0});var p=w(t);n=z(p,"Update sources"),p.forEach(g),r=D(u),a=b(u,"DIV",{class:!0});var h=w(a);for(let _=0;_<i.length;_+=1)i[_].l(h);h.forEach(g),u.forEach(g),this.h()},h(){d(t,"class","text-teal-400 px-1"),d(a,"class","border p-4 mb-6"),d(e,"data-cy","source-container"),W(e,"hidden",l[0].length<1)},m(f,u){$(f,e,u),m(e,t),m(t,n),m(e,r),m(e,a);for(let p=0;p<i.length;p+=1)i[p].m(a,null);s=!0},p(f,[u]){if(u&3){o=f[0];let p;for(p=0;p<o.length;p+=1){const h=we(f,o,p);i[p]?(i[p].p(h,u),T(i[p],1)):(i[p]=Ee(h),i[p].c(),T(i[p],1),i[p].m(a,null))}for(ie(),p=o.length;p<i.length;p+=1)c(p);oe()}(!s||u&1)&&W(e,"hidden",f[0].length<1)},i(f){if(!s){for(let u=0;u<o.length;u+=1)T(i[u]);s=!0}},o(f){i=i.filter(Boolean);for(let u=0;u<i.length;u+=1)C(i[u]);s=!1},d(f){f&&g(e),Fe(i,f)}}}function Ht(l,e,t){let{sources:n}=e,{handleSourceFieldUpdate:r}=e;const a=s=>async o=>await r(o,s);return l.$$set=s=>{"sources"in s&&t(0,n=s.sources),"handleSourceFieldUpdate"in s&&t(2,r=s.handleSourceFieldUpdate)},[n,a,r]}class jt extends P{constructor(e){super(),L(this,e,Ht,Jt,J,{sources:0,handleSourceFieldUpdate:2})}}function ye(l){let e,t,n,r,a,s,o,i,c,f=te(l[0])+"",u,p,h,_,F,y;return h=new ot({props:{submit:l[8],download:l[4]}}),{c(){e=v("div"),t=v("h1"),n=q("Result"),r=O(),a=v("abbr"),s=v("img"),i=O(),c=v("p"),u=q(f),p=O(),U(h.$$.fragment),this.h()},l(I){e=b(I,"DIV",{"data-cy":!0,class:!0});var E=w(e);t=b(E,"H1",{class:!0});var H=w(t);n=z(H,"Result"),H.forEach(g),r=D(E),a=b(E,"ABBR",{title:!0,class:!0});var k=w(a);s=b(k,"IMG",{src:!0,alt:!0,class:!0}),k.forEach(g),i=D(E),c=b(E,"P",{"data-cy":!0,class:!0});var S=w(c);u=z(S,f),S.forEach(g),p=D(E),R(h.$$.fragment,E),E.forEach(g),this.h()},h(){d(t,"class","text-teal-400 px-1 inline-block mr-2 svelte-r93edu"),Ce(s.src,o=Oe)||d(s,"src",o),d(s,"alt","copy-button"),d(s,"class","h-4 cursor-pointer inline mb-1 svelte-r93edu"),d(a,"title","Copy to clipboard"),d(a,"class","svelte-r93edu"),d(c,"data-cy","result"),d(c,"class","h-60 overflow-auto border p-4 whitespace-pre monospace svelte-r93edu"),d(e,"data-cy","result-section"),d(e,"class","svelte-r93edu")},m(I,E){$(I,e,E),m(e,t),m(t,n),m(e,r),m(e,a),m(a,s),m(e,i),m(e,c),m(c,u),m(e,p),V(h,e,null),_=!0,F||(y=X(s,"click",l[7]),F=!0)},p(I,E){(!_||E&1)&&f!==(f=te(I[0])+"")&&re(u,f);const H={};E&16&&(H.download=I[4]),h.$set(H)},i(I){_||(T(h.$$.fragment,I),_=!0)},o(I){C(h.$$.fragment,I),_=!1},d(I){I&&g(e),B(h),F=!1,y()}}}function Gt(l){let e,t,n,r,a,s,o,i,c,f,u,p,h,_,F,y,I,E,H;u=new Vt({props:{error:l[2],onClick:l[11]}}),h=new Dt({props:{fields:l[0].merge,handleFormInput:l[6],addField:l[9],removeField:l[10],error:l[2]}}),F=new jt({props:{sources:l[3],handleSourceFieldUpdate:l[12]}});let k=!l[2]&&ye(l);return{c(){e=v("div"),t=v("section"),n=v("form"),r=v("div"),a=v("label"),s=q("Paste template"),o=O(),i=v("textarea"),f=O(),U(u.$$.fragment),p=O(),U(h.$$.fragment),_=O(),U(F.$$.fragment),y=O(),k&&k.c(),this.h()},l(S){e=b(S,"DIV",{class:!0});var j=w(e);t=b(j,"SECTION",{"data-cy":!0,class:!0});var N=w(t);n=b(N,"FORM",{class:!0});var A=w(n);r=b(A,"DIV",{"data-cy":!0,class:!0});var G=w(r);a=b(G,"LABEL",{for:!0,class:!0});var K=w(a);s=z(K,"Paste template"),K.forEach(g),o=D(G),i=b(G,"TEXTAREA",{"data-cy":!0,class:!0,id:!0}),w(i).forEach(g),G.forEach(g),f=D(A),R(u.$$.fragment,A),p=D(A),R(h.$$.fragment,A),_=D(A),R(F.$$.fragment,A),A.forEach(g),y=D(N),k&&k.l(N),N.forEach(g),j.forEach(g),this.h()},h(){d(a,"for","json-input"),d(a,"class","text-teal-400 px-1 svelte-r93edu"),d(i,"data-cy","template-input"),d(i,"class","w-full h-60 monospace border p-4 overflow-auto whitespace-pre resize-none svelte-r93edu"),d(i,"id","json-input"),i.value=c=te(l[1]),d(r,"data-cy","template-input-section"),d(r,"class","mb-6 svelte-r93edu"),d(n,"class","svelte-r93edu"),d(t,"data-cy","form-container"),d(t,"class","max-w-lg my-4 mx-auto border rounded-xl px-7 py-4 svelte-r93edu"),d(e,"class","shotstack-mergefield-form svelte-r93edu")},m(S,j){$(S,e,j),m(e,t),m(t,n),m(n,r),m(r,a),m(a,s),m(r,o),m(r,i),m(n,f),V(u,n,null),m(n,p),V(h,n,null),m(n,_),V(F,n,null),m(t,y),k&&k.m(t,null),I=!0,E||(H=X(i,"input",l[14]),E=!0)},p(S,[j]){(!I||j&2&&c!==(c=te(S[1])))&&(i.value=c);const N={};j&4&&(N.error=S[2]),u.$set(N);const A={};j&1&&(A.fields=S[0].merge),j&4&&(A.error=S[2]),h.$set(A);const G={};j&8&&(G.sources=S[3]),F.$set(G),S[2]?k&&(ie(),C(k,1,1,()=>{k=null}),oe()):k?(k.p(S,j),j&4&&T(k,1)):(k=ye(S),k.c(),T(k,1),k.m(t,null))},i(S){I||(T(u.$$.fragment,S),T(h.$$.fragment,S),T(F.$$.fragment,S),T(k),I=!0)},o(S){C(u.$$.fragment,S),C(h.$$.fragment,S),C(F.$$.fragment,S),C(k),I=!1},d(S){S&&g(e),B(u),B(h),B(F),k&&k.d(),E=!1,H()}}}function te(l){return JSON.stringify(l,null,2)}function qt(l){if(typeof window<"u"){const e=new Blob([JSON.stringify(l,null,2)],{type:"text/plain"});return URL.createObjectURL(e)}else return null}function zt(l,e,t){let n,{editTemplateService:r=new ze(Qe)}=e,a=r.template,s=r.result,o=null,i=r.getSrcPlaceholders();function c(E){r.setTemplateSource(E),t(1,a=r.template),t(0,s=r.result),t(2,o=r.error),t(3,i=r.getSrcPlaceholders())}function f(E,H){r.updateResultMergeFields(E,H),t(0,s=r.result)}function u(){navigator.clipboard.writeText(JSON.stringify(s)),alert("JSON copied to clipboard!")}function p(){r.submit(),window.alert("Form successfully submitted!")}function h(E){r.addMergeField(E),t(1,a=r.template),t(0,s=r.result),t(2,o=r.error)}function _(E){const H=r.getMergeFieldItem(E);r.removeMergeField(H),t(1,a=r.template),t(0,s=r.result),t(2,o=r.error)}function F(){r.setTemplateSource(r.result),t(1,a=r.template),t(0,s=r.result),t(2,o=r.error)}async function y(E,H){await r.updateSrc(E,H),t(1,a=r.template),t(0,s=r.result)}const I=E=>c(E.currentTarget.value);return l.$$set=E=>{"editTemplateService"in E&&t(13,r=E.editTemplateService)},l.$$.update=()=>{l.$$.dirty&1&&t(4,n=qt(s)||"")},[s,a,o,i,n,c,f,u,p,h,_,F,y,r,I]}class Xt extends P{constructor(e){super(),L(this,e,zt,Gt,J,{editTemplateService:13})}}function Yt(l){let e,t;return e=new Xt({}),{c(){U(e.$$.fragment)},l(n){R(e.$$.fragment,n)},m(n,r){V(e,n,r),t=!0},p:M,i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){C(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}class Zt extends P{constructor(e){super(),L(this,e,null,Yt,J,{})}}export{Zt as default};
