var F=Object.defineProperty;var K=(i,e,l)=>e in i?F(i,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):i[e]=l;var B=(i,e,l)=>(K(i,typeof e!="symbol"?e+"":e,l),l);import{S as Q,i as W,s as Y,k as g,q as P,a as T,l as E,m as S,r as I,h as c,c as J,n as h,b as w,F as b,H,A as q,u as C,I as Z,J as $}from"../../chunks/index-16192b9f.js";class x{constructor(e){B(this,"template");B(this,"result");e?(this.template=e,this.result=e):(this.template={merge:[]},this.result={merge:[]})}validateMergeArray(e){return!!e.merge}setTemplateSource(e){try{const l=JSON.parse(e);if(!this.validateMergeArray(l))throw new Error("No merge fields array was found");return this.template=l,this.result=l,l}catch(l){throw l.message?new Error(l.message):new Error("Error parsing JSON.")}}updateResultMergeFields(e){const{find:l}=e,r=e.replace,t={find:l,replace:r};if(!isNaN(Number(r)))t.replace=Number(r);else if(r==="true"||r==="false")t.replace=r==="true";else try{t.replace=JSON.parse(r)}catch{t.replace=r}const u=this.result.merge.map(s=>(s==null?void 0:s.find)===e.find?t:s);return this.result={...this.result,merge:u},u}}const ee=[{find:"NAME",replace:"world"}],le={tracks:[{clips:[{asset:{type:"title",text:"Hello {{ NAME }}",style:"future"},start:0,length:5}]}]},te={format:"mp4",resolution:"hd"},se={merge:ee,timeline:le,output:te};function j(i,e,l){const r=i.slice();return r[9]=e[l].find,r[10]=e[l].replace,r}function D(i){let e,l,r;return{c(){e=g("p"),l=g("span"),r=P(i[2]),this.h()},l(t){e=E(t,"P",{class:!0});var u=S(e);l=E(u,"SPAN",{class:!0});var s=S(l);r=I(s,i[2]),s.forEach(c),u.forEach(c),this.h()},h(){h(l,"class","monospace text-orange-900 svelte-u6rap9"),h(e,"class","bg-rose-200 rounded py-2 px-4 svelte-u6rap9")},m(t,u){w(t,e,u),b(e,l),b(l,r)},p(t,u){u&4&&C(r,t[2])},d(t){t&&c(e)}}}function z(i){let e,l,r,t,u=i[0].merge,s=[];for(let a=0;a<u.length;a+=1)s[a]=G(j(i,u,a));return{c(){e=g("h1"),l=P("Modify Merge Values"),r=T(),t=g("div");for(let a=0;a<s.length;a+=1)s[a].c();this.h()},l(a){e=E(a,"H1",{class:!0});var p=S(e);l=I(p,"Modify Merge Values"),p.forEach(c),r=J(a),t=E(a,"DIV",{class:!0});var n=S(t);for(let m=0;m<s.length;m+=1)s[m].l(n);n.forEach(c),this.h()},h(){h(e,"class","text-teal-400 px-1 svelte-u6rap9"),h(t,"class","border p-4 mb-6 svelte-u6rap9")},m(a,p){w(a,e,p),b(e,l),w(a,r,p),w(a,t,p);for(let n=0;n<s.length;n+=1)s[n].m(t,null)},p(a,p){if(p&33){u=a[0].merge;let n;for(n=0;n<u.length;n+=1){const m=j(a,u,n);s[n]?s[n].p(m,p):(s[n]=G(m),s[n].c(),s[n].m(t,null))}for(;n<s.length;n+=1)s[n].d(1);s.length=u.length}},d(a){a&&c(e),a&&c(r),a&&c(t),Z(s,a)}}}function G(i){let e,l="{{ "+i[9]+" }} ",r,t,u,s,a,p,n,m;function A(...f){return i[7](i[9],...f)}return{c(){e=g("label"),r=P(l),u=T(),s=g("input"),this.h()},l(f){e=E(f,"LABEL",{for:!0,class:!0});var o=S(e);r=I(o,l),o.forEach(c),u=J(f),s=E(f,"INPUT",{class:!0,id:!0,type:!0}),this.h()},h(){h(e,"for",t=i[9]),h(e,"class","block mb-2 monospace svelte-u6rap9"),h(s,"class","border w-full mb-3 pl-2 py-1 text-stone-500 svelte-u6rap9"),h(s,"id",a=i[9]),h(s,"type","text"),s.value=p=i[10]},m(f,o){w(f,e,o),b(e,r),w(f,u,o),w(f,s,o),n||(m=H(s,"input",A),n=!0)},p(f,o){i=f,o&1&&l!==(l="{{ "+i[9]+" }} ")&&C(r,l),o&1&&t!==(t=i[9])&&h(e,"for",t),o&1&&a!==(a=i[9])&&h(s,"id",a),o&1&&p!==(p=i[10])&&s.value!==p&&(s.value=p)},d(f){f&&c(e),f&&c(u),f&&c(s),n=!1,m()}}}function U(i){let e,l,r;return{c(){e=g("p"),l=g("span"),r=P(i[3]),this.h()},l(t){e=E(t,"P",{class:!0});var u=S(e);l=E(u,"SPAN",{class:!0});var s=S(l);r=I(s,i[3]),s.forEach(c),u.forEach(c),this.h()},h(){h(l,"class","monospace text-orange-900 svelte-u6rap9"),h(e,"class","bg-rose-200 rounded py-2 px-4 svelte-u6rap9")},m(t,u){w(t,e,u),b(e,l),b(l,r)},p(t,u){u&8&&C(r,t[3])},d(t){t&&c(e)}}}function X(i){let e,l,r,t,u,s,a,p,n=JSON.stringify(i[1],null,2)+"",m,A,f;return{c(){e=g("h1"),l=P("Result"),r=T(),t=g("abbr"),u=g("img"),a=T(),p=g("p"),m=P(n),this.h()},l(o){e=E(o,"H1",{class:!0});var M=S(e);l=I(M,"Result"),M.forEach(c),r=J(o),t=E(o,"ABBR",{title:!0,class:!0});var d=S(t);u=E(d,"IMG",{src:!0,alt:!0,class:!0}),d.forEach(c),a=J(o),p=E(o,"P",{class:!0});var v=S(p);m=I(v,n),v.forEach(c),this.h()},h(){h(e,"class","text-teal-400 px-1 inline-block mr-2 svelte-u6rap9"),$(u.src,s="img/copy-regular.svg")||h(u,"src",s),h(u,"alt","copy-button"),h(u,"class","h-4 cursor-pointer inline mb-1 svelte-u6rap9"),h(t,"title","Copy to clipboard"),h(t,"class","svelte-u6rap9"),h(p,"class","h-60 overflow-auto border p-4 whitespace-pre monospace svelte-u6rap9")},m(o,M){w(o,e,M),b(e,l),w(o,r,M),w(o,t,M),b(t,u),w(o,a,M),w(o,p,M),b(p,m),A||(f=H(u,"click",i[6]),A=!0)},p(o,M){M&2&&n!==(n=JSON.stringify(o[1],null,2)+"")&&C(m,n)},d(o){o&&c(e),o&&c(r),o&&c(t),o&&c(a),o&&c(p),A=!1,f()}}}function re(i){var L;let e,l,r,t,u,s,a,p,n,m,A,f,o,M,d=i[2]&&D(i),v=((L=i[0].merge)==null?void 0:L.length)&&!i[2]&&z(i),y=i[3]&&U(i),N=!i[3]&&!i[2]&&X(i);return{c(){e=g("section"),l=g("form"),r=g("div"),t=g("label"),u=P("Paste template"),s=T(),a=g("textarea"),n=T(),d&&d.c(),m=T(),v&&v.c(),A=T(),y&&y.c(),f=T(),N&&N.c(),this.h()},l(_){e=E(_,"SECTION",{class:!0});var k=S(e);l=E(k,"FORM",{class:!0});var O=S(l);r=E(O,"DIV",{class:!0});var R=S(r);t=E(R,"LABEL",{for:!0,class:!0});var V=S(t);u=I(V,"Paste template"),V.forEach(c),s=J(R),a=E(R,"TEXTAREA",{class:!0,id:!0}),S(a).forEach(c),R.forEach(c),n=J(O),d&&d.l(O),m=J(O),v&&v.l(O),O.forEach(c),A=J(k),y&&y.l(k),f=J(k),N&&N.l(k),k.forEach(c),this.h()},h(){h(t,"for","json-input"),h(t,"class","text-teal-400 px-1 svelte-u6rap9"),h(a,"class","w-full h-60 monospace border p-4 overflow-auto whitespace-pre resize-none svelte-u6rap9"),h(a,"id","json-input"),a.value=p=JSON.stringify(i[0],null,2),h(r,"class","mb-6 svelte-u6rap9"),h(l,"class","svelte-u6rap9"),h(e,"class","max-w-lg my-4 mx-auto border rounded-xl px-7 py-4 svelte-u6rap9")},m(_,k){w(_,e,k),b(e,l),b(l,r),b(r,t),b(t,u),b(r,s),b(r,a),b(l,n),d&&d.m(l,null),b(l,m),v&&v.m(l,null),b(e,A),y&&y.m(e,null),b(e,f),N&&N.m(e,null),o||(M=H(a,"input",i[4]),o=!0)},p(_,[k]){var O;k&1&&p!==(p=JSON.stringify(_[0],null,2))&&(a.value=p),_[2]?d?d.p(_,k):(d=D(_),d.c(),d.m(l,m)):d&&(d.d(1),d=null),((O=_[0].merge)==null?void 0:O.length)&&!_[2]?v?v.p(_,k):(v=z(_),v.c(),v.m(l,null)):v&&(v.d(1),v=null),_[3]?y?y.p(_,k):(y=U(_),y.c(),y.m(e,f)):y&&(y.d(1),y=null),!_[3]&&!_[2]?N?N.p(_,k):(N=X(_),N.c(),N.m(e,null)):N&&(N.d(1),N=null)},i:q,o:q,d(_){_&&c(e),d&&d.d(),v&&v.d(),y&&y.d(),N&&N.d(),o=!1,M()}}}function ae(i,e,l){const r=new x(se);let t=r.template,u=r.result,s,a;function p(f){try{const o=r.setTemplateSource(f.target.value);l(0,t=o),l(1,u=o),l(2,s="")}catch(o){l(2,s=o.message)}}function n(f){try{const o=r.updateResultMergeFields(f);l(1,u={...u,merge:o}),l(3,a="")}catch(o){l(3,a=o.message)}}function m(){navigator.clipboard.writeText(JSON.stringify(u)),alert("JSON copied to clipboard!")}return[t,u,s,a,p,n,m,(f,o)=>n({find:f,replace:o.currentTarget.value})]}class oe extends Q{constructor(e){super(),W(this,e,ae,re,Y,{})}}export{oe as default};
