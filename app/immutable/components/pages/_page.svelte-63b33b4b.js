var X=Object.defineProperty;var K=(s,e,t)=>e in s?X(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var V=(s,e,t)=>(K(s,typeof e!="symbol"?e+"":e,t),t);import{S as Q,i as W,s as Y,k as E,q as I,a as A,l as N,m as k,r as P,h as _,c as O,n as c,b as J,F as m,H as B,A as L,u as C,I as Z,J as $}from"../../chunks/index-16192b9f.js";class x{constructor(e={merge:[]}){V(this,"template");V(this,"result");this.template=e,this.result=e}validateMergeArray(e){return Boolean(e.merge)}setTemplateSource(e){try{const t=JSON.parse(e);if(!this.validateMergeArray(t))throw new Error("No merge fields array was found");return this.template=t,this.result=t,t}catch(t){throw t.message?new Error(t.message):new Error("Error parsing JSON")}}updateResultMergeFields(e){const{find:t,replace:l}=e,o={find:t,replace:l};if(!isNaN(Number(l))&&l.length>0)o.replace=Number(l);else try{o.replace=JSON.parse(l)}catch{o.replace=l}const a=this.result.merge.map(r=>(r==null?void 0:r.find)===e.find?o:r);return this.result={...this.result,merge:a},a}}const ee=[{find:"NAME",replace:"world"}],te={tracks:[{clips:[{asset:{type:"title",text:"Hello {{ NAME }}",style:"future"},start:0,length:5}]}]},le={format:"mp4",resolution:"hd"},re={merge:ee,timeline:te,output:le};function q(s,e,t){const l=s.slice();return l[9]=e[t].find,l[10]=e[t].replace,l}function j(s){let e,t,l;return{c(){e=E("p"),t=E("span"),l=I(s[2]),this.h()},l(o){e=N(o,"P",{"data-cy":!0,class:!0});var a=k(e);t=N(a,"SPAN",{class:!0});var r=k(t);l=P(r,s[2]),r.forEach(_),a.forEach(_),this.h()},h(){c(t,"class","monospace text-orange-900 svelte-u6rap9"),c(e,"data-cy","template-input-error"),c(e,"class","bg-rose-200 rounded py-2 px-4 svelte-u6rap9")},m(o,a){J(o,e,a),m(e,t),m(t,l)},p(o,a){a&4&&C(l,o[2])},d(o){o&&_(e)}}}function z(s){let e,t,l,o,a,r=s[0].merge,i=[];for(let n=0;n<r.length;n+=1)i[n]=F(q(s,r,n));return{c(){e=E("div"),t=E("h1"),l=I("Modify Merge Values"),o=A(),a=E("div");for(let n=0;n<i.length;n+=1)i[n].c();this.h()},l(n){e=N(n,"DIV",{"data-cy":!0,class:!0});var d=k(e);t=N(d,"H1",{class:!0});var u=k(t);l=P(u,"Modify Merge Values"),u.forEach(_),o=O(d),a=N(d,"DIV",{class:!0});var S=k(a);for(let p=0;p<i.length;p+=1)i[p].l(S);S.forEach(_),d.forEach(_),this.h()},h(){c(t,"class","text-teal-400 px-1 svelte-u6rap9"),c(a,"class","border p-4 mb-6 svelte-u6rap9"),c(e,"data-cy","merge-fields-input-section"),c(e,"class","svelte-u6rap9")},m(n,d){J(n,e,d),m(e,t),m(t,l),m(e,o),m(e,a);for(let u=0;u<i.length;u+=1)i[u].m(a,null)},p(n,d){if(d&33){r=n[0].merge;let u;for(u=0;u<r.length;u+=1){const S=q(n,r,u);i[u]?i[u].p(S,d):(i[u]=F(S),i[u].c(),i[u].m(a,null))}for(;u<i.length;u+=1)i[u].d(1);i.length=r.length}},d(n){n&&_(e),Z(i,n)}}}function F(s){let e,t="{{ "+s[9]+" }} ",l,o,a,r,i,n,d,u;function S(...p){return s[7](s[9],...p)}return{c(){e=E("label"),l=I(t),a=A(),r=E("input"),this.h()},l(p){e=N(p,"LABEL",{for:!0,class:!0});var f=k(e);l=P(f,t),f.forEach(_),a=O(p),r=N(p,"INPUT",{class:!0,id:!0,type:!0}),this.h()},h(){c(e,"for",o=s[9]),c(e,"class","block mb-2 monospace svelte-u6rap9"),c(r,"class","border w-full mb-3 pl-2 py-1 text-stone-500 svelte-u6rap9"),c(r,"id",i=s[9]),c(r,"type","text"),r.value=n=s[10]},m(p,f){J(p,e,f),m(e,l),J(p,a,f),J(p,r,f),d||(u=B(r,"input",S),d=!0)},p(p,f){s=p,f&1&&t!==(t="{{ "+s[9]+" }} ")&&C(l,t),f&1&&o!==(o=s[9])&&c(e,"for",o),f&1&&i!==(i=s[9])&&c(r,"id",i),f&1&&n!==(n=s[10])&&r.value!==n&&(r.value=n)},d(p){p&&_(e),p&&_(a),p&&_(r),d=!1,u()}}}function G(s){let e,t,l;return{c(){e=E("p"),t=E("span"),l=I(s[3]),this.h()},l(o){e=N(o,"P",{"data-cy":!0,class:!0});var a=k(e);t=N(a,"SPAN",{class:!0});var r=k(t);l=P(r,s[3]),r.forEach(_),a.forEach(_),this.h()},h(){c(t,"class","monospace text-orange-900 svelte-u6rap9"),c(e,"data-cy","merge-fields-input-error"),c(e,"class","bg-rose-200 rounded py-2 px-4 svelte-u6rap9")},m(o,a){J(o,e,a),m(e,t),m(t,l)},p(o,a){a&8&&C(l,o[3])},d(o){o&&_(e)}}}function U(s){let e,t,l,o,a,r,i,n,d,u=JSON.stringify(s[1],null,2)+"",S,p,f;return{c(){e=E("div"),t=E("h1"),l=I("Result"),o=A(),a=E("abbr"),r=E("img"),n=A(),d=E("p"),S=I(u),this.h()},l(T){e=N(T,"DIV",{"data-cy":!0,class:!0});var h=k(e);t=N(h,"H1",{class:!0});var g=k(t);l=P(g,"Result"),g.forEach(_),o=O(h),a=N(h,"ABBR",{title:!0,class:!0});var b=k(a);r=N(b,"IMG",{src:!0,alt:!0,class:!0}),b.forEach(_),n=O(h),d=N(h,"P",{class:!0});var y=k(d);S=P(y,u),y.forEach(_),h.forEach(_),this.h()},h(){c(t,"class","text-teal-400 px-1 inline-block mr-2 svelte-u6rap9"),$(r.src,i="img/copy-regular.svg")||c(r,"src",i),c(r,"alt","copy-button"),c(r,"class","h-4 cursor-pointer inline mb-1 svelte-u6rap9"),c(a,"title","Copy to clipboard"),c(a,"class","svelte-u6rap9"),c(d,"class","h-60 overflow-auto border p-4 whitespace-pre monospace svelte-u6rap9"),c(e,"data-cy","result-section"),c(e,"class","svelte-u6rap9")},m(T,h){J(T,e,h),m(e,t),m(t,l),m(e,o),m(e,a),m(a,r),m(e,n),m(e,d),m(d,S),p||(f=B(r,"click",s[6]),p=!0)},p(T,h){h&2&&u!==(u=JSON.stringify(T[1],null,2)+"")&&C(S,u)},d(T){T&&_(e),p=!1,f()}}}function se(s){var D;let e,t,l,o,a,r,i,n,d,u,S,p,f,T,h=s[2]&&j(s),g=((D=s[0].merge)==null?void 0:D.length)&&!s[2]&&z(s),b=s[3]&&G(s),y=!s[3]&&!s[2]&&U(s);return{c(){e=E("section"),t=E("form"),l=E("div"),o=E("label"),a=I("Paste template"),r=A(),i=E("textarea"),d=A(),h&&h.c(),u=A(),g&&g.c(),S=A(),b&&b.c(),p=A(),y&&y.c(),this.h()},l(v){e=N(v,"SECTION",{"data-cy":!0,class:!0});var w=k(e);t=N(w,"FORM",{class:!0});var M=k(t);l=N(M,"DIV",{"data-cy":!0,class:!0});var R=k(l);o=N(R,"LABEL",{for:!0,class:!0});var H=k(o);a=P(H,"Paste template"),H.forEach(_),r=O(R),i=N(R,"TEXTAREA",{class:!0,id:!0}),k(i).forEach(_),R.forEach(_),d=O(M),h&&h.l(M),u=O(M),g&&g.l(M),S=O(M),b&&b.l(M),M.forEach(_),p=O(w),y&&y.l(w),w.forEach(_),this.h()},h(){c(o,"for","json-input"),c(o,"class","text-teal-400 px-1 svelte-u6rap9"),c(i,"class","w-full h-60 monospace border p-4 overflow-auto whitespace-pre resize-none svelte-u6rap9"),c(i,"id","json-input"),i.value=n=JSON.stringify(s[0],null,2),c(l,"data-cy","template-input-section"),c(l,"class","mb-6 svelte-u6rap9"),c(t,"class","svelte-u6rap9"),c(e,"data-cy","form-container"),c(e,"class","max-w-lg my-4 mx-auto border rounded-xl px-7 py-4 svelte-u6rap9")},m(v,w){J(v,e,w),m(e,t),m(t,l),m(l,o),m(o,a),m(l,r),m(l,i),m(t,d),h&&h.m(t,null),m(t,u),g&&g.m(t,null),m(t,S),b&&b.m(t,null),m(e,p),y&&y.m(e,null),f||(T=B(i,"input",s[4]),f=!0)},p(v,[w]){var M;w&1&&n!==(n=JSON.stringify(v[0],null,2))&&(i.value=n),v[2]?h?h.p(v,w):(h=j(v),h.c(),h.m(t,u)):h&&(h.d(1),h=null),((M=v[0].merge)==null?void 0:M.length)&&!v[2]?g?g.p(v,w):(g=z(v),g.c(),g.m(t,S)):g&&(g.d(1),g=null),v[3]?b?b.p(v,w):(b=G(v),b.c(),b.m(t,null)):b&&(b.d(1),b=null),!v[3]&&!v[2]?y?y.p(v,w):(y=U(v),y.c(),y.m(e,null)):y&&(y.d(1),y=null)},i:L,o:L,d(v){v&&_(e),h&&h.d(),g&&g.d(),b&&b.d(),y&&y.d(),f=!1,T()}}}function ae(s,e,t){const l=new x(re);let o=l.template,a=l.result,r,i;function n(p){try{const f=l.setTemplateSource(p.target.value);t(0,o=f),t(1,a=f),t(2,r="")}catch(f){t(2,r=f.message)}}function d(p){try{const f=l.updateResultMergeFields(p);t(1,a={...a,merge:f}),t(3,i="")}catch(f){t(3,i=f.message)}}function u(){navigator.clipboard.writeText(JSON.stringify(a)),alert("JSON copied to clipboard!")}return[o,a,r,i,n,d,u,(p,f)=>d({find:p,replace:f.currentTarget.value})]}class ne extends Q{constructor(e){super(),W(this,e,ae,se,Y,{})}}export{ne as default};
