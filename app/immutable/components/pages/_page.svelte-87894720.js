var X=Object.defineProperty;var K=(a,e,t)=>e in a?X(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var C=(a,e,t)=>(K(a,typeof e!="symbol"?e+"":e,t),t);import{S as Q,i as W,s as Y,k as y,q as I,a as A,l as E,m as w,r as J,h,c as O,n as u,b as P,F as f,H as B,A as L,u as V,I as Z,J as $}from"../../chunks/index-16192b9f.js";class x{constructor(e={merge:[]}){C(this,"template");C(this,"result");this.template=e,this.result=e}validateMergeArray(e){return Boolean(e.merge)}setTemplateSource(e){try{const t=JSON.parse(e);if(!this.validateMergeArray(t))throw new Error("No merge fields array was found");return this.template=t,this.result=t,t}catch(t){throw t.message?new Error(t.message):new Error("Error parsing JSON")}}updateResultMergeFields(e){const{find:t,replace:l}=e,o={find:t,replace:l};if(!isNaN(Number(l))&&l.length>0)o.replace=Number(l);else try{o.replace=JSON.parse(l)}catch{o.replace=l}const r=this.result.merge.map(i=>(i==null?void 0:i.find)===e.find?o:i);return this.result={...this.result,merge:r},r}}const ee=[{find:"NAME",replace:"world"}],te={tracks:[{clips:[{asset:{type:"title",text:"Hello {{ NAME }}",style:"future"},start:0,length:5}]}]},le={format:"mp4",resolution:"hd"},ae={merge:ee,timeline:te,output:le};function q(a,e,t){const l=a.slice();return l[9]=e[t].find,l[10]=e[t].replace,l}function j(a){let e,t,l;return{c(){e=y("p"),t=y("span"),l=I(a[2]),this.h()},l(o){e=E(o,"P",{"data-cy":!0,class:!0});var r=w(e);t=E(r,"SPAN",{class:!0});var i=w(t);l=J(i,a[2]),i.forEach(h),r.forEach(h),this.h()},h(){u(t,"class","monospace text-orange-900 svelte-u6rap9"),u(e,"data-cy","template-input-error"),u(e,"class","bg-rose-200 rounded py-2 px-4 svelte-u6rap9")},m(o,r){P(o,e,r),f(e,t),f(t,l)},p(o,r){r&4&&V(l,o[2])},d(o){o&&h(e)}}}function z(a){let e,t,l,o,r,i=a[0].merge,s=[];for(let p=0;p<i.length;p+=1)s[p]=F(q(a,i,p));return{c(){e=y("div"),t=y("h1"),l=I("Modify Merge Values"),o=A(),r=y("div");for(let p=0;p<s.length;p+=1)s[p].c();this.h()},l(p){e=E(p,"DIV",{"data-cy":!0,class:!0});var d=w(e);t=E(d,"H1",{class:!0});var c=w(t);l=J(c,"Modify Merge Values"),c.forEach(h),o=O(d),r=E(d,"DIV",{class:!0});var _=w(r);for(let g=0;g<s.length;g+=1)s[g].l(_);_.forEach(h),d.forEach(h),this.h()},h(){u(t,"class","text-teal-400 px-1 svelte-u6rap9"),u(r,"class","border p-4 mb-6 svelte-u6rap9"),u(e,"data-cy","merge-fields-input-section"),u(e,"class","svelte-u6rap9")},m(p,d){P(p,e,d),f(e,t),f(t,l),f(e,o),f(e,r);for(let c=0;c<s.length;c+=1)s[c].m(r,null)},p(p,d){if(d&33){i=p[0].merge;let c;for(c=0;c<i.length;c+=1){const _=q(p,i,c);s[c]?s[c].p(_,d):(s[c]=F(_),s[c].c(),s[c].m(r,null))}for(;c<s.length;c+=1)s[c].d(1);s.length=i.length}},d(p){p&&h(e),Z(s,p)}}}function F(a){let e,t,l="{{ "+a[9]+" }} ",o,r,i,s,p,d,c,_,g;function N(...b){return a[7](a[9],...b)}return{c(){e=y("div"),t=y("label"),o=I(l),i=A(),s=y("input"),c=A(),this.h()},l(b){e=E(b,"DIV",{"data-cy":!0,class:!0});var n=w(e);t=E(n,"LABEL",{for:!0,class:!0});var m=w(t);o=J(m,l),m.forEach(h),i=O(n),s=E(n,"INPUT",{class:!0,id:!0,type:!0}),c=O(n),n.forEach(h),this.h()},h(){u(t,"for",r=a[9]),u(t,"class","block mb-2 monospace svelte-u6rap9"),u(s,"class","border w-full mb-3 pl-2 py-1 text-stone-500 svelte-u6rap9"),u(s,"id",p=a[9]),u(s,"type","text"),s.value=d=a[10],u(e,"data-cy","label-input"),u(e,"class","svelte-u6rap9")},m(b,n){P(b,e,n),f(e,t),f(t,o),f(e,i),f(e,s),f(e,c),_||(g=B(s,"input",N),_=!0)},p(b,n){a=b,n&1&&l!==(l="{{ "+a[9]+" }} ")&&V(o,l),n&1&&r!==(r=a[9])&&u(t,"for",r),n&1&&p!==(p=a[9])&&u(s,"id",p),n&1&&d!==(d=a[10])&&s.value!==d&&(s.value=d)},d(b){b&&h(e),_=!1,g()}}}function G(a){let e,t,l;return{c(){e=y("p"),t=y("span"),l=I(a[3]),this.h()},l(o){e=E(o,"P",{"data-cy":!0,class:!0});var r=w(e);t=E(r,"SPAN",{class:!0});var i=w(t);l=J(i,a[3]),i.forEach(h),r.forEach(h),this.h()},h(){u(t,"class","monospace text-orange-900 svelte-u6rap9"),u(e,"data-cy","merge-fields-input-error"),u(e,"class","bg-rose-200 rounded py-2 px-4 svelte-u6rap9")},m(o,r){P(o,e,r),f(e,t),f(t,l)},p(o,r){r&8&&V(l,o[3])},d(o){o&&h(e)}}}function U(a){let e,t,l,o,r,i,s,p,d,c=JSON.stringify(a[1],null,2)+"",_,g,N;return{c(){e=y("div"),t=y("h1"),l=I("Result"),o=A(),r=y("abbr"),i=y("img"),p=A(),d=y("p"),_=I(c),this.h()},l(b){e=E(b,"DIV",{"data-cy":!0,class:!0});var n=w(e);t=E(n,"H1",{class:!0});var m=w(t);l=J(m,"Result"),m.forEach(h),o=O(n),r=E(n,"ABBR",{title:!0,class:!0});var S=w(r);i=E(S,"IMG",{src:!0,alt:!0,class:!0}),S.forEach(h),p=O(n),d=E(n,"P",{"data-cy":!0,class:!0});var k=w(d);_=J(k,c),k.forEach(h),n.forEach(h),this.h()},h(){u(t,"class","text-teal-400 px-1 inline-block mr-2 svelte-u6rap9"),$(i.src,s="img/copy-regular.svg")||u(i,"src",s),u(i,"alt","copy-button"),u(i,"class","h-4 cursor-pointer inline mb-1 svelte-u6rap9"),u(r,"title","Copy to clipboard"),u(r,"class","svelte-u6rap9"),u(d,"data-cy","result"),u(d,"class","h-60 overflow-auto border p-4 whitespace-pre monospace svelte-u6rap9"),u(e,"data-cy","result-section"),u(e,"class","svelte-u6rap9")},m(b,n){P(b,e,n),f(e,t),f(t,l),f(e,o),f(e,r),f(r,i),f(e,p),f(e,d),f(d,_),g||(N=B(i,"click",a[6]),g=!0)},p(b,n){n&2&&c!==(c=JSON.stringify(b[1],null,2)+"")&&V(_,c)},d(b){b&&h(e),g=!1,N()}}}function re(a){var D;let e,t,l,o,r,i,s,p,d,c,_,g,N,b,n=a[2]&&j(a),m=((D=a[0].merge)==null?void 0:D.length)&&!a[2]&&z(a),S=a[3]&&G(a),k=!a[3]&&!a[2]&&U(a);return{c(){e=y("section"),t=y("form"),l=y("div"),o=y("label"),r=I("Paste template"),i=A(),s=y("textarea"),d=A(),n&&n.c(),c=A(),m&&m.c(),_=A(),S&&S.c(),g=A(),k&&k.c(),this.h()},l(v){e=E(v,"SECTION",{"data-cy":!0,class:!0});var M=w(e);t=E(M,"FORM",{class:!0});var T=w(t);l=E(T,"DIV",{"data-cy":!0,class:!0});var R=w(l);o=E(R,"LABEL",{for:!0,class:!0});var H=w(o);r=J(H,"Paste template"),H.forEach(h),i=O(R),s=E(R,"TEXTAREA",{"data-cy":!0,class:!0,id:!0}),w(s).forEach(h),R.forEach(h),d=O(T),n&&n.l(T),c=O(T),m&&m.l(T),_=O(T),S&&S.l(T),T.forEach(h),g=O(M),k&&k.l(M),M.forEach(h),this.h()},h(){u(o,"for","json-input"),u(o,"class","text-teal-400 px-1 svelte-u6rap9"),u(s,"data-cy","template-input"),u(s,"class","w-full h-60 monospace border p-4 overflow-auto whitespace-pre resize-none svelte-u6rap9"),u(s,"id","json-input"),s.value=p=JSON.stringify(a[0],null,2),u(l,"data-cy","template-input-section"),u(l,"class","mb-6 svelte-u6rap9"),u(t,"class","svelte-u6rap9"),u(e,"data-cy","form-container"),u(e,"class","max-w-lg my-4 mx-auto border rounded-xl px-7 py-4 svelte-u6rap9")},m(v,M){P(v,e,M),f(e,t),f(t,l),f(l,o),f(o,r),f(l,i),f(l,s),f(t,d),n&&n.m(t,null),f(t,c),m&&m.m(t,null),f(t,_),S&&S.m(t,null),f(e,g),k&&k.m(e,null),N||(b=B(s,"input",a[4]),N=!0)},p(v,[M]){var T;M&1&&p!==(p=JSON.stringify(v[0],null,2))&&(s.value=p),v[2]?n?n.p(v,M):(n=j(v),n.c(),n.m(t,c)):n&&(n.d(1),n=null),((T=v[0].merge)==null?void 0:T.length)&&!v[2]?m?m.p(v,M):(m=z(v),m.c(),m.m(t,_)):m&&(m.d(1),m=null),v[3]?S?S.p(v,M):(S=G(v),S.c(),S.m(t,null)):S&&(S.d(1),S=null),!v[3]&&!v[2]?k?k.p(v,M):(k=U(v),k.c(),k.m(e,null)):k&&(k.d(1),k=null)},i:L,o:L,d(v){v&&h(e),n&&n.d(),m&&m.d(),S&&S.d(),k&&k.d(),N=!1,b()}}}function se(a,e,t){const l=new x(ae);let o=l.template,r=l.result,i,s;function p(g){try{const N=l.setTemplateSource(g.target.value);t(0,o=N),t(1,r=N),t(2,i="")}catch(N){t(2,i=N.message)}}function d(g){try{const N=l.updateResultMergeFields(g);t(1,r={...r,merge:N}),t(3,s="")}catch(N){t(3,s=N.message)}}function c(){navigator.clipboard.writeText(JSON.stringify(r)),alert("JSON copied to clipboard!")}return[o,r,i,s,p,d,c,(g,N)=>d({find:g,replace:N.currentTarget.value})]}class ie extends Q{constructor(e){super(),W(this,e,se,re,Y,{})}}export{ie as default};
