var F=Object.defineProperty;var K=(o,e,t)=>e in o?F(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var C=(o,e,t)=>(K(o,typeof e!="symbol"?e+"":e,t),t);import{S as Q,i as W,s as Y,k as y,q as I,a as J,l as E,m as N,r as P,h as c,c as O,n as f,b as M,F as g,H as q,A as V,u as z,I as Z,J as $}from"../../chunks/index-16192b9f.js";class x{constructor(e){C(this,"template");C(this,"result");e?(this.template=e,this.result=e):(this.template={merge:[]},this.result={merge:[]})}validateMergeArray(e){return!!e.merge}setTemplateSource(e){try{const t=JSON.parse(e);if(!this.validateMergeArray(t))throw new Error("No merge fields array was found");return this.template=t,this.result=t,t}catch(t){throw t.message?new Error(t.message):new Error("Error parsing JSON.")}}updateResultMergeFields(e){const{find:t}=e,r=e.replace,l={find:t,replace:r};if(!isNaN(Number(r)))l.replace=Number(r);else if(r==="true"||r==="false")l.replace=r==="true";else try{l.replace=JSON.parse(r)}catch{l.replace=r}const i=this.result.merge.map(s=>(s==null?void 0:s.find)===e.find?l:s);return this.result={...this.result,merge:i},i}}function H(o,e,t){const r=o.slice();return r[10]=e[t].find,r[11]=e[t].replace,r}function j(o){let e,t,r;return{c(){e=y("p"),t=y("span"),r=I(o[2]),this.h()},l(l){e=E(l,"P",{class:!0});var i=N(e);t=E(i,"SPAN",{class:!0});var s=N(t);r=P(s,o[2]),s.forEach(c),i.forEach(c),this.h()},h(){f(t,"class","monospace text-orange-900 svelte-u6rap9"),f(e,"class","bg-rose-200 rounded py-2 px-4 svelte-u6rap9")},m(l,i){M(l,e,i),g(e,t),g(t,r)},p(l,i){i&4&&z(r,l[2])},d(l){l&&c(e)}}}function D(o){let e,t,r,l,i=o[0].merge,s=[];for(let a=0;a<i.length;a+=1)s[a]=G(H(o,i,a));return{c(){e=y("h1"),t=I("Modify Merge Values"),r=J(),l=y("div");for(let a=0;a<s.length;a+=1)s[a].c();this.h()},l(a){e=E(a,"H1",{class:!0});var p=N(e);t=P(p,"Modify Merge Values"),p.forEach(c),r=O(a),l=E(a,"DIV",{class:!0});var n=N(l);for(let d=0;d<s.length;d+=1)s[d].l(n);n.forEach(c),this.h()},h(){f(e,"class","text-teal-400 px-1 svelte-u6rap9"),f(l,"class","border p-4 mb-6 svelte-u6rap9")},m(a,p){M(a,e,p),g(e,t),M(a,r,p),M(a,l,p);for(let n=0;n<s.length;n+=1)s[n].m(l,null)},p(a,p){if(p&33){i=a[0].merge;let n;for(n=0;n<i.length;n+=1){const d=H(a,i,n);s[n]?s[n].p(d,p):(s[n]=G(d),s[n].c(),s[n].m(l,null))}for(;n<s.length;n+=1)s[n].d(1);s.length=i.length}},d(a){a&&c(e),a&&c(r),a&&c(l),Z(s,a)}}}function G(o){let e,t="{{ "+o[10]+" }} ",r,l,i,s,a,p,n,d;function T(...h){return o[7](o[10],...h)}return{c(){e=y("label"),r=I(t),i=J(),s=y("input"),this.h()},l(h){e=E(h,"LABEL",{for:!0,class:!0});var u=N(e);r=P(u,t),u.forEach(c),i=O(h),s=E(h,"INPUT",{class:!0,id:!0,type:!0}),this.h()},h(){f(e,"for",l=o[10]),f(e,"class","block mb-2 monospace svelte-u6rap9"),f(s,"class","border w-full mb-3 pl-2 py-1 text-stone-500 svelte-u6rap9"),f(s,"id",a=o[10]),f(s,"type","text"),s.value=p=o[11]},m(h,u){M(h,e,u),g(e,r),M(h,i,u),M(h,s,u),n||(d=q(s,"input",T),n=!0)},p(h,u){o=h,u&1&&t!==(t="{{ "+o[10]+" }} ")&&z(r,t),u&1&&l!==(l=o[10])&&f(e,"for",l),u&1&&a!==(a=o[10])&&f(s,"id",a),u&1&&p!==(p=o[11])&&s.value!==p&&(s.value=p)},d(h){h&&c(e),h&&c(i),h&&c(s),n=!1,d()}}}function U(o){let e,t,r;return{c(){e=y("p"),t=y("span"),r=I(o[3]),this.h()},l(l){e=E(l,"P",{class:!0});var i=N(e);t=E(i,"SPAN",{class:!0});var s=N(t);r=P(s,o[3]),s.forEach(c),i.forEach(c),this.h()},h(){f(t,"class","monospace text-orange-900 svelte-u6rap9"),f(e,"class","bg-rose-200 rounded py-2 px-4 svelte-u6rap9")},m(l,i){M(l,e,i),g(e,t),g(t,r)},p(l,i){i&8&&z(r,l[3])},d(l){l&&c(e)}}}function X(o){let e,t,r,l,i,s,a,p,n=JSON.stringify(o[1],null,2)+"",d,T,h;return{c(){e=y("h1"),t=I("Result"),r=J(),l=y("abbr"),i=y("img"),a=J(),p=y("p"),d=I(n),this.h()},l(u){e=E(u,"H1",{class:!0});var m=N(e);t=P(m,"Result"),m.forEach(c),r=O(u),l=E(u,"ABBR",{title:!0,class:!0});var v=N(l);i=E(v,"IMG",{src:!0,alt:!0,class:!0}),v.forEach(c),a=O(u),p=E(u,"P",{class:!0});var b=N(p);d=P(b,n),b.forEach(c),this.h()},h(){f(e,"class","text-teal-400 px-1 inline-block mr-2 svelte-u6rap9"),$(i.src,s="img/copy-regular.svg")||f(i,"src",s),f(i,"alt","copy-button"),f(i,"class","h-4 cursor-pointer inline mb-1 svelte-u6rap9"),f(l,"title","Copy to clipboard"),f(l,"class","svelte-u6rap9"),f(p,"class","h-60 overflow-auto border p-4 whitespace-pre monospace svelte-u6rap9")},m(u,m){M(u,e,m),g(e,t),M(u,r,m),M(u,l,m),g(l,i),M(u,a,m),M(u,p,m),g(p,d),T||(h=q(i,"click",o[6]),T=!0)},p(u,m){m&2&&n!==(n=JSON.stringify(u[1],null,2)+"")&&z(d,n)},d(u){u&&c(e),u&&c(r),u&&c(l),u&&c(a),u&&c(p),T=!1,h()}}}function ee(o){var B;let e,t,r,l,i,s,a,p,n,d,T,h,u,m,v=o[2]&&j(o),b=((B=o[0].merge)==null?void 0:B.length)&&!o[2]&&D(o),k=o[3]&&U(o),w=!o[3]&&!o[2]&&X(o);return{c(){e=y("section"),t=y("form"),r=y("div"),l=y("label"),i=I("Paste template"),s=J(),a=y("textarea"),n=J(),v&&v.c(),d=J(),b&&b.c(),T=J(),k&&k.c(),h=J(),w&&w.c(),this.h()},l(_){e=E(_,"SECTION",{class:!0});var S=N(e);t=E(S,"FORM",{class:!0});var A=N(t);r=E(A,"DIV",{class:!0});var R=N(r);l=E(R,"LABEL",{for:!0,class:!0});var L=N(l);i=P(L,"Paste template"),L.forEach(c),s=O(R),a=E(R,"TEXTAREA",{class:!0,id:!0}),N(a).forEach(c),R.forEach(c),n=O(A),v&&v.l(A),d=O(A),b&&b.l(A),A.forEach(c),T=O(S),k&&k.l(S),h=O(S),w&&w.l(S),S.forEach(c),this.h()},h(){f(l,"for","json-input"),f(l,"class","text-teal-400 px-1 svelte-u6rap9"),f(a,"class","w-full h-60 monospace border p-4 overflow-auto whitespace-pre resize-none svelte-u6rap9"),f(a,"id","json-input"),a.value=p=JSON.stringify(o[0],null,2),f(r,"class","mb-6 svelte-u6rap9"),f(t,"class","svelte-u6rap9"),f(e,"class","max-w-lg my-4 mx-auto border rounded-xl px-7 py-4 svelte-u6rap9")},m(_,S){M(_,e,S),g(e,t),g(t,r),g(r,l),g(l,i),g(r,s),g(r,a),g(t,n),v&&v.m(t,null),g(t,d),b&&b.m(t,null),g(e,T),k&&k.m(e,null),g(e,h),w&&w.m(e,null),u||(m=q(a,"input",o[4]),u=!0)},p(_,[S]){var A;S&1&&p!==(p=JSON.stringify(_[0],null,2))&&(a.value=p),_[2]?v?v.p(_,S):(v=j(_),v.c(),v.m(t,d)):v&&(v.d(1),v=null),((A=_[0].merge)==null?void 0:A.length)&&!_[2]?b?b.p(_,S):(b=D(_),b.c(),b.m(t,null)):b&&(b.d(1),b=null),_[3]?k?k.p(_,S):(k=U(_),k.c(),k.m(e,h)):k&&(k.d(1),k=null),!_[3]&&!_[2]?w?w.p(_,S):(w=X(_),w.c(),w.m(e,null)):w&&(w.d(1),w=null)},i:V,o:V,d(_){_&&c(e),v&&v.d(),b&&b.d(),k&&k.d(),w&&w.d(),u=!1,m()}}}function te(o,e,t){const r={timeline:{soundtrack:{src:"https://s3-ap-northeast-1.amazonaws.com/my-bucket/music.mp3",effect:"fadeIn",volume:0},background:"string",fonts:[{src:"https://s3-ap-northeast-1.amazonaws.com/my-bucket/open-sans.ttf"}],tracks:[{clips:[{asset:{type:"video",src:"https://s3-ap-northeast-1.amazonaws.com/my-bucket/video.mp4",trim:2,volume:1,crop:{top:.15,bottom:.15,left:0,right:0}},start:2,length:5,fit:"cover",scale:0,position:"top",offset:{x:.1,y:-.2},transition:{in:"fade",out:"fade"},effect:"zoomIn",filter:"greyscale",opacity:0,transform:{rotate:{angle:45},skew:{x:.5,y:.5},flip:{horizontal:!0,vertical:!0}}}]}],cache:!0},output:{format:"mp4",resolution:"sd",aspectRatio:969,size:{width:1200,height:800},fps:25,scaleTo:"preview",quality:"medium",repeat:!0,range:{start:3,length:6},poster:{capture:1},thumbnail:{capture:1,scale:.3},destinations:[{provider:"shotstack",exclude:!1}]},merge:[{find:"NAME",replace:"Jane"},{find:"AGE",replace:29}],callback:"https://my-server.com/callback.php",disk:"local"},l=new x(r);let i=l.template,s=l.result,a,p;function n(u){try{const m=l.setTemplateSource(u.target.value);t(0,i=m),t(1,s=m),t(2,a="")}catch(m){t(2,a=m.message)}}function d(u){try{const m=l.updateResultMergeFields(u);t(1,s={...s,merge:m}),t(3,p="")}catch(m){t(3,p=m.message)}}function T(){navigator.clipboard.writeText(JSON.stringify(s)),alert("JSON copied to clipboard!")}return[i,s,a,p,n,d,T,(u,m)=>d({find:u,replace:m.currentTarget.value})]}class re extends Q{constructor(e){super(),W(this,e,te,ee,Y,{})}}export{re as default};
