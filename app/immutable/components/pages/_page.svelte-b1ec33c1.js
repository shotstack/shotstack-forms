var Z=Object.defineProperty;var x=(r,e,t)=>e in r?Z(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var V=(r,e,t)=>(x(r,typeof e!="symbol"?e+"":e,t),t);import{S as K,i as Q,s as W,k as b,q as P,a as M,l as E,m as O,r as R,h as m,c as k,n as i,b as D,F as f,H as G,A as q,u as F,I as ee,J as te,v as re,w as se,x as le,f as ae,t as ne,y as oe}from"../../chunks/index-16192b9f.js";const ie="A 'merge' property is required",ue="Property 'merge' must be an array",ce="Property 'merge' must contain at least one element",pe="A 'find' property is required on every element inside 'merge'",fe="Every 'find' property inside 'merge' must be of type string",de="Every 'find' property inside 'merge' must be a string of length equal to or higher than one",me="A 'replace' property is required on every element inside 'merge'";class I extends Error{constructor(e){super(e)}}function C(r,e){return!(r in e)}function he(r,e){return!(e[r]instanceof Array)}function _e(r,e){return typeof e[r]!="string"}function ge(r,e){return!(typeof e[r]=="string"&&e[r].length>0)}function ve(r,e){return!(e[r]instanceof Array&&e[r].length>0)}function ye(r){try{const e=JSON.parse(r);if(C("merge",e))throw new I(ie);if(he("merge",e))throw new I(ue);if(ve("merge",e))throw new I(ce);const t=be(e.merge);return{...e,merge:t}}catch(e){throw e instanceof I||e.message?e:new I("There was a problem parsing the template json")}}function be(r){return r.map(t=>{if(C("find",t))throw new I(pe);if(C("replace",t))throw new I(me);if(_e("find",t))throw new I(fe);if(ge("find",t))throw new I(de);return t}).map(({find:t,replace:s})=>({find:t,replace:typeof s=="string"?s:JSON.stringify(s)}))}class Ee{constructor(e={merge:[]}){V(this,"template");V(this,"result");this.template=e,this.result=e}setTemplateSource(e){try{const t=ye(e);return this.template=t,this.result=t,t}catch(t){throw t instanceof Error?t:new Error("Error parsing JSON")}}updateResultMergeFields(e){const{find:t,replace:s}=e,n={find:t,replace:s},l=this.result.merge.map(u=>(u==null?void 0:u.find)===e.find?n:u);return this.result={...this.result,merge:l},l}}const we=[{find:"NAME",replace:"world"}],Ne={tracks:[{clips:[{asset:{type:"title",text:"Hello {{ NAME }}",style:"future"},start:0,length:5}]}]},Te={format:"mp4",resolution:"hd"},Oe={merge:we,timeline:Ne,output:Te};function H(r,e,t){const s=r.slice();return s[9]=e[t].find,s[10]=e[t].replace,s}function U(r){let e,t,s;return{c(){e=b("p"),t=b("span"),s=P(r[2]),this.h()},l(n){e=E(n,"P",{"data-cy":!0,class:!0});var l=O(e);t=E(l,"SPAN",{class:!0});var u=O(t);s=R(u,r[2]),u.forEach(m),l.forEach(m),this.h()},h(){i(t,"class","monospace text-orange-900 svelte-u6rap9"),i(e,"data-cy","template-input-error"),i(e,"class","bg-rose-200 rounded py-2 px-4 svelte-u6rap9")},m(n,l){D(n,e,l),f(e,t),f(t,s)},p(n,l){l&4&&F(s,n[2])},d(n){n&&m(e)}}}function Y(r){let e,t,s,n,l,u=r[0].merge,a=[];for(let p=0;p<u.length;p+=1)a[p]=$(H(r,u,p));return{c(){e=b("div"),t=b("h1"),s=P("Modify Merge Values"),n=M(),l=b("div");for(let p=0;p<a.length;p+=1)a[p].c();this.h()},l(p){e=E(p,"DIV",{"data-cy":!0,class:!0});var d=O(e);t=E(d,"H1",{class:!0});var c=O(t);s=R(c,"Modify Merge Values"),c.forEach(m),n=k(d),l=E(d,"DIV",{class:!0});var g=O(l);for(let v=0;v<a.length;v+=1)a[v].l(g);g.forEach(m),d.forEach(m),this.h()},h(){i(t,"class","text-teal-400 px-1 svelte-u6rap9"),i(l,"class","border p-4 mb-6 svelte-u6rap9"),i(e,"data-cy","merge-fields-input-section"),i(e,"class","svelte-u6rap9")},m(p,d){D(p,e,d),f(e,t),f(t,s),f(e,n),f(e,l);for(let c=0;c<a.length;c+=1)a[c].m(l,null)},p(p,d){if(d&33){u=p[0].merge;let c;for(c=0;c<u.length;c+=1){const g=H(p,u,c);a[c]?a[c].p(g,d):(a[c]=$(g),a[c].c(),a[c].m(l,null))}for(;c<a.length;c+=1)a[c].d(1);a.length=u.length}},d(p){p&&m(e),ee(a,p)}}}function $(r){let e,t,s="{{ "+r[9]+" }} ",n,l,u,a,p,d,c,g,v;function w(...y){return r[7](r[9],...y)}return{c(){e=b("div"),t=b("label"),n=P(s),u=M(),a=b("input"),c=M(),this.h()},l(y){e=E(y,"DIV",{"data-cy":!0,class:!0});var o=O(e);t=E(o,"LABEL",{for:!0,class:!0});var h=O(t);n=R(h,s),h.forEach(m),u=k(o),a=E(o,"INPUT",{class:!0,id:!0,type:!0}),c=k(o),o.forEach(m),this.h()},h(){i(t,"for",l=r[9]),i(t,"class","block mb-2 monospace svelte-u6rap9"),i(a,"class","border w-full mb-3 pl-2 py-1 text-stone-500 svelte-u6rap9"),i(a,"id",p=r[9]),i(a,"type","text"),a.value=d=X(r[10]),i(e,"data-cy","label-input"),i(e,"class","svelte-u6rap9")},m(y,o){D(y,e,o),f(e,t),f(t,n),f(e,u),f(e,a),f(e,c),g||(v=G(a,"input",w),g=!0)},p(y,o){r=y,o&1&&s!==(s="{{ "+r[9]+" }} ")&&F(n,s),o&1&&l!==(l=r[9])&&i(t,"for",l),o&1&&p!==(p=r[9])&&i(a,"id",p),o&1&&d!==(d=X(r[10]))&&a.value!==d&&(a.value=d)},d(y){y&&m(e),g=!1,v()}}}function j(r){let e,t,s;return{c(){e=b("p"),t=b("span"),s=P(r[3]),this.h()},l(n){e=E(n,"P",{"data-cy":!0,class:!0});var l=O(e);t=E(l,"SPAN",{class:!0});var u=O(t);s=R(u,r[3]),u.forEach(m),l.forEach(m),this.h()},h(){i(t,"class","monospace text-orange-900 svelte-u6rap9"),i(e,"data-cy","merge-fields-input-error"),i(e,"class","bg-rose-200 rounded py-2 px-4 svelte-u6rap9")},m(n,l){D(n,e,l),f(e,t),f(t,s)},p(n,l){l&8&&F(s,n[3])},d(n){n&&m(e)}}}function z(r){let e,t,s,n,l,u,a,p,d,c=JSON.stringify(r[1],null,2)+"",g,v,w;return{c(){e=b("div"),t=b("h1"),s=P("Result"),n=M(),l=b("abbr"),u=b("img"),p=M(),d=b("p"),g=P(c),this.h()},l(y){e=E(y,"DIV",{"data-cy":!0,class:!0});var o=O(e);t=E(o,"H1",{class:!0});var h=O(t);s=R(h,"Result"),h.forEach(m),n=k(o),l=E(o,"ABBR",{title:!0,class:!0});var N=O(l);u=E(N,"IMG",{src:!0,alt:!0,class:!0}),N.forEach(m),p=k(o),d=E(o,"P",{"data-cy":!0,class:!0});var T=O(d);g=R(T,c),T.forEach(m),o.forEach(m),this.h()},h(){i(t,"class","text-teal-400 px-1 inline-block mr-2 svelte-u6rap9"),te(u.src,a="img/copy-regular.svg")||i(u,"src",a),i(u,"alt","copy-button"),i(u,"class","h-4 cursor-pointer inline mb-1 svelte-u6rap9"),i(l,"title","Copy to clipboard"),i(l,"class","svelte-u6rap9"),i(d,"data-cy","result"),i(d,"class","h-60 overflow-auto border p-4 whitespace-pre monospace svelte-u6rap9"),i(e,"data-cy","result-section"),i(e,"class","svelte-u6rap9")},m(y,o){D(y,e,o),f(e,t),f(t,s),f(e,n),f(e,l),f(l,u),f(e,p),f(e,d),f(d,g),v||(w=G(u,"click",r[6]),v=!0)},p(y,o){o&2&&c!==(c=JSON.stringify(y[1],null,2)+"")&&F(g,c)},d(y){y&&m(e),v=!1,w()}}}function Se(r){var L;let e,t,s,n,l,u,a,p,d,c,g,v,w,y,o=r[2]&&U(r),h=((L=r[0].merge)==null?void 0:L.length)&&!r[2]&&Y(r),N=r[3]&&j(r),T=!r[3]&&!r[2]&&z(r);return{c(){e=b("section"),t=b("form"),s=b("div"),n=b("label"),l=P("Paste template"),u=M(),a=b("textarea"),d=M(),o&&o.c(),c=M(),h&&h.c(),g=M(),N&&N.c(),v=M(),T&&T.c(),this.h()},l(_){e=E(_,"SECTION",{"data-cy":!0,class:!0});var S=O(e);t=E(S,"FORM",{class:!0});var A=O(t);s=E(A,"DIV",{"data-cy":!0,class:!0});var J=O(s);n=E(J,"LABEL",{for:!0,class:!0});var B=O(n);l=R(B,"Paste template"),B.forEach(m),u=k(J),a=E(J,"TEXTAREA",{"data-cy":!0,class:!0,id:!0}),O(a).forEach(m),J.forEach(m),d=k(A),o&&o.l(A),c=k(A),h&&h.l(A),g=k(A),N&&N.l(A),A.forEach(m),v=k(S),T&&T.l(S),S.forEach(m),this.h()},h(){i(n,"for","json-input"),i(n,"class","text-teal-400 px-1 svelte-u6rap9"),i(a,"data-cy","template-input"),i(a,"class","w-full h-60 monospace border p-4 overflow-auto whitespace-pre resize-none svelte-u6rap9"),i(a,"id","json-input"),a.value=p=JSON.stringify(r[0],null,2),i(s,"data-cy","template-input-section"),i(s,"class","mb-6 svelte-u6rap9"),i(t,"class","svelte-u6rap9"),i(e,"data-cy","form-container"),i(e,"class","max-w-lg my-4 mx-auto border rounded-xl px-7 py-4 svelte-u6rap9")},m(_,S){D(_,e,S),f(e,t),f(t,s),f(s,n),f(n,l),f(s,u),f(s,a),f(t,d),o&&o.m(t,null),f(t,c),h&&h.m(t,null),f(t,g),N&&N.m(t,null),f(e,v),T&&T.m(e,null),w||(y=G(a,"input",r[4]),w=!0)},p(_,[S]){var A;S&1&&p!==(p=JSON.stringify(_[0],null,2))&&(a.value=p),_[2]?o?o.p(_,S):(o=U(_),o.c(),o.m(t,c)):o&&(o.d(1),o=null),((A=_[0].merge)==null?void 0:A.length)&&!_[2]?h?h.p(_,S):(h=Y(_),h.c(),h.m(t,g)):h&&(h.d(1),h=null),_[3]?N?N.p(_,S):(N=j(_),N.c(),N.m(t,null)):N&&(N.d(1),N=null),!_[3]&&!_[2]?T?T.p(_,S):(T=z(_),T.c(),T.m(e,null)):T&&(T.d(1),T=null)},i:q,o:q,d(_){_&&m(e),o&&o.d(),h&&h.d(),N&&N.d(),T&&T.d(),w=!1,y()}}}function X(r){if(typeof r=="string")return r;try{return JSON.stringify(r)}catch{return r}}function Ae(r,e,t){const s=new Ee(Oe);let n=s.template,l=s.result,u,a;function p(v){try{const w=s.setTemplateSource(v.target.value);t(0,n=w),t(1,l=w),t(2,u="")}catch(w){t(2,u=w.message)}}function d(v){try{const w=s.updateResultMergeFields(v);t(1,l={...l,merge:w}),t(3,a="")}catch(w){t(3,a=w.message)}}function c(){navigator.clipboard.writeText(JSON.stringify(l)),alert("JSON copied to clipboard!")}return[n,l,u,a,p,d,c,(v,w)=>d({find:v,replace:w.currentTarget.value})]}class Me extends K{constructor(e){super(),Q(this,e,Ae,Se,W,{})}}function ke(r){let e,t;return e=new Me({}),{c(){re(e.$$.fragment)},l(s){se(e.$$.fragment,s)},m(s,n){le(e,s,n),t=!0},p:q,i(s){t||(ae(e.$$.fragment,s),t=!0)},o(s){ne(e.$$.fragment,s),t=!1},d(s){oe(e,s)}}}class Re extends K{constructor(e){super(),Q(this,e,null,ke,W,{})}}export{Re as default};
